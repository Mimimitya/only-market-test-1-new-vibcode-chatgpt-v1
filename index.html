
<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Only Market</title>
  <style>
    :root{
      --bg0:#070812;
      --bg1:#0b1024;
      --card:rgba(255,255,255,.06);
      --card2:rgba(255,255,255,.09);
      --stroke:rgba(255,255,255,.10);
      --text:#e9ecff;
      --muted:rgba(233,236,255,.72);
      --muted2:rgba(233,236,255,.55);
      --shadow: 0 18px 50px rgba(0,0,0,.45);
      --radius:18px;
      --accent:#7c5cff;
      --accent2:#22c1ff;
      --danger:#ff4d6d;
      --ok:#22c55e;
      --warn:#f59e0b;
      --chip:rgba(255,255,255,.08);
      --focus: 0 0 0 3px rgba(124,92,255,.25);
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }
    [data-theme="light"]{
      --bg0:#f5f6ff;
      --bg1:#ffffff;
      --card:rgba(0,0,0,.04);
      --card2:rgba(0,0,0,.06);
      --stroke:rgba(0,0,0,.10);
      --text:#0b1024;
      --muted:rgba(11,16,36,.70);
      --muted2:rgba(11,16,36,.55);
      --shadow: 0 18px 50px rgba(8,11,22,.16);
      --chip:rgba(0,0,0,.05);
      --focus: 0 0 0 3px rgba(124,92,255,.20);
    }
    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 20% -10%, rgba(124,92,255,.35), transparent 55%),
        radial-gradient(900px 600px at 90% 10%, rgba(34,193,255,.24), transparent 55%),
        radial-gradient(1100px 700px at 60% 120%, rgba(255,77,109,.14), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow-x:hidden;
    }
    a{ color:inherit; }
    .wrap{ max-width:1200px; margin:0 auto; padding:22px 16px 40px; }
    .topbar{
      position:sticky; top:0; z-index:30;
      backdrop-filter: blur(14px);
      background: linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,0));
      border-bottom:1px solid var(--stroke);
    }
    [data-theme="light"] .topbar{
      background: linear-gradient(180deg, rgba(255,255,255,.82), rgba(255,255,255,.35));
    }
    .topbar .row{ max-width:1200px; margin:0 auto; padding:14px 16px; display:flex; gap:12px; align-items:center; }
    .brand{ display:flex; align-items:center; gap:10px; min-width:200px; }
    .logo{
      width:34px;height:34px;border-radius:12px;
      background:
        radial-gradient(18px 18px at 30% 30%, rgba(255,255,255,.35), rgba(255,255,255,0) 60%),
        linear-gradient(135deg, var(--accent), var(--accent2));
      box-shadow: 0 10px 30px rgba(124,92,255,.25);
      border:1px solid rgba(255,255,255,.16);
    }
    [data-theme="light"] .logo{ border-color: rgba(0,0,0,.10); }
    .brand h1{ font-size:14px; margin:0; letter-spacing:.3px; }
    .brand .sub{ font-size:12px; color:var(--muted2); margin-top:2px; }
    .spacer{ flex:1; }
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 12px;
      border:1px solid var(--stroke);
      background: var(--card);
      border-radius:999px;
      box-shadow: 0 10px 30px rgba(0,0,0,.18);
    }
    [data-theme="light"] .pill{ box-shadow: 0 10px 30px rgba(8,11,22,.08); }
    .pill input{
      background:transparent; border:0; outline:none; color:var(--text);
      width: 260px; max-width: 42vw;
      font-size: 14px;
    }
    .btn{
      border:1px solid var(--stroke);
      background: var(--card);
      color:var(--text);
      border-radius:12px;
      padding:10px 12px;
      cursor:pointer;
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
      display:inline-flex; align-items:center; justify-content:center;
      gap:8px; user-select:none;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.18); background: var(--card2); }
    .btn:active{ transform: translateY(0px); }
    .btn:focus{ outline:none; box-shadow: var(--focus); }
    .btn.primary{
      border-color: rgba(124,92,255,.45);
      background: linear-gradient(135deg, rgba(124,92,255,.95), rgba(34,193,255,.80));
      color:white;
    }
    .btn.primary:hover{ border-color: rgba(124,92,255,.70); }
    .btn.danger{ border-color: rgba(255,77,109,.55); background: rgba(255,77,109,.12); }
    .btn.ghost{ background: transparent; }
    .chip{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 10px; border:1px solid var(--stroke);
      background: var(--chip); border-radius:999px;
      font-size:12px; color: var(--muted);
      user-select:none;
    }
    .grid{
      display:grid;
      grid-template-columns: 320px 1fr;
      gap:16px;
      align-items:start;
      margin-top: 18px;
    }
    @media (max-width: 980px){
      .grid{ grid-template-columns:1fr; }
      .brand{ min-width: unset; }
      .pill input{ width: 40vw; }
    }
    .card{
      border:1px solid var(--stroke);
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .card .hd{
      padding:14px 14px 12px;
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      border-bottom:1px solid var(--stroke);
    }
    .card .hd h2{ margin:0; font-size:14px; letter-spacing:.2px; }
    .card .bd{ padding:14px; }
    .nav{
      display:flex; flex-direction:column; gap:8px;
    }
    .nav .item{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid transparent;
      background: transparent;
      cursor:pointer;
      color: var(--muted);
    }
    .nav .item:hover{ background: var(--card2); color:var(--text); }
    .nav .item.active{
      background: linear-gradient(135deg, rgba(124,92,255,.20), rgba(34,193,255,.12));
      border-color: rgba(124,92,255,.22);
      color: var(--text);
    }
    .nav .badge{
      font-size:11px; padding:4px 8px; border-radius:999px;
      border:1px solid var(--stroke);
      background: var(--chip);
      color: var(--muted);
    }
    .kpi{
      display:grid; grid-template-columns:1fr 1fr; gap:10px;
    }
    .kpi .box{
      border:1px solid var(--stroke);
      background: var(--card2);
      border-radius:14px;
      padding:12px;
    }
    .kpi .box .t{ font-size:11px; color:var(--muted2); }
    .kpi .box .v{ font-size:18px; margin-top:6px; font-weight:700; }
    .kpi .box .v small{ font-size:12px; color:var(--muted2); font-weight:600; }
    .hr{ height:1px; background: var(--stroke); margin:12px 0; }
    .two{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:14px;
    }
    @media (max-width: 980px){
      .two{ grid-template-columns:1fr; }
    }
    .list{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:12px;
    }
    @media (max-width: 980px){
      .list{ grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 540px){
      .list{ grid-template-columns:1fr; }
    }
    .tile{
      border:1px solid var(--stroke);
      background: var(--card2);
      border-radius: 16px;
      overflow:hidden;
      cursor:pointer;
      transition: transform .08s ease, border-color .2s ease, background .2s ease;
      display:flex; flex-direction:column;
      min-height: 280px;
    }
    .tile:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.18); }
    .tile .img{
      height: 148px;
      background:
        radial-gradient(280px 160px at 30% 20%, rgba(124,92,255,.35), rgba(124,92,255,0) 60%),
        radial-gradient(260px 160px at 80% 30%, rgba(34,193,255,.22), rgba(34,193,255,0) 60%),
        linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
      display:flex; align-items:center; justify-content:center;
      position:relative;
      border-bottom:1px solid var(--stroke);
    }
    .tile img{
      width:100%; height:100%;
      object-fit: cover;
      display:block;
    }
    .tile .vip{
      position:absolute; top:10px; left:10px;
      padding:6px 10px;
      border-radius:999px;
      font-size:11px;
      background: rgba(124,92,255,.18);
      border:1px solid rgba(124,92,255,.35);
      color: var(--text);
      backdrop-filter: blur(10px);
    }
    .tile .ct{
      padding:12px;
      display:flex; flex-direction:column; gap:8px;
      flex:1;
    }
    .tile .title{ font-weight:700; font-size:14px; line-height:1.25; }
    .tile .desc{ color:var(--muted); font-size:12px; line-height:1.35; height: 46px; overflow:hidden; }
    .tile .meta{ display:flex; align-items:center; justify-content:space-between; gap:10px; margin-top:auto; }
    .price{ font-weight:800; }
    .muted{ color:var(--muted); }
    .row2{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
    .field{ display:flex; flex-direction:column; gap:6px; }
    .field label{ font-size:12px; color:var(--muted2); }
    .input, .select, .textarea{
      border:1px solid var(--stroke);
      background: rgba(0,0,0,.10);
      color:var(--text);
      border-radius: 12px;
      padding: 10px 12px;
      outline:none;
      font-size:14px;
      width:100%;
    }
    [data-theme="light"] .input, [data-theme="light"] .select, [data-theme="light"] .textarea{ background: rgba(255,255,255,.60); }
    .textarea{ min-height: 96px; resize: vertical; }
    .input:focus, .select:focus, .textarea:focus{ box-shadow: var(--focus); }
    .hint{ font-size:12px; color:var(--muted2); line-height:1.35; }
    .mono{ font-family: var(--mono); }
    /* modal */
    .overlay{
      position:fixed; inset:0; z-index:60;
      display:none; place-items:center;
      background: rgba(0,0,0,.55);
      padding: 18px;
    }
    [data-theme="light"] .overlay{ background: rgba(11,16,36,.35); }
    .modal{
      width:min(760px, 100%);
      border:1px solid var(--stroke);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border-radius: 20px;
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .modal .mh{ padding:14px 14px 12px; display:flex; align-items:center; justify-content:space-between; gap:10px; border-bottom:1px solid var(--stroke); }
    .modal .mh b{ font-size:14px; }
    .modal .mb{ padding:14px; }
    .modal .mf{ padding:14px; border-top:1px solid var(--stroke); display:flex; gap:10px; justify-content:flex-end; flex-wrap:wrap; }
    .x{ width:36px; height:36px; border-radius:12px; }
    /* toasts */
    .toasts{ position: fixed; right: 14px; bottom: 14px; z-index: 80; display:flex; flex-direction:column; gap:10px; }
    .toast{
      min-width: 260px; max-width: 360px;
      border:1px solid var(--stroke);
      background: rgba(0,0,0,.30);
      border-radius: 16px;
      padding: 10px 12px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(12px);
      transform: translateY(0);
      opacity: 1;
      transition: opacity .2s ease, transform .2s ease;
    }
    [data-theme="light"] .toast{ background: rgba(255,255,255,.78); }
    .toast .t{ display:flex; align-items:center; gap:10px; font-weight:700; font-size:13px; }
    .toast .m{ margin-top:6px; color: var(--muted); font-size:12px; line-height:1.35; }
    .dot{ width:10px; height:10px; border-radius:999px; background: var(--ok); }
    .toast.warn .dot{ background: var(--warn); }
    .toast.bad .dot{ background: var(--danger); }
    /* chat */
    .chat{
      display:grid;
      grid-template-columns: 320px 1fr;
      gap: 12px;
      min-height: 520px;
    }
    @media (max-width: 980px){
      .chat{ grid-template-columns:1fr; }
    }
    .rooms{
      border:1px solid var(--stroke);
      background: var(--card2);
      border-radius: 16px;
      overflow:hidden;
    }
    .roomItem{
      padding:12px;
      border-bottom:1px solid var(--stroke);
      cursor:pointer;
    }
    .roomItem:hover{ background: rgba(255,255,255,.04); }
    .roomItem.active{ background: linear-gradient(135deg, rgba(124,92,255,.18), rgba(34,193,255,.10)); }
    .roomItem .top{ display:flex; align-items:center; justify-content:space-between; gap:10px; }
    .roomItem .name{ font-weight:800; font-size:13px; }
    .roomItem .time{ font-size:11px; color:var(--muted2); }
    .roomItem .last{ font-size:12px; color:var(--muted); margin-top:6px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .msgs{
      border:1px solid var(--stroke);
      background: var(--card2);
      border-radius: 16px;
      overflow:hidden;
      display:flex;
      flex-direction:column;
    }
    .msgs .head{
      padding:12px;
      border-bottom:1px solid var(--stroke);
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .msgs .body{
      padding:12px;
      overflow:auto;
      flex:1;
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .bubble{
      max-width: 86%;
      padding:10px 12px;
      border:1px solid var(--stroke);
      border-radius: 16px;
      background: rgba(0,0,0,.18);
    }
    [data-theme="light"] .bubble{ background: rgba(255,255,255,.68); }
    .bubble.me{
      margin-left:auto;
      border-color: rgba(124,92,255,.35);
      background: rgba(124,92,255,.14);
    }
    .bubble .meta{ font-size:11px; color:var(--muted2); display:flex; justify-content:space-between; gap:10px; margin-bottom:6px; }
    .bubble .text{ font-size:13px; line-height:1.35; white-space:pre-wrap; word-break:break-word; }
    .bubble img{ max-width:100%; border-radius:12px; border:1px solid var(--stroke); display:block; }
    .composer{
      padding:12px; border-top:1px solid var(--stroke);
      display:flex; gap:10px; align-items:flex-end;
    }
    .composer textarea{
      flex:1; min-height:44px; max-height:120px;
    }
    .small{ font-size:11px; color:var(--muted2); }
    .debugBox{ display:none; margin-top:10px; }
    .debugBox pre{
      margin:0;
      padding:12px;
      border-radius: 14px;
      border:1px solid var(--stroke);
      background: rgba(0,0,0,.22);
      overflow:auto;
      max-height: 260px;
      font-size: 12px;
      color: rgba(233,236,255,.85);
    }
    [data-theme="light"] .debugBox pre{ background: rgba(255,255,255,.70); color: rgba(11,16,36,.88); }
  
/* =======================================================================
   Only Market v4 (playerok-ish) ‚Äì UX fixes + own UI components
   - category/subcategory chosen in a single picker
   - chats in scrollable frames
   - profile filled with real settings sections
   - MODALS ARE OPAQUE (no glass)
   ======================================================================= */

:root{
  --modal-bg: var(--bg1);
  --overlay-bg: #05060d;
  --soft-stroke: rgba(255,255,255,14);
  --soft-stroke-2: rgba(255,255,255,10);
  --elev: 0 18px 60px rgba(0,0,0,55);
  --field-bg: rgba(0,0,0,14);
}

[data-theme="light"]{
  --overlay-bg: #eef0ff;
  --field-bg: rgba(0,0,0,06);
}

/* Opaque overlay + modal */
.overlay{
  background: var(--overlay-bg) !important;
}
.modal{
  background: var(--modal-bg) !important;
  backdrop-filter: none !important;
  box-shadow: var(--elev) !important;
}
[data-theme="light"] .modal{
  background: #ffffff !important;
}
.modal .mh{
  background: transparent !important;
}

/* custom ‚Äúselect-like‚Äù control */
.combo{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  border:1px solid var(--stroke);
  background: var(--field-bg);
  border-radius: 12px;
  padding: 10px 10px;
}
.combo .val{
  min-height: 18px;
  font-size:14px;
  color: var(--text);
  display:flex;
  align-items:center;
  gap:8px;
}
.combo .val .path{ color: var(--muted); font-size:12px; }
.combo .actions{ display:flex; gap:8px; }

/* tabs (profile) */
.tabs{
  display:flex; gap:8px; flex-wrap:wrap;
  padding: 8px;
  border:1px solid var(--stroke);
  background: var(--card2);
  border-radius: 16px;
}
.tab{
  border:1px solid var(--stroke);
  background: transparent;
  color: var(--text);
  border-radius: 999px;
  padding: 8px 12px;
  font-size: 13px;
  cursor:pointer;
}
.tab.active{
  background: rgba(124,92,255,18);
  border-color: rgba(124,92,255,35);
}

/* category tree */
.catTree{
  border:1px solid var(--stroke);
  background: var(--card2);
  border-radius: 16px;
  overflow:auto;
  max-height: min(58vh, 520px);
}
.catRow{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding: 10px 12px;
  border-bottom:1px solid var(--soft-stroke-2);
  cursor:pointer;
}
.catRow:hover{ background: rgba(255,255,255,04); }
.catRow .left{ display:flex; align-items:center; gap:10px; }
.catRow .indent{ width: 10px; flex:0 0 auto; }
.catRow .name{ font-weight: 700; font-size: 13px; }
.catRow .path{ font-size: 12px; color: var(--muted2); }
.catRow .leaf{ font-size: 11px; color: var(--muted2); padding: 2px 8px; border:1px solid var(--soft-stroke); border-radius: 999px; }
.catRow.sel{ background: rgba(124,92,255,12); border-bottom-color: rgba(124,92,255,25); }

/* chat: make frames scrollable and pinned */
.chat{
  height: calc(100vh - 240px);
  min-height: 560px;
}
.rooms{ overflow:auto !important; }
.msgs{
  display:flex !important;
  flex-direction:column !important;
  overflow:hidden !important;
}
.msgs .body{
  flex:1 1 auto !important;
  overflow:auto !important;
  overscroll-behavior: contain;
}
.composer{
  position: sticky;
  bottom: 0;
  background: var(--card2);
  backdrop-filter: blur(12px);
}

/* long message collapse */
.bubble .text.collapsed{
  max-height: 140px;
  overflow:hidden;
  position:relative;
}
.bubble .more{
  margin-top: 8px;
  font-size: 12px;
  color: var(--accent2);
  cursor:pointer;
  user-select:none;
}

  </style>
</head>
<body>
  <div class="topbar">
    <div class="row">
      <div class="brand">
        <div class="logo"></div>
        <div>
          <h1>Only Market</h1>
          <div class="sub" id="netStatus">–ø–æ–¥–∫–ª—é—á–∞–µ–º—Å—è‚Ä¶</div>
        </div>
      </div>

      <div class="pill" title="–ü–æ–∏—Å–∫ –ø–æ —Ç–æ–≤–∞—Ä–∞–º">
        <span class="chip">‚åï</span>
        <input id="q" placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ / –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ / ID‚Ä¶" />
      </div>

      <div class="spacer"></div>

      <button class="btn" id="themeBtn" title="–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É">üåô</button>
      <button class="btn" id="debugBtn" title="Debug API">‚öóÔ∏é</button>
      <button class="btn primary" id="authBtn">–í–æ–π—Ç–∏</button>
    </div>
  </div>

  <div class="wrap">
    <div class="grid">
      <div class="card">
        <div class="hd">
          <h2>–ù–∞–≤–∏–≥–∞—Ü–∏—è</h2>
          <span class="chip" id="meChip">–ì–æ—Å—Ç—å</span>
        </div>
        <div class="bd">
          <div class="nav" id="nav">
            <div class="item active" data-view="market"><span>üõí –ú–∞—Ä–∫–µ—Ç</span><span class="badge" id="badgeMarket">‚Äî</span></div>
            <div class="item" data-view="sell"><span>‚ûï –ü—Ä–æ–¥–∞—Ç—å</span><span class="badge">—Ç–æ–≤–∞—Ä</span></div>
            <div class="item" data-view="deals"><span>ü§ù –°–¥–µ–ª–∫–∏</span><span class="badge" id="badgeDeals">‚Äî</span></div>
            <div class="item" data-view="chat"><span>üí¨ –ß–∞—Ç—ã</span><span class="badge" id="badgeChats">‚Äî</span></div>
            <div class="item" data-view="wallet"><span>üí≥ –ö–æ—à–µ–ª—ë–∫</span><span class="badge" id="badgeWallet">‚Äî</span></div>
            <div class="item" data-view="profile"><span>üë§ –ü—Ä–æ—Ñ–∏–ª—å</span><span class="badge">–Ω–∞—Å—Ç—Ä–æ–π–∫–∏</span></div>
          </div>
          <div class="hr"></div>
          <div class="kpi">
            <div class="box">
              <div class="t">–ë–∞–ª–∞–Ω—Å –¥–æ—Å—Ç—É–ø–Ω–æ</div>
              <div class="v" id="kpiAvail">‚Äî <small>‚ÇΩ</small></div>
            </div>
            <div class="box">
              <div class="t">–í —Ö–æ–ª–¥–µ</div>
              <div class="v" id="kpiHold">‚Äî <small>‚ÇΩ</small></div>
            </div>
          </div>

          <div class="debugBox" id="debugBox">
            <div class="hr"></div>
            <div class="small">Debug: –ø–æ—Å–ª–µ–¥–Ω–∏–π –æ—Ç–≤–µ—Ç API</div>
            <pre id="debugPre"></pre>
          </div>
        </div>
      </div>

      <div id="view"></div>
    </div>
  </div>

  <div class="overlay" id="overlay" aria-hidden="true">
    <div class="modal">
      <div class="mh">
        <b id="mTitle">–û–∫–Ω–æ</b>
        <button class="btn x" id="mClose" title="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
      </div>
      <div class="mb" id="mBody"></div>
      <div class="mf" id="mFoot"></div>
    </div>
  </div>

  <div class="toasts" id="toasts"></div>

<script>
(function(){
  // ---------------- utils ----------------
  function $(sel, root){ return (root||document).querySelector(sel); }
  function $all(sel, root){ return Array.prototype.slice.call((root||document).querySelectorAll(sel)); }
  function esc(s){
    s = String(s == null ? "" : s);
    s = s.split("&").join("&amp;");
    s = s.split("<").join("&lt;");
    s = s.split(">").join("&gt;");
    s = s.split('"').join("&quot;");
    s = s.split("'").join("&#039;");
    return s;
  }
  function fmtRub(n){
    var x = Number(n||0);
    if (!isFinite(x)) x = 0;
    try{ return x.toLocaleString("ru-RU"); }catch(e){ return String(x); }
  }
  function timeAgo(ts){
    var t = Number(ts||0);
    if(!t) return "";
    var d = Date.now() - t;
    if(d < 60*1000) return "—Ç–æ–ª—å–∫–æ —á—Ç–æ";
    if(d < 60*60*1000) return Math.floor(d/60000) + "–º";
    if(d < 24*60*60*1000) return Math.floor(d/3600000) + "—á";
    return new Date(t).toLocaleDateString("ru-RU");
  }
  function toast(title, msg, kind){
    msg = msg || "";
    kind = kind || "ok";
    var wrap = $("#toasts");
    var el = document.createElement("div");
    el.className = "toast " + (kind === "bad" ? "bad" : (kind === "warn" ? "warn" : "ok"));
    el.innerHTML = '<div class="t"><span class="dot"></span><span>'+esc(title)+'</span></div>' + (msg ? '<div class="m">'+esc(msg)+'</div>' : '');
    wrap.appendChild(el);
    setTimeout(function(){ el.style.opacity="0"; el.style.transform="translateY(8px)"; }, 3200);
    setTimeout(function(){ try{ el.remove(); }catch(e){} }, 3600);
  }

  // ---------------- theme ----------------
  var LS = { theme:"om_theme", token:"om_token" };
  function applyTheme(t){
    t = (t === "light") ? "light" : "dark";
    document.documentElement.setAttribute("data-theme", t);
    localStorage.setItem(LS.theme, t);
    $("#themeBtn").textContent = (t === "light") ? "‚òÄÔ∏è" : "üåô";
  }
  applyTheme(localStorage.getItem(LS.theme) || "dark");
  $("#themeBtn").addEventListener("click", function(){
    var cur = document.documentElement.getAttribute("data-theme");
    applyTheme(cur === "dark" ? "light" : "dark");
  });

  // ---------------- debug ----------------
  var debugOn = false;
  function setDebug(v){
    debugOn = !!v;
    $("#debugBox").style.display = debugOn ? "block" : "none";
  }
  $("#debugBtn").addEventListener("click", function(){
    setDebug(!debugOn);
    toast("Debug " + (debugOn ? "ON" : "OFF"), "", debugOn ? "ok" : "warn");
  });
  function debugDump(obj){
    if(!debugOn) return;
    try{ $("#debugPre").textContent = JSON.stringify(obj, null, 2); }catch(e){ $("#debugPre").textContent = String(obj); }
  }

  // ---------------- modal ----------------
  var overlay = $("#overlay");
  $("#mClose").addEventListener("click", closeModal);
  overlay.addEventListener("click", function(e){ if(e.target === overlay) closeModal(); });
  function openModal(title, bodyHtml, buttons){
    $("#mTitle").textContent = title || "–û–∫–Ω–æ";
    $("#mBody").innerHTML = bodyHtml || "";
    var foot = $("#mFoot");
    foot.innerHTML = "";
    (buttons||[]).forEach(function(b){
      var btn = document.createElement("button");
      btn.className = "btn " + (b.kind||"");
      btn.textContent = b.label || "OK";
      btn.addEventListener("click", function(){
        if(b.onClick) b.onClick();
      });
      foot.appendChild(btn);
    });
    overlay.style.display = "grid";
    overlay.setAttribute("aria-hidden","false");
    document.body.style.overflow = "hidden";
  }
  function closeModal(){
    overlay.style.display = "none";
    overlay.setAttribute("aria-hidden","true");
    document.body.style.overflow = "";
  }

  // ---------------- API ----------------
  async function api(path, opts){
    opts = opts || {};
    opts.method = opts.method || "GET";
    opts.headers = opts.headers || {};
    if(opts.body && typeof opts.body === "object" && !(opts.body instanceof FormData)){
      opts.headers["Content-Type"] = "application/json";
      opts.body = JSON.stringify(opts.body);
    }
    if(!("credentials" in opts)) opts.credentials = "include";
    var r = await fetch(path, opts);
    var txt = await r.text();
    var json = null;
    try{ json = txt ? JSON.parse(txt) : null; }catch(e){ json = { _raw: txt }; }
    debugDump({ path:path, status:r.status, ok:r.ok, body: json });
    if(!r.ok){
      var err = (json && (json.error || json.message)) ? (json.error || json.message) : ("HTTP_" + r.status);
      throw new Error(err);
    }
    return json;
  }

  // ---------------- state ----------------
  var state = {
    me: null,
    categories: [],
    listings: [],
    listingsCursor: null,
    selectedListing: null,
    orders: [],
    rooms: [],
    activeRoom: null,
    es: null
  };

  function isAuthed(){ return !!state.me; }
  function setMe(u){
    state.me = u || null;
    $("#meChip").textContent = state.me ? ("@" + (state.me.nickname || state.me.email || "user")) : "–ì–æ—Å—Ç—å";
    $("#authBtn").textContent = state.me ? "–í—ã–π—Ç–∏" : "–í–æ–π—Ç–∏";
  }

  // ---------------- initial health ----------------
  (async function(){
    try{
      var h = await api("/api/health");
      $("#netStatus").textContent = "—Å–µ—Ä–≤–µ—Ä –æ–Ω–ª–∞–π–Ω";
      $("#netStatus").style.color = "";
      if(h && h.version){ $("#netStatus").textContent = "—Å–µ—Ä–≤–µ—Ä –æ–Ω–ª–∞–π–Ω ‚Ä¢ v" + h.version; }
    }catch(e){
      $("#netStatus").textContent = "—Å–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω";
      $("#netStatus").style.color = "var(--danger)";
      toast("–°–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç", "–ü—Ä–æ–≤–µ—Ä—å –ø–æ—Ä—Ç/–ø—Ä–æ–∫—Å–∏ –∏ —á—Ç–æ node server.js –∑–∞–ø—É—â–µ–Ω", "bad");
    }
    await refreshMe();
    await preload();
    render();
  })();

  async function refreshMe(){
    try{
      var me = await api("/api/me");
      setMe(me);
    }catch(e){
      setMe(null);
    }
  }

  async function preload(){
    await loadCategories();
    if(isAuthed()){
      await loadWallet();
      await loadOrders();
      await loadInbox();
    }else{
      setKpi("-", "-");
    }
    await loadListings(true);
  }

  // ---------------- data loaders ----------------
  async function loadCategories(){
    try{
      var cats = await api("/api/categories");
      state.categories = Array.isArray(cats) ? cats : (cats.items || []);
    }catch(e){
      state.categories = [];
    }
  }

  async function loadListings(reset){
    reset = !!reset;
    try{
      var q = $("#q").value || "";
      var path = "/api/listings?limit=60";
      if(!reset && state.listingsCursor){ path += "&cursor=" + encodeURIComponent(state.listingsCursor); }
      if(q){ path += "&q=" + encodeURIComponent(q); } // –µ—Å–ª–∏ –±—ç–∫ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç ‚Äî –ø—Ä–æ—Å—Ç–æ –∏–≥–Ω–æ—Ä
      var r = await api(path);
      var items = Array.isArray(r) ? r : (r.items || []);
      var next = r && r.nextCursor ? r.nextCursor : null;
      if(reset){
        state.listings = items;
      }else{
        state.listings = state.listings.concat(items);
      }
      state.listingsCursor = next;
      $("#badgeMarket").textContent = String(state.listings.length);
    }catch(e){
      toast("–ú–∞—Ä–∫–µ—Ç –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è", String(e.message||e), "bad");
    }
  }

  async function loadWallet(){
    try{
      var w = await api("/api/wallet");
      setKpi(w.available, w.hold);
      $("#badgeWallet").textContent = fmtRub(w.available||0) + "‚ÇΩ";
    }catch(e){
      setKpi("-", "-");
      $("#badgeWallet").textContent = "‚Äî";
    }
  }
  function setKpi(av, hold){
    $("#kpiAvail").innerHTML = esc(fmtRub(av)) + " <small>‚ÇΩ</small>";
    $("#kpiHold").innerHTML  = esc(fmtRub(hold)) + " <small>‚ÇΩ</small>";
  }

  async function loadOrders(){
    try{
      var arr = await api("/api/orders");
      state.orders = Array.isArray(arr) ? arr : [];
      $("#badgeDeals").textContent = String(state.orders.length);
    }catch(e){
      state.orders = [];
      $("#badgeDeals").textContent = "‚Äî";
    }
  }

  async function loadInbox(){
    try{
      var arr = await api("/api/chat/inbox");
      state.rooms = Array.isArray(arr) ? arr : [];
      $("#badgeChats").textContent = String(state.rooms.length);
    }catch(e){
      state.rooms = [];
      $("#badgeChats").textContent = "‚Äî";
    }
  }

  // ---------------- nav / view ----------------
  var currentView = "market";
  function setView(v){
    currentView = v;
    $all("#nav .item").forEach(function(el){
      el.classList.toggle("active", el.getAttribute("data-view") === v);
    });
    render();
  }
  $("#nav").addEventListener("click", function(e){
    var it = e.target.closest(".item");
    if(!it) return;
    var v = it.getAttribute("data-view");
    if(v) setView(v);
  });

  // search
  var qTimer = null;
  $("#q").addEventListener("input", function(){
    clearTimeout(qTimer);
    qTimer = setTimeout(async function(){
      await loadListings(true);
      render();
    }, 240);
  });

  // auth button
  $("#authBtn").addEventListener("click", function(){
    if(state.me){
      doLogout();
    }else{
      openAuth();
    }
  });

  async function doLogout(){
    try{ await api("/api/auth/logout", { method:"POST" }); }catch(e){}
    setMe(null);
    toast("–í—ã –≤—ã—à–ª–∏", "", "ok");
    await preload();
    render();
  }

  function openAuth(){
    var html = ''
      + '<div class="two">'
      + '  <div>'
      + '    <div class="field"><label>Email</label><input class="input" id="aEmail" placeholder="you@mail.com"/></div>'
      + '    <div style="height:10px"></div>'
      + '    <div class="field"><label>–ü–∞—Ä–æ–ª—å</label><input class="input" id="aPass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"/></div>'
      + '    <div class="hr"></div>'
      + '    <div class="hint">–í–∞–∂–Ω–æ: –Ω–∞ —ç—Ç–æ–º —Å–µ—Ä–≤–µ—Ä–µ –≤—Ö–æ–¥ –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å <b>–ø—Ä–∏–≤—è–∑–∫—É Telegram</b> –∏/–∏–ª–∏ <b>–∫–æ–¥ –∏–∑ Telegram</b> ‚Äî —è —ç—Ç–æ –æ–±—Ä–∞–±–æ—Ç–∞—é –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —à–∞–≥–∞—Ö.</div>'
      + '  </div>'
      + '  <div>'
      + '    <div class="field"><label>–ù–∏–∫–Ω–µ–π–º (–¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)</label><input class="input" id="aNick" placeholder="nickname"/></div>'
      + '    <div style="height:10px"></div>'
      + '    <div class="hint">–ï—Å–ª–∏ —Ç—ã —É–∂–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª—Å—è ‚Äî –ø—Ä–æ—Å—Ç–æ –≤—Ö–æ–¥–∏.</div>'
      + '  </div>'
      + '</div>';
    openModal("–í—Ö–æ–¥ / –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è", html, [
      { label:"–û—Ç–º–µ–Ω–∞", kind:"ghost", onClick: closeModal },
      { label:"–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è", kind:"", onClick: doRegisterFromModal },
      { label:"–í–æ–π—Ç–∏", kind:"primary", onClick: doLoginFromModal }
    ]);
    setTimeout(function(){ $("#aEmail").focus(); }, 40);
  }

  async function doRegisterFromModal(){
    var email = ($("#aEmail").value||"").trim();
    var pass  = ($("#aPass").value||"").trim();
    var nick  = ($("#aNick").value||"").trim();
    if(!email || !pass || !nick){ toast("–ó–∞–ø–æ–ª–Ω–∏ email/–ø–∞—Ä–æ–ª—å/–Ω–∏–∫", "", "warn"); return; }
    try{
      var r = await api("/api/auth/register", { method:"POST", body:{ email:email, password:pass, nickname:nick } });
      closeModal();
      toast("–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞", "–¢—ã –≤–æ—à—ë–ª –≤ –∞–∫–∫–∞—É–Ω—Ç", "ok");
      await refreshMe();
      await preload();
      render();
    }catch(e){
      toast("–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å", String(e.message||e), "bad");
    }
  }

  async function doLoginFromModal(){
    var email = ($("#aEmail").value||"").trim();
    var pass  = ($("#aPass").value||"").trim();
    if(!email || !pass){ toast("–ó–∞–ø–æ–ª–Ω–∏ email –∏ –ø–∞—Ä–æ–ª—å", "", "warn"); return; }
    try{
      var r = await api("/api/auth/login", { method:"POST", body:{ email:email, password:pass } });

      // 1) —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∏–≤—è–∑–∫–∞ TG
      if(r && r.requireTgLink){
        openTgLinkStep(r.tgBot, r.linkCode, email, pass);
        return;
      }
      // 2) —Ç—Ä–µ–±—É–µ—Ç—Å—è –∫–æ–¥ –∏–∑ TG (challengeId)
      if(r && r.requiresTgCode){
        openTgCodeStep(r.challengeId, email, pass);
        return;
      }

      closeModal();
      toast("–í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω", "", "ok");
      await refreshMe();
      await preload();
      render();
    }catch(e){
      toast("–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ–π—Ç–∏", String(e.message||e), "bad");
    }
  }

  function openTgLinkStep(bot, code, email, pass){
    var b = bot || "@onlymarket_marketplace_bot";
    var body = ''
      + '<div class="field"><label>–®–∞–≥ 1: –ø—Ä–∏–≤—è–∂–∏ Telegram</label>'
      + '<div class="hint">–û—Ç–∫—Ä–æ–π –±–æ—Ç–∞ <b>'+esc(b)+'</b> –∏ –æ—Ç–ø—Ä–∞–≤—å –µ–º—É –∫–æ–¥:</div>'
      + '<div style="margin-top:10px" class="chip mono">CODE: '+esc(code)+'</div>'
      + '<div class="hint" style="margin-top:10px">–ü–æ—Å–ª–µ –ø—Ä–∏–≤—è–∑–∫–∏ –Ω–∞–∂–º–∏ ¬´–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å¬ª ‚Äî —è –ø–æ–≤—Ç–æ—Ä—é –≤—Ö–æ–¥.</div>'
      + '</div>';
    openModal("–¢—Ä–µ–±—É–µ—Ç—Å—è Telegram", body, [
      { label:"–ù–∞–∑–∞–¥", kind:"ghost", onClick: openAuth },
      { label:"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å (—è –ø—Ä–∏–≤—è–∑–∞–ª)", kind:"primary", onClick: async function(){
          // –ø—Ä–æ—Å—Ç–æ –ø–æ–≤—Ç–æ—Ä—è–µ–º –ª–æ–≥–∏–Ω ‚Äî –µ—Å–ª–∏ TG –ø—Ä–∏–≤—è–∑–∞–Ω, —Å–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—ë—Ç —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥
          try{
            var r = await api("/api/auth/login", { method:"POST", body:{ email:email, password:pass } });
            if(r && r.requiresTgCode){
              openTgCodeStep(r.challengeId, email, pass);
              return;
            }
            if(r && r.requireTgLink){
              toast("–ü–æ—Ö–æ–∂–µ, –µ—â—ë –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω–æ", "–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Ç—ã –æ—Ç–ø—Ä–∞–≤–∏–ª –∫–æ–¥ –±–æ—Ç—É –∏ –æ–Ω –æ—Ç–≤–µ—Ç–∏–ª", "warn");
              return;
            }
            closeModal();
            toast("–í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω", "", "ok");
            await refreshMe();
            await preload();
            render();
          }catch(e){
            toast("–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ–π—Ç–∏", String(e.message||e), "bad");
          }
      }}
    ]);
  }

  function openTgCodeStep(challengeId, email, pass){
    var body = ''
      + '<div class="field"><label>–®–∞–≥ 2: –∫–æ–¥ –∏–∑ Telegram</label>'
      + '<div class="hint">–°–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–∏–ª –∫–æ–¥ –≤—Ö–æ–¥–∞ –≤ Telegram. –í–≤–µ–¥–∏ –µ–≥–æ —Å—é–¥–∞.</div>'
      + '<div style="height:10px"></div>'
      + '<input class="input mono" id="tgCode" placeholder="123456" />'
      + '<div class="hint" style="margin-top:10px">challengeId: <span class="mono">'+esc(challengeId)+'</span></div>'
      + '</div>';
    openModal("–ö–æ–¥ –≤—Ö–æ–¥–∞", body, [
      { label:"–û—Ç–º–µ–Ω–∞", kind:"ghost", onClick: closeModal },
      { label:"–ü—Ä–æ–≤–µ—Ä–∏—Ç—å", kind:"primary", onClick: async function(){
          var code = ($("#tgCode").value||"").trim();
          if(!code){ toast("–í–≤–µ–¥–∏ –∫–æ–¥", "", "warn"); return; }
          try{
            await api("/api/auth/tg-verify", { method:"POST", body:{ challengeId:challengeId, code:code } });
            closeModal();
            toast("–í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω", "", "ok");
            await refreshMe();
            await preload();
            render();
          }catch(e){
            toast("–ö–æ–¥ –Ω–µ–≤–µ—Ä–Ω—ã–π", String(e.message||e), "bad");
          }
      }}
    ]);
    setTimeout(function(){ $("#tgCode").focus(); }, 40);
  }

  // ---------------- render ----------------
  function render(){
    if(currentView === "market") renderMarket();
    else if(currentView === "sell") renderSell();
    else if(currentView === "deals") renderDeals();
    else if(currentView === "chat") renderChat();
    else if(currentView === "wallet") renderWallet();
    else if(currentView === "profile") renderProfile();
  }

  function viewCard(title, rightHtml, bodyHtml){
    rightHtml = rightHtml || "";
    bodyHtml = bodyHtml || "";
    return ''
      + '<div class="card">'
      + ' <div class="hd"><h2>'+esc(title)+'</h2><div class="row2">'+rightHtml+'</div></div>'
      + ' <div class="bd">'+bodyHtml+'</div>'
      + '</div>';
  }

  function renderMarket(){
    var right = ''
      + '<span class="chip">VIP —Å–≤–µ—Ä—Ö—É</span>'
      + '<button class="btn" id="reloadMarket">–û–±–Ω–æ–≤–∏—Ç—å</button>';
    var body = '';
    if(!state.listings.length){
      body += '<div class="hint">–ü–æ–∫–∞ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ ‚Äî –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–µ –≤–µ—Ä–Ω—É–ª items.</div>';
    }else{
      body += '<div class="list">';
      state.listings.forEach(function(l){
        var img = l.image ? '<img src="'+esc(l.image)+'" alt=""/>' : '';
        var vip = l.isVip ? '<div class="vip">VIP</div>' : '';
        var cat = catName(l.categoryId);
        body += ''
          + '<div class="tile" data-id="'+esc(l.id)+'">'
          +   '<div class="img">'+vip+ (img || '<div class="hint">–±–µ–∑ —Ñ–æ—Ç–æ</div>') +'</div>'
          +   '<div class="ct">'
          +     '<div class="title">'+esc(l.title||"")+'</div>'
          +     '<div class="desc">'+esc(l.description||"")+'</div>'
          +     '<div class="meta">'
          +       '<div class="chip">'+esc(cat||"–∫–∞—Ç–µ–≥–æ—Ä–∏—è")+'</div>'
          +       '<div class="price">'+esc(fmtRub(l.price))+' ‚ÇΩ</div>'
          +     '</div>'
          +   '</div>'
          + '</div>';
      });
      body += '</div>';
      if(state.listingsCursor){
        body += '<div style="margin-top:12px; display:flex; justify-content:center;"><button class="btn" id="moreMarket">–ü–æ–∫–∞–∑–∞—Ç—å –µ—â—ë</button></div>';
      }
    }
    $("#view").innerHTML = viewCard("–ú–∞—Ä–∫–µ—Ç", right, body);
    $("#reloadMarket").addEventListener("click", async function(){
      await loadListings(true);
      render();
    });
    var more = $("#moreMarket");
    if(more){
      more.addEventListener("click", async function(){
        await loadListings(false);
        render();
      });
    }
    $all(".tile").forEach(function(t){
      t.addEventListener("click", function(){
        var id = t.getAttribute("data-id");
        openListing(id);
      });
    });
  }

  function catName(id){
    if(!id) return "";
    for(var i=0;i<state.categories.length;i++){
      if(String(state.categories[i].id) === String(id)) return state.categories[i].title || state.categories[i].name || state.categories[i].id;
    }
    return String(id);
  }

  async function openListing(id){
    try{
      var l = await api("/api/listings/" + encodeURIComponent(id));
      state.selectedListing = l;
    }catch(e){
      toast("–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–∫—Ä—ã—Ç—å —Ç–æ–≤–∞—Ä", String(e.message||e), "bad");
      return;
    }
    var l = state.selectedListing;
    var img = l.image ? '<img src="'+esc(l.image)+'" alt="" style="width:100%; border-radius:16px; border:1px solid var(--stroke);"/>' : '';
    var info = ''
      + '<div class="two">'
      + ' <div>'
      +   (img || '<div class="hint">–§–æ—Ç–æ –Ω–µ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–æ</div>')
      + ' </div>'
      + ' <div>'
      + '   <div class="chip">'+esc(catName(l.categoryId))+'</div>'
      + '   <div style="height:10px"></div>'
      + '   <div style="font-weight:900; font-size:20px; line-height:1.2">'+esc(l.title||"")+'</div>'
      + '   <div style="height:10px"></div>'
      + '   <div class="hint">'+esc(l.description||"")+'</div>'
      + '   <div class="hr"></div>'
      + '   <div class="row2">'
      + '     <div class="chip">–¶–µ–Ω–∞: <b>'+esc(fmtRub(l.price))+' ‚ÇΩ</b></div>'
      + '     <div class="chip">–¢–∏–ø: <b>'+esc(l.type||"single")+'</b></div>'
      + (l.type === "stock" ? ('<div class="chip">–û—Å—Ç–∞—Ç–æ–∫: <b>'+esc(l.stock)+'</b></div>') : '')
      + '   </div>'
      + '   <div style="height:12px"></div>'
      + '   <div class="hint">–ü–æ–∫—É–ø–∫–∞ —Å–æ–∑–¥–∞—ë—Ç —Å–¥–µ–ª–∫—É (order) –∏ —á–∞—Ç –ø–æ —Å–¥–µ–ª–∫–µ.</div>'
      + ' </div>'
      + '</div>';
    openModal("–¢–æ–≤–∞—Ä", info, [
      { label:"–ó–∞–∫—Ä—ã—Ç—å", kind:"ghost", onClick: closeModal },
      { label:"–ö—É–ø–∏—Ç—å", kind:"primary", onClick: function(){ buyListing(l.id); } }
    ]);
  }

  async function buyListing(listingId){
    if(!isAuthed()){
      toast("–ù—É–∂–Ω–æ –≤–æ–π—Ç–∏", "–°–Ω–∞—á–∞–ª–∞ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Å—è", "warn");
      return;
    }
    try{
      var o = await api("/api/orders", { method:"POST", body:{ listingId: listingId } });
      closeModal();
      toast("–°–¥–µ–ª–∫–∞ —Å–æ–∑–¥–∞–Ω–∞", "Order " + o.id, "ok");
      await loadOrders();
      await loadInbox();
      setView("deals");
    }catch(e){
      toast("–ü–æ–∫—É–ø–∫–∞ –Ω–µ —É–¥–∞–ª–∞—Å—å", String(e.message||e), "bad");
    }
  }

  // ---------------- sell ----------------
  function renderSell(){
    var right = '<span class="chip">–§–æ—Ç–æ ‚â§ 50 KB</span>';
    if(!isAuthed()){
      $("#view").innerHTML = viewCard("–ü—Ä–æ–¥–∞—Ç—å", right, '<div class="hint">–ù—É–∂–Ω–æ –≤–æ–π—Ç–∏, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–æ–≤–∞—Ä—ã.</div>');
      return;
    }
    var opts = '<option value="">–í—ã–±–µ—Ä–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>';
    state.categories.forEach(function(c){
      opts += '<option value="'+esc(c.id)+'">'+esc(c.title||c.name||c.id)+'</option>';
    });
    var body = ''
      + '<div class="two">'
      + ' <div>'
      + '   <div class="field"><label>–ù–∞–∑–≤–∞–Ω–∏–µ</label><input class="input" id="sTitle" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Netflix Premium 1 –º–µ—Å—è—Ü"/></div>'
      + '   <div style="height:10px"></div>'
      + '   <div class="field"><label>–û–ø–∏—Å–∞–Ω–∏–µ</label><textarea class="textarea" id="sDesc" placeholder="–ß—Ç–æ –ø–æ–∫—É–ø–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∏—Ç, —Å—Ä–æ–∫–∏, –Ω—é–∞–Ω—Å—ã‚Ä¶"></textarea></div>'
      + '   <div style="height:10px"></div>'
      + '   <div class="row2">'
      + '     <div class="field" style="flex:1"><label>–¶–µ–Ω–∞ (‚ÇΩ)</label><input class="input" id="sPrice" inputmode="decimal" placeholder="199"/></div>'
      + '     <div class="field" style="flex:1"><label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label><select class="select" id="sCat">'+opts+'</select></div>'
      + '   </div>'
      + '   <div style="height:10px"></div>'
      + '   <div class="row2">'
      + '     <div class="field" style="flex:1"><label>–¢–∏–ø</label>'
      + '       <select class="select" id="sType">'
      + '         <option value="single">Single (1 —Ä–∞–∑)</option>'
      + '         <option value="stock">Stock (–æ—Å—Ç–∞—Ç–æ–∫)</option>'
      + '         <option value="multi">Multi</option>'
      + '       </select>'
      + '     </div>'
      + '     <div class="field" style="flex:1"><label>–û—Å—Ç–∞—Ç–æ–∫ (–¥–ª—è Stock)</label><input class="input" id="sStock" inputmode="numeric" placeholder="10"/></div>'
      + '   </div>'
      + '   <div style="height:10px"></div>'
      + '   <div class="row2">'
      + '     <div class="field" style="flex:1"><label>–î–æ—Å—Ç–∞–≤–∫–∞</label>'
      + '       <select class="select" id="sDelivery">'
      + '         <option value="manual">Manual (—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ)</option>'
      + '         <option value="auto">Auto (–º–æ–¥–µ—Ä–∞—Ü–∏—è + –∞–≤—Ç–æ-–ø–µ–π–ª–æ–∞–¥)</option>'
      + '       </select>'
      + '     </div>'
      + '   </div>'
      + '   <div style="height:10px"></div>'
      + '   <div class="field"><label>Auto payload (–µ—Å–ª–∏ delivery=auto)</label><textarea class="textarea" id="sPayload" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –∫–ª—é—á, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è, —Å—Å—ã–ª–∫–∞‚Ä¶"></textarea></div>'
      + ' </div>'
      + ' <div>'
      + '   <div class="field"><label>–§–æ—Ç–æ —Ç–æ–≤–∞—Ä–∞</label>'
      + '     <input class="input" type="file" id="sFile" accept="image/*"/>'
      + '     <div class="hint" style="margin-top:10px">–§–æ—Ç–æ –±—É–¥–µ—Ç —Å–∂–∞—Ç–æ –¥–æ –ª–∏–º–∏—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞. –ï—Å–ª–∏ –Ω–µ –≤—ã—Ö–æ–¥–∏—Ç ‚Äî –ø–æ–ø—Ä–æ–±—É–π –¥—Ä—É–≥–æ–µ —Ñ–æ—Ç–æ –∏–ª–∏ —É–º–µ–Ω—å—à–∏—Ç—å –¥–µ—Ç–∞–ª–∏.</div>'
      + '     <div style="height:10px"></div>'
      + '     <div id="sPreview" class="card" style="padding:10px; border-radius:16px; background:var(--card2); border:1px solid var(--stroke)"><div class="hint">–ø—Ä–µ–≤—å—é –ø–æ—è–≤–∏—Ç—Å—è —Ç—É—Ç</div></div>'
      + '   </div>'
      + '   <div class="hr"></div>'
      + '   <button class="btn primary" id="sCreate" style="width:100%">–°–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä</button>'
      + ' </div>'
      + '</div>';
    $("#view").innerHTML = viewCard("–ü—Ä–æ–¥–∞—Ç—å", right, body);

    var dataUrl = null;
    $("#sFile").addEventListener("change", async function(){
      var f = $("#sFile").files && $("#sFile").files[0];
      if(!f){ dataUrl = null; $("#sPreview").innerHTML = '<div class="hint">–ø—Ä–µ–≤—å—é –ø–æ—è–≤–∏—Ç—Å—è —Ç—É—Ç</div>'; return; }
      try{
        dataUrl = await compressToDataUrl(f, 50*1024);
        $("#sPreview").innerHTML = '<img src="'+esc(dataUrl)+'" style="width:100%; border-radius:12px; border:1px solid var(--stroke)"/><div class="small" style="margin-top:8px">–†–∞–∑–º–µ—Ä: '+Math.round(dataUrl.length/1024)+' KB (dataUrl)</div>';
      }catch(e){
        dataUrl = null;
        $("#sPreview").innerHTML = '<div class="hint">–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∂–∞—Ç—å —Ñ–æ—Ç–æ –ø–æ–¥ –ª–∏–º–∏—Ç.</div>';
        toast("–§–æ—Ç–æ —Å–ª–∏—à–∫–æ–º —Ç—è–∂—ë–ª–æ–µ", "–í—ã–±–µ—Ä–∏ –¥—Ä—É–≥–æ–µ –∏–ª–∏ —É–º–µ–Ω—å—à–∞–π –∫–∞—á–µ—Å—Ç–≤–æ/—Ä–∞–∑–º–µ—Ä", "bad");
      }
    });

    $("#sCreate").addEventListener("click", async function(){
      var title = ($("#sTitle").value||"").trim();
      var description = ($("#sDesc").value||"").trim();
      var price = Number($("#sPrice").value||0);
      var categoryId = ($("#sCat").value||"").trim();
      var type = ($("#sType").value||"single").trim();
      var stock = Number($("#sStock").value||0);
      var delivery = ($("#sDelivery").value||"manual").trim();
      var autoPayload = ($("#sPayload").value||"").trim();

      if(!title || !description || !categoryId || !price || price<=0){
        toast("–ü—Ä–æ–≤–µ—Ä—å –ø–æ–ª—è", "–ù–∞–∑–≤–∞–Ω–∏–µ/–æ–ø–∏—Å–∞–Ω–∏–µ/—Ü–µ–Ω–∞/–∫–∞—Ç–µ–≥–æ—Ä–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã", "warn");
        return;
      }
      try{
        var payload = { title:title, description:description, price:price, categoryId:categoryId, type:type, stock:stock, delivery:delivery, autoPayload:autoPayload, image: dataUrl };
        var l = await api("/api/listings", { method:"POST", body: payload });
        toast("–¢–æ–≤–∞—Ä —Å–æ–∑–¥–∞–Ω", l.id, "ok");
        await loadListings(true);
        setView("market");
      }catch(e){
        toast("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä", String(e.message||e), "bad");
      }
    });
  }

  async function compressToDataUrl(file, maxBytes){
    maxBytes = maxBytes || 50000;
    var img = await fileToImage(file);
    var canvas = document.createElement("canvas");
    var ctx = canvas.getContext("2d");
    var maxSide = 820;
    var w = img.width, h = img.height;
    var s = Math.min(1, maxSide / Math.max(w,h));
    w = Math.max(1, Math.round(w*s));
    h = Math.max(1, Math.round(h*s));
    canvas.width = w; canvas.height = h;
    ctx.drawImage(img, 0, 0, w, h);

    // try jpeg qualities
    var q = 0.78;
    var dataUrl = canvas.toDataURL("image/jpeg", q);
    var tries = 0;
    while(dataUrl.length > maxBytes*1.37 && tries < 10){
      q = q - 0.08;
      if(q < 0.25) break;
      dataUrl = canvas.toDataURL("image/jpeg", q);
      tries++;
    }
    // if still too big, downscale a bit
    while(dataUrl.length > maxBytes*1.37 && tries < 18){
      w = Math.max(1, Math.round(w*0.88));
      h = Math.max(1, Math.round(h*0.88));
      canvas.width = w; canvas.height = h;
      ctx.drawImage(img, 0, 0, w, h);
      dataUrl = canvas.toDataURL("image/jpeg", Math.max(0.28, q));
      tries++;
    }
    if(dataUrl.length > maxBytes*1.37) throw new Error("TOO_BIG");
    return dataUrl;
  }
  function fileToImage(file){
    return new Promise(function(resolve, reject){
      var fr = new FileReader();
      fr.onerror = function(){ reject(new Error("READ_FAIL")); };
      fr.onload = function(){
        var img = new Image();
        img.onload = function(){ resolve(img); };
        img.onerror = function(){ reject(new Error("IMG_FAIL")); };
        img.src = String(fr.result||"");
      };
      fr.readAsDataURL(file);
    });
  }

  // ---------------- deals ----------------
  function renderDeals(){
    if(!isAuthed()){
      $("#view").innerHTML = viewCard("–°–¥–µ–ª–∫–∏", "", '<div class="hint">–ù—É–∂–Ω–æ –≤–æ–π—Ç–∏, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å–¥–µ–ª–∫–∏.</div>');
      return;
    }
    var right = '<button class="btn" id="reloadDeals">–û–±–Ω–æ–≤–∏—Ç—å</button>';
    var body = '';
    if(!state.orders.length){
      body += '<div class="hint">–°–¥–µ–ª–æ–∫ –ø–æ–∫–∞ –Ω–µ—Ç. –ö—É–ø–∏ —Ç–æ–≤–∞—Ä ‚Äî –ø–æ—è–≤–∏—Ç—Å—è order –∏ —á–∞—Ç –ø–æ —Å–¥–µ–ª–∫–µ.</div>';
    }else{
      body += '<div style="display:flex; flex-direction:column; gap:10px;">';
      state.orders.forEach(function(o){
        var st = o.status || "pending";
        var chip = '<span class="chip">#'+esc(o.id)+'</span> <span class="chip">—Å—Ç–∞—Ç—É—Å: <b>'+esc(st)+'</b></span> <span class="chip">—Ü–µ–Ω–∞: <b>'+esc(fmtRub(o.price))+' ‚ÇΩ</b></span>';
        body += '<div class="card" style="box-shadow:none; background:var(--card2); border-radius:16px;">'
          + '<div class="bd">'
          + '<div class="row2" style="justify-content:space-between">'
          + '<div style="display:flex; gap:8px; flex-wrap:wrap">'+chip+'</div>'
          + '<div style="display:flex; gap:8px; flex-wrap:wrap">'
          + '  <button class="btn" data-act="openChat" data-id="'+esc(o.id)+'">–ß–∞—Ç</button>'
          + '  <button class="btn primary" data-act="pay" data-id="'+esc(o.id)+'">–û–ø–ª–∞—Ç–∏—Ç—å</button>'
          + '</div>'
          + '</div>'
          + '<div class="small" style="margin-top:10px">listingId: <span class="mono">'+esc(o.listingId)+'</span> ‚Ä¢ '+new Date(o.createdAt||0).toLocaleString("ru-RU")+'</div>'
          + '</div></div>';
      });
      body += '</div>';
    }
    $("#view").innerHTML = viewCard("–°–¥–µ–ª–∫–∏", right, body);
    $("#reloadDeals").addEventListener("click", async function(){
      await loadOrders();
      await loadInbox();
      render();
    });
    $all("button[data-act]").forEach(function(btn){
      btn.addEventListener("click", function(){
        var act = btn.getAttribute("data-act");
        var id  = btn.getAttribute("data-id");
        if(act === "openChat"){
          openOrderChat(id);
        }else if(act === "pay"){
          payOrder(id);
        }
      });
    });
  }

  async function payOrder(orderId){
    try{
      await api("/api/orders/" + encodeURIComponent(orderId) + "/pay", { method:"POST" });
      toast("–û–ø–ª–∞—Ç–∞ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–∞", "Order " + orderId, "ok");
      await loadOrders();
      await loadWallet();
      render();
    }catch(e){
      toast("–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø–ª–∞—Ç–∏—Ç—å", String(e.message||e), "bad");
    }
  }

  function openOrderChat(orderId){
    setView("chat");
    // Ensure room exists in list; we can add pseudo-room
    var roomKey = "order:" + orderId;
    if(!state.rooms.some(function(r){ return r.room === roomKey; })){
      state.rooms.unshift({ room: roomKey, lastText: "–°–∏—Å—Ç–µ–º–Ω–æ–µ: —á–∞—Ç —Å–¥–µ–ª–∫–∏", ts: Date.now(), lastFrom: "" });
      $("#badgeChats").textContent = String(state.rooms.length);
    }
    state.activeRoom = roomKey;
    renderChat();
    connectRoom(roomKey);
  }

  // ---------------- chat ----------------
  function renderChat(){
    if(!isAuthed()){
      $("#view").innerHTML = viewCard("–ß–∞—Ç—ã", "", '<div class="hint">–ù—É–∂–Ω–æ –≤–æ–π—Ç–∏, —á—Ç–æ–±—ã —á–∞—Ç—ã —Ä–∞–±–æ—Ç–∞–ª–∏ (–≤ —ç—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–µ —á–∞—Ç ‚Äî —á–µ—Ä–µ–∑ SSE /api/chat/stream).</div>');
      return;
    }
    var right = '<button class="btn" id="reloadChat">–û–±–Ω–æ–≤–∏—Ç—å</button>';
    var body = ''
      + '<div class="chat">'
      + ' <div class="rooms" id="rooms"></div>'
      + ' <div class="msgs">'
      + '   <div class="head"><div><b id="chatTitle">–í—ã–±–µ—Ä–∏ —á–∞—Ç</b><div class="small" id="chatSub">inbox</div></div><div class="row2"><button class="btn" id="closeStream">–û—Ç–∫–ª—é—á–∏—Ç—å</button></div></div>'
      + '   <div class="body" id="chatBody"><div class="hint">–°–ª–µ–≤–∞ —Å–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤. –ò—Å—Ç–æ—Ä–∏—è –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ SSE.</div></div>'
      + '   <div class="composer">'
      + '     <textarea class="textarea" id="chatText" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ‚Ä¶"></textarea>'
      + '     <button class="btn primary" id="sendMsg">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>'
      + '   </div>'
      + ' </div>'
      + '</div>';
    $("#view").innerHTML = viewCard("–ß–∞—Ç—ã", right, body);

    $("#reloadChat").addEventListener("click", async function(){
      await loadInbox();
      renderChat();
    });
    $("#closeStream").addEventListener("click", function(){ disconnectRoom(); toast("SSE –æ—Ç–∫–ª—é—á—ë–Ω", "", "warn"); });

    renderRooms();
    $("#sendMsg").addEventListener("click", sendCurrentMessage);
    $("#chatText").addEventListener("keydown", function(e){
      if(e.key === "Enter" && (e.ctrlKey || e.metaKey)){
        sendCurrentMessage();
      }
    });

    if(state.activeRoom){
      connectRoom(state.activeRoom);
    }
  }

  function renderRooms(){
    var box = $("#rooms");
    if(!box) return;
    var html = "";
    if(!state.rooms.length){
      html = '<div style="padding:12px"><div class="hint">–ü–æ–∫–∞ –ø—É—Å—Ç–æ. –ì–ª–æ–±–∞–ª—å–Ω—ã–π —á–∞—Ç –ø–æ—è–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è. –ß–∞—Ç—ã —Å–¥–µ–ª–æ–∫ –ø–æ—è–≤—è—Ç—Å—è –ø–æ—Å–ª–µ –ø–æ–∫—É–ø–æ–∫.</div></div>';
    }else{
      state.rooms.forEach(function(r){
        var active = (state.activeRoom === r.room) ? " active" : "";
        html += ''
          + '<div class="roomItem'+active+'" data-room="'+esc(r.room)+'">'
          + '  <div class="top"><div class="name">'+esc(roomTitle(r.room))+'</div><div class="time">'+esc(timeAgo(r.ts))+'</div></div>'
          + '  <div class="last">'+esc(r.lastText || "")+'</div>'
          + '</div>';
      });
    }
    box.innerHTML = html;
    $all(".roomItem", box).forEach(function(el){
      el.addEventListener("click", function(){
        var room = el.getAttribute("data-room");
        state.activeRoom = room;
        renderRooms();
        connectRoom(room);
      });
    });
  }

  function roomTitle(room){
    room = String(room||"");
    if(room === "global") return "üåç Global";
    if(room.indexOf("support:") === 0) return "üõü Support";
    if(room.indexOf("order:") === 0) return "ü§ù Deal " + room.slice(6);
    if(room.indexOf("dm:") === 0) return "‚úâÔ∏è DM";
    if(room.indexOf("user:") === 0) return "üîî Inbox";
    return room;
  }

  function disconnectRoom(){
    try{ if(state.es){ state.es.close(); } }catch(e){}
    state.es = null;
  }

  function connectRoom(room){
    if(!room) return;
    disconnectRoom();
    var params = mapRoomToStream(room);
    if(!params){
      $("#chatTitle").textContent = roomTitle(room);
      $("#chatSub").textContent = "unsupported room";
      $("#chatBody").innerHTML = '<div class="hint">–≠—Ç–æ—Ç —Ç–∏–ø –∫–æ–º–Ω–∞—Ç—ã –Ω–µ —Å—Ç—Ä–∏–º–∏—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.</div>';
      return;
    }
    $("#chatTitle").textContent = roomTitle(room);
    $("#chatSub").textContent = "SSE: " + params.url;

    $("#chatBody").innerHTML = '<div class="hint">–ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏‚Ä¶</div>';

    var es = new EventSource(params.url, { withCredentials: true });
    state.es = es;

    var items = [];
    function renderMessages(){
      var body = $("#chatBody");
      if(!body) return;
      var h = "";
      items.forEach(function(m){
        var isMe = state.me && (String(m.fromUserId) === String(state.me.id));
        var meta = '<div class="meta"><span>'+esc(m.fromNickname || m.from || m.fromUserId || "system")+'</span><span>'+esc(new Date(m.ts||0).toLocaleString("ru-RU"))+'</span></div>';
        var content = '';
        if(m.kind === "image" && m.url){
          content = '<img src="'+esc(m.url)+'" alt="image"/>';
        }else{
          content = '<div class="text">'+esc(m.text||"")+'</div>';
        }
        h += '<div class="bubble'+(isMe?' me':'')+'">'+meta+content+'</div>';
      });
      body.innerHTML = h || '<div class="hint">–ü–æ–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ—Ç.</div>';
      body.scrollTop = body.scrollHeight;
    }

    es.onmessage = function(ev){
      try{
        var j = JSON.parse(ev.data);
        if(j.type === "history" && Array.isArray(j.items)){
          items = j.items.slice();
          renderMessages();
        }else if(j.type === "message" && j.item){
          items.push(j.item);
          if(items.length > 80) items = items.slice(-80);
          renderMessages();
          // refresh inbox preview
          loadInbox().then(function(){ renderRooms(); });
        }
      }catch(e){
        // ignore
      }
    };
    es.onerror = function(){
      toast("–ß–∞—Ç: —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É–ø–∞–ª–æ", "–ü—Ä–æ–≤–µ—Ä—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –∏–ª–∏ –ø—Ä–æ–∫—Å–∏", "warn");
      try{ es.close(); }catch(e){}
      state.es = null;
    };
  }

  function mapRoomToStream(room){
    room = String(room||"");
    if(room === "global") return { url: "/api/chat/stream?type=global" };
    if(room.indexOf("support:") === 0) return { url: "/api/chat/stream?type=support" };
    if(room.indexOf("order:") === 0) return { url: "/api/chat/stream?type=order&orderId=" + encodeURIComponent(room.slice(6)) };
    if(room.indexOf("dm:") === 0){
      // dm:<a>:<b> ‚Äî –Ω—É–∂–µ–Ω peerId (–≤—Ç–æ—Ä–æ–π —É—á–∞—Å—Ç–Ω–∏–∫)
      var parts = room.split(":");
      if(parts.length >= 3 && state.me){
        var a = parts[1], b = parts[2];
        var peer = (String(a) === String(state.me.id)) ? b : a;
        return { url: "/api/chat/stream?type=dm&peerId=" + encodeURIComponent(peer), peerId: peer };
      }
    }
    return null;
  }

  async function sendCurrentMessage(){
    var room = state.activeRoom;
    if(!room){ toast("–í—ã–±–µ—Ä–∏ —á–∞—Ç", "", "warn"); return; }
    var txt = ($("#chatText").value||"").trim();
    if(!txt){ toast("–ü—É—Å—Ç–æ", "–ù–∞–ø–∏—à–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ", "warn"); return; }
    var stream = mapRoomToStream(room);
    if(!stream){ toast("–ù–µ–ª—å–∑—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å", "–≠—Ç–æ—Ç —á–∞—Ç –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è", "bad"); return; }

    var body = { text: txt };
    if(room === "global") body.type = "global";
    else if(room.indexOf("support:")===0) body.type = "support";
    else if(room.indexOf("order:")===0){ body.type="order"; body.orderId = room.slice(6); }
    else if(room.indexOf("dm:")===0){ body.type="dm"; body.peerId = stream.peerId; }

    try{
      await api("/api/chat/send", { method:"POST", body: body });
      $("#chatText").value = "";
    }catch(e){
      toast("–ù–µ –æ—Ç–ø—Ä–∞–≤–∏–ª–æ—Å—å", String(e.message||e), "bad");
    }
  }

  // ---------------- wallet ----------------
  function renderWallet(){
    if(!isAuthed()){
      $("#view").innerHTML = viewCard("–ö–æ—à–µ–ª—ë–∫", "", '<div class="hint">–ù—É–∂–Ω–æ –≤–æ–π—Ç–∏, —á—Ç–æ–±—ã –ø–æ–ø–æ–ª–Ω—è—Ç—å –∏ –≤–∏–¥–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é.</div>');
      return;
    }
    var right = '<button class="btn" id="reloadWallet">–û–±–Ω–æ–≤–∏—Ç—å</button>';
    var body = ''
      + '<div class="two">'
      + ' <div>'
      + '   <div class="chip">–î–æ—Å—Ç—É–ø–Ω–æ: <b>'+esc($("#kpiAvail").textContent.replace("‚ÇΩ","").trim())+' ‚ÇΩ</b></div>'
      + '   <div style="height:10px"></div>'
      + '   <div class="field"><label>–°—É–º–º–∞ (‚ÇΩ)</label><input class="input" id="wAmt" inputmode="decimal" placeholder="500"/></div>'
      + '   <div style="height:10px"></div>'
      + '   <div class="field"><label>–°–ø–æ—Å–æ–±</label>'
      + '     <select class="select" id="wMethod">'
      + '       <option value="paradise_sbp">Paradise ‚Ä¢ –°–ë–ü</option>'
      + '       <option value="rukassa">RuKassa</option>'
      + '       <option value="cryptobot">CryptoBot</option>'
      + '       <option value="stripe">Stripe</option>'
      + '     </select>'
      + '   </div>'
      + '   <div class="hr"></div>'
      + '   <button class="btn primary" id="wPay">–ü–æ–ø–æ–ª–Ω–∏—Ç—å</button>'
      + '   <div class="hint" style="margin-top:10px">Paradise –Ω–∞ —ç—Ç–æ–º —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç <span class="mono">{amountRub, paymentMethod}</span>. –û—Å—Ç–∞–ª—å–Ω—ã–µ ‚Äî —Å–≤–æ–∏ –ø–æ–ª—è. –Ø —É–∂–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é –ø—Ä–∞–≤–∏–ª—å–Ω–æ.</div>'
      + ' </div>'
      + ' <div>'
      + '   <div class="field"><label>–ò—Å—Ç–æ—Ä–∏—è</label><div id="wHist" class="hint">–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶</div></div>'
      + ' </div>'
      + '</div>';
    $("#view").innerHTML = viewCard("–ö–æ—à–µ–ª—ë–∫", right, body);

    $("#reloadWallet").addEventListener("click", async function(){
      await loadWallet();
      await renderWalletHistory();
    });
    $("#wPay").addEventListener("click", startTopup);
    renderWalletHistory();
  }

  async function renderWalletHistory(){
    try{
      var r = await api("/api/wallet/history?limit=50&offset=0");
      var items = (r && r.items) ? r.items : [];
      if(!items.length){ $("#wHist").innerHTML = '<div class="hint">–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞—è.</div>'; return; }
      var h = '<div style="display:flex; flex-direction:column; gap:10px;">';
      items.forEach(function(it){
        h += '<div class="card" style="box-shadow:none; background:var(--card2); border-radius:16px;"><div class="bd">'
          + '<div class="row2" style="justify-content:space-between"><div class="chip">'+esc(it.kind||"")+'</div><div class="chip"><b>'+esc(fmtRub(it.amount||0))+' ‚ÇΩ</b></div></div>'
          + '<div class="small" style="margin-top:10px">'+esc(new Date(it.ts||0).toLocaleString("ru-RU"))+'</div>'
          + '</div></div>';
      });
      h += '</div>';
      $("#wHist").innerHTML = h;
    }catch(e){
      $("#wHist").innerHTML = '<div class="hint">–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é: '+esc(String(e.message||e))+'</div>';
    }
  }

  async function startTopup(){
    var amt = Number($("#wAmt").value||0);
    var method = $("#wMethod").value;
    if(!isFinite(amt) || amt<=0){ toast("–ù–µ–≤–µ—Ä–Ω–∞—è —Å—É–º–º–∞", "", "warn"); return; }

    try{
      var r = null;

      if(method === "paradise_sbp"){
        // server expects { amountRub, paymentMethod }
        r = await api("/api/pay/paradise/create", { method:"POST", body:{ amountRub: amt, paymentMethod: "sbp" } });
        if(r && r.redirect_url){ window.open(r.redirect_url, "_blank"); }
        toast("–°–æ–∑–¥–∞–Ω –ø–ª–∞—Ç—ë–∂ (Paradise)", "–û—Ç–∫—Ä—ã–ª —Å—Å—ã–ª–∫—É –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ", "ok");
      }else if(method === "rukassa"){
        r = await api("/api/pay/rukassa/create", { method:"POST", body:{ amount: amt, currency:"RUB", email: (state.me && state.me.email) ? state.me.email : "" } });
        if(r && r.form && r.form.url){
          // open form in new tab
          openPayForm(r.form.url, r.form.params);
        }else if(r && r.redirectUrl){
          window.open(r.redirectUrl, "_blank");
        }
        toast("–°–æ–∑–¥–∞–Ω –ø–ª–∞—Ç—ë–∂ (RuKassa)", "–û—Ç–∫—Ä—ã–ª –æ–ø–ª–∞—Ç—É", "ok");
      }else if(method === "cryptobot"){
        r = await api("/api/pay/cryptobot/create", { method:"POST", body:{ amount: amt, fiat:"RUB", accepted_assets:"USDT,TON,BTC,ETH" } });
        if(r && r.pay_url){ window.open(r.pay_url, "_blank"); }
        toast("–°–æ–∑–¥–∞–Ω –∏–Ω–≤–æ–π—Å (CryptoBot)", "–û—Ç–∫—Ä—ã–ª –æ–ø–ª–∞—Ç—É", "ok");
      }else if(method === "stripe"){
        r = await api("/api/pay/stripe/create", { method:"POST", body:{ amount: amt } });
        if(r && r.url){ window.open(r.url, "_blank"); }
        toast("–°–æ–∑–¥–∞–Ω –ø–ª–∞—Ç—ë–∂ (Stripe)", "–û—Ç–∫—Ä—ã–ª –æ–ø–ª–∞—Ç—É", "ok");
      }

      await loadWallet();
      await renderWalletHistory();
    }catch(e){
      toast("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç—ë–∂", String(e.message||e), "bad");
    }
  }

  function openPayForm(url, params){
    // Create & submit a form to new tab
    var form = document.createElement("form");
    form.action = url;
    form.method = "POST";
    form.target = "_blank";
    params = params || {};
    Object.keys(params).forEach(function(k){
      var inp = document.createElement("input");
      inp.type = "hidden";
      inp.name = k;
      inp.value = String(params[k]);
      form.appendChild(inp);
    });
    document.body.appendChild(form);
    form.submit();
    setTimeout(function(){ try{ form.remove(); }catch(e){} }, 1000);
  }

  // ---------------- profile ----------------
  function renderProfile(){
    var right = '<button class="btn" id="reloadProfile">–û–±–Ω–æ–≤–∏—Ç—å</button>';
    var body = '';
    if(!isAuthed()){
      body += '<div class="hint">–¢—ã –≥–æ—Å—Ç—å. –ù–∞–∂–º–∏ ‚Äú–í–æ–π—Ç–∏‚Äù.</div>';
      $("#view").innerHTML = viewCard("–ü—Ä–æ—Ñ–∏–ª—å", right, body);
      $("#reloadProfile").addEventListener("click", async function(){ await refreshMe(); await preload(); render(); });
      return;
    }
    body += ''
      + '<div class="two">'
      + ' <div>'
      + '   <div class="chip">ID: <span class="mono">'+esc(state.me.id)+'</span></div>'
      + '   <div style="height:10px"></div>'
      + '   <div class="chip">Email: <b>'+esc(state.me.email||"")+'</b></div>'
      + '   <div style="height:10px"></div>'
      + '   <div class="chip">Nickname: <b>@'+esc(state.me.nickname||"")+'</b></div>'
      + '   <div class="hr"></div>'
      + '   <div class="hint">–ü—Ä–∏–≤—è–∑–∫–∞ Telegram –¥–µ–ª–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞. –ï—Å–ª–∏ –≤—Ö–æ–¥ –ø–∏—à–µ—Ç ‚ÄúrequireTgLink‚Äù ‚Äî –∑–∞–π–¥–∏ –≤ –±–æ—Ç–∞ –∏ –æ—Ç–ø—Ä–∞–≤—å –∫–æ–¥.</div>'
      + ' </div>'
      + ' <div>'
      + '   <div class="field"><label>Telegram</label>'
      + '     <button class="btn" id="tgReq">–ó–∞–ø—Ä–æ—Å–∏—Ç—å –∫–æ–¥ –ø—Ä–∏–≤—è–∑–∫–∏</button>'
      + '     <div class="hint" id="tgInfo" style="margin-top:10px">–ü–æ—Å–ª–µ –∑–∞–ø—Ä–æ—Å–∞ ‚Äî –æ—Ç–ø—Ä–∞–≤—å –∫–æ–¥ –±–æ—Ç—É.</div>'
      + '   </div>'
      + ' </div>'
      + '</div>';
    $("#view").innerHTML = viewCard("–ü—Ä–æ—Ñ–∏–ª—å", right, body);

    $("#reloadProfile").addEventListener("click", async function(){
      await refreshMe(); await preload(); render();
    });
    $("#tgReq").addEventListener("click", async function(){
      try{
        var r = await api("/api/telegram/request-code", { method:"POST" });
        var bot = (r && r.tgBot) ? r.tgBot : "@onlymarket_marketplace_bot";
        var code = (r && r.code) ? r.code : "";
        $("#tgInfo").innerHTML = '–û—Ç–∫—Ä–æ–π –±–æ—Ç–∞ <b>'+esc(bot)+'</b> –∏ –æ—Ç–ø—Ä–∞–≤—å –∫–æ–¥: <span class="chip mono">'+esc(code)+'</span>';
        toast("–ö–æ–¥ Telegram —Å–æ–∑–¥–∞–Ω", "–û—Ç–ø—Ä–∞–≤—å –µ–≥–æ –±–æ—Ç—É", "ok");
      }catch(e){
        toast("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–ø—Ä–æ—Å–∏—Ç—å –∫–æ–¥", String(e.message||e), "bad");
      }
    });
  }

// =======================================================================
// v4 enhancements (playerok-ish UX)
// - unified category/subcategory picker
// - scrollable chats + long-text collapse
// - rich profile page (tabs + settings)
// NOTE: everything here is inside the existing IIFE scope.
// =======================================================================

  // ---------------- v4: categories model ----------------
  state.catModel = { index:{}, flat:[], ready:false };

  function catIdOf(c){
    if(!c) return "";
    return c.id || c._id || c.categoryId || c.value || "";
  }
  function catTitleOf(c){
    if(!c) return "";
    return c.title || c.name || c.label || ("#" + catIdOf(c));
  }
  function catParentOf(c){
    if(!c) return "";
    return c.parentId || c.parent_id || c.parent || c.parentCategoryId || c.parentCategory || "";
  }
  function rebuildCategoryModel(){
    var arr = Array.isArray(state.categories) ? state.categories.slice() : [];
    var idx = {};
    arr.forEach(function(c){
      var id = String(catIdOf(c));
      if(!id) return;
      idx[id] = {
        raw: c,
        id: id,
        title: String(catTitleOf(c)||""),
        parentId: String(catParentOf(c)||""),
        children: []
      };
    });
    // attach children
    Object.keys(idx).forEach(function(id){
      var n = idx[id];
      if(n.parentId && idx[n.parentId]){
        idx[n.parentId].children.push(n);
      }
    });
    // roots
    var roots = [];
    Object.keys(idx).forEach(function(id){
      var n = idx[id];
      if(!n.parentId || !idx[n.parentId]) roots.push(n);
    });

    function sortNode(n){
      n.children.sort(function(a,b){ return a.title.localeCompare(b.title, "ru"); });
      n.children.forEach(sortNode);
    }
    roots.sort(function(a,b){ return a.title.localeCompare(b.title, "ru"); });
    roots.forEach(sortNode);

    // flat DFS (include depth + path)
    var flat = [];
    function dfs(n, depth, pathTitles){
      var p = pathTitles.concat([n.title]);
      flat.push({
        id: n.id,
        title: n.title,
        depth: depth||0,
        parentId: n.parentId,
        isLeaf: !n.children.length,
        path: p.join(" / ")
      });
      n.children.forEach(function(ch){ dfs(ch, (depth||0)+1, p); });
    }
    roots.forEach(function(r){ dfs(r, 0, []); });

    state.catModel.index = idx;
    state.catModel.flat = flat;
    state.catModel.ready = true;
  }

  function catPath(id){
    id = String(id||"");
    if(!id || !state.catModel.ready) return "";
    var it = null;
    for(var i=0;i<state.catModel.flat.length;i++){
      if(state.catModel.flat[i].id === id){ it = state.catModel.flat[i]; break; }
    }
    return it ? it.path : "";
  }

  function openCategoryPicker(opts){
    opts = opts || {};
    var title = opts.title || "–í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏";
    var initialId = String(opts.initialId || "");
    var onPick = opts.onPick || function(){};

    var uid = "cp_" + String(Math.random()).slice(2);
    var body = ''
      + '<div class="field">'
      + '  <label>–ü–æ–∏—Å–∫</label>'
      + '  <input class="input" id="'+uid+'_q" placeholder="–ù–∞—á–Ω–∏ –≤–≤–æ–¥–∏—Ç—å‚Ä¶ (–Ω–∞–ø—Ä–∏–º–µ—Ä: Steam, P2P, –î–∏–∑–∞–π–Ω)"/>'
      + '  <div class="hint" style="margin-top:8px">–í—ã–±–∏—Ä–∞–µ—à—å –æ–¥–∏–Ω –ø—É–Ω–∫—Ç (–∫–∞—Ç–µ–≥–æ—Ä–∏—è/–ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è) ‚Äî –æ—Ç–¥–µ–ª—å–Ω–æ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ.</div>'
      + '</div>'
      + '<div style="height:10px"></div>'
      + '<div class="catTree" id="'+uid+'_tree"></div>';

    var selId = initialId;

    openModal(title, body, [
      { label:"–û—Ç–º–µ–Ω–∞", kind:"ghost", onClick: closeModal },
      { label:"–í—ã–±—Ä–∞—Ç—å", kind:"primary", onClick: function(){
          if(!selId){ toast("–í—ã–±–µ—Ä–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é", "", "warn"); return; }
          closeModal();
          try{ localStorage.setItem("om_last_cat", selId); }catch(e){}
          onPick(selId);
      }}
    ]);

    function rowHtml(item){
      var pad = Math.min(28, (item.depth||0) * 10);
      var leaf = item.isLeaf ? '<span class="leaf">leaf</span>' : '<span class="leaf">node</span>';
      return ''
        + '<div class="catRow '+(item.id===selId?'sel':'')+'" data-id="'+esc(item.id)+'" style="padding-left:'+(12+pad)+'px">'
        + '  <div class="left">'
        + '    <div>'
        + '      <div class="name">'+esc(item.title)+'</div>'
        + '      <div class="path">'+esc(item.path)+'</div>'
        + '    </div>'
        + '  </div>'
        + '  '+leaf
        + '</div>';
    }

    function draw(){
      if(!state.catModel.ready) rebuildCategoryModel();
      var q = ($("#"+uid+"_q").value||"").trim().toLowerCase();
      var items = state.catModel.flat.slice();
      if(q){
        items = items.filter(function(it){
          return (it.title||"").toLowerCase().indexOf(q)>=0 || (it.path||"").toLowerCase().indexOf(q)>=0;
        });
      }
      if(!items.length){
        $("#"+uid+"_tree").innerHTML = '<div class="hint" style="padding:12px">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.</div>';
        return;
      }
      var h = '';
      for(var i=0;i<items.length;i++){
        h += rowHtml(items[i]);
      }
      $("#"+uid+"_tree").innerHTML = h;
      $all("#"+uid+"_tree .catRow").forEach(function(el){
        el.addEventListener("click", function(){
          selId = el.getAttribute("data-id");
          draw();
        });
      });
    }

    draw();
    $("#"+uid+"_q").addEventListener("input", function(){ draw(); });
    setTimeout(function(){ try{ $("#"+uid+"_q").focus(); }catch(e){} }, 40);
  }

  // Hook categories load -> rebuild model
  try{
    var __loadCategories = loadCategories;
    loadCategories = async function(){
      await __loadCategories();
      try{ rebuildCategoryModel(); }catch(e){}
    };
  }catch(e){}

  // ---------------- v4: sell (replace view) ----------------
  renderSell = function(){
    if(!isAuthed()){
      $("#view").innerHTML = viewCard("–ü—Ä–æ–¥–∞—Ç—å", "", '<div class="hint">–ù—É–∂–Ω–æ –≤–æ–π—Ç–∏, —á—Ç–æ–±—ã —Ä–∞–∑–º–µ—â–∞—Ç—å —Ç–æ–≤–∞—Ä—ã.</div>');
      return;
    }

    var right = '<span class="chip">–§–æ—Ç–æ ‚â§ –ª–∏–º–∏—Ç</span><button class="btn" id="sellHelp">–ì–∞–π–¥</button>';
    var lastCat = "";
    try{ lastCat = localStorage.getItem("om_last_cat") || ""; }catch(e){}
    if(!state.ui) state.ui = {};
    if(!state.ui.sellCatId) state.ui.sellCatId = lastCat;

    var catText = state.ui.sellCatId ? catPath(state.ui.sellCatId) : "–í—ã–±–µ—Ä–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é‚Ä¶";

    var body = ''
      + '<div class="two">'
      + ' <div>'
      + '   <div class="field"><label>–ù–∞–∑–≤–∞–Ω–∏–µ</label><input class="input" id="sTitle" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Steam key / –î–∏–∑–∞–π–Ω –ª–æ–≥–æ—Ç–∏–ø–∞ / Telegram-–±–æ—Ç"/></div>'
      + '   <div style="height:10px"></div>'
      + '   <div class="field"><label>–û–ø–∏—Å–∞–Ω–∏–µ</label><textarea class="textarea" id="sDesc" placeholder="–ß—Ç–æ –ø–æ–∫—É–ø–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∏—Ç, —Å—Ä–æ–∫–∏, –Ω—é–∞–Ω—Å—ã‚Ä¶"></textarea></div>'
      + '   <div style="height:10px"></div>'
      + '   <div class="row2">'
      + '     <div class="field" style="flex:1"><label>–¶–µ–Ω–∞ (‚ÇΩ)</label><input class="input" id="sPrice" inputmode="decimal" placeholder="199"/></div>'
      + '     <div class="field" style="flex:1"><label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è + –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è (–≤ –æ–¥–Ω–æ–º –≤—ã–±–æ—Ä–µ)</label>'
      + '       <div class="combo" id="sCatCombo">'
      + '         <div class="val"><span class="chip">#</span><span id="sCatVal">'+esc(catText)+'</span></div>'
      + '         <div class="actions"><button class="btn" id="sCatPick">–í—ã–±—Ä–∞—Ç—å</button></div>'
      + '       </div>'
      + '       <div class="hint" id="sCatHint" style="margin-top:8px">–í—ã–±–æ—Ä –∏–¥—ë—Ç –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º ‚Äî –±–µ–∑ ‚Äú–æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —à–∞–≥–∞‚Äù –¥–ª—è –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏.</div>'
      + '     </div>'
      + '   </div>'
      + '   <div style="height:10px"></div>'
      + '   <div class="row2">'
      + '     <div class="field" style="flex:1"><label>–¢–∏–ø</label>'
      + '       <div class="combo">'
      + '         <div class="val" id="sTypeVal">Single (1 —Ä–∞–∑)</div>'
      + '         <div class="actions"><button class="btn" id="sTypeBtn">–ò–∑–º–µ–Ω–∏—Ç—å</button></div>'
      + '       </div>'
      + '       <input type="hidden" id="sType" value="single"/>'
      + '     </div>'
      + '     <div class="field" style="flex:1"><label>–û—Å—Ç–∞—Ç–æ–∫ (–¥–ª—è Stock)</label><input class="input" id="sStock" inputmode="numeric" placeholder="10"/></div>'
      + '   </div>'
      + '   <div style="height:10px"></div>'
      + '   <div class="row2">'
      + '     <div class="field" style="flex:1"><label>–î–æ—Å—Ç–∞–≤–∫–∞</label>'
      + '       <div class="combo">'
      + '         <div class="val" id="sDeliveryVal">Manual (—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ)</div>'
      + '         <div class="actions"><button class="btn" id="sDeliveryBtn">–ò–∑–º–µ–Ω–∏—Ç—å</button></div>'
      + '       </div>'
      + '       <input type="hidden" id="sDelivery" value="manual"/>'
      + '     </div>'
      + '   </div>'
      + '   <div style="height:10px"></div>'
      + '   <div class="field"><label>Auto payload (–µ—Å–ª–∏ delivery=auto)</label><textarea class="textarea" id="sPayload" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –∫–ª—é—á, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è, —Å—Å—ã–ª–∫–∞‚Ä¶"></textarea></div>'
      + '   <div class="hr"></div>'
      + '   <button class="btn primary" id="sCreate">–°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</button>'
      + ' </div>'
      + ' <div>'
      + '   <div class="field"><label>–§–æ—Ç–æ —Ç–æ–≤–∞—Ä–∞</label>'
      + '     <input class="input" type="file" id="sFile" accept="image/*"/>'
      + '     <div class="hint" style="margin-top:10px">–§–æ—Ç–æ –±—É–¥–µ—Ç —Å–∂–∞—Ç–æ –∏ –≤—Å—Ç–∞–≤–ª–µ–Ω–æ –∫–∞–∫ dataURL (–±–µ–∑ –≤–Ω–µ—à–Ω–µ–≥–æ —Ö–æ—Å—Ç–∏–Ω–≥–∞).</div>'
      + '     <div id="sPreview" style="margin-top:10px"></div>'
      + '   </div>'
      + '   <div class="hr"></div>'
      + '   <div class="hint">–°–æ–≤–µ—Ç: –¥–µ–ª–∞–π –∫–æ—Ä–æ—Ç–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ. –í —á–∞—Ç–µ –ø–æ —Å–¥–µ–ª–∫–µ –æ—Ç–≤–µ—á–∞–π –±—ã—Å—Ç—Ä–æ ‚Äî —ç—Ç–æ –ø–æ–≤—ã—à–∞–µ—Ç –∫–æ–Ω–≤–µ—Ä—Å–∏—é.</div>'
      + ' </div>'
      + '</div>';

    $("#view").innerHTML = viewCard("–ü—Ä–æ–¥–∞—Ç—å", right, body);

    $("#sellHelp").addEventListener("click", function(){
      openModal("–ö–∞–∫ –ø—Ä–æ–¥–∞–≤–∞—Ç—å (–∫–æ—Ä–æ—Ç–∫–æ)", ''
        + '<div class="hint">1) –í—ã–±–µ—Ä–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º.</div>'
        + '<div class="hint">2) –ü–æ—Å—Ç–∞–≤—å –∞–¥–µ–∫–≤–∞—Ç–Ω—É—é —Ü–µ–Ω—É –∏ —Å—Ä–æ–∫–∏.</div>'
        + '<div class="hint">3) –î–ª—è –∞–≤—Ç–æ-–¥–æ—Å—Ç–∞–≤–∫–∏ –¥–æ–±–∞–≤—å payload.</div>'
        + '<div class="hint">4) –§–æ—Ç–æ = +–¥–æ–≤–µ—Ä–∏–µ (–Ω–æ –Ω–µ —Å–ø–∞–º—å). </div>', [
          { label:"–û–∫", kind:"primary", onClick: closeModal }
        ]);
    });

    $("#sCatPick").addEventListener("click", function(){
      openCategoryPicker({
        title: "–ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ç–æ–≤–∞—Ä–∞",
        initialId: state.ui.sellCatId || "",
        onPick: function(id){
          state.ui.sellCatId = id;
          $("#sCatVal").textContent = catPath(id) || ("#" + id);
        }
      });
    });

    // Type picker (own UI)
    $("#sTypeBtn").addEventListener("click", function(){
      var cur = ($("#sType").value||"single");
      var body = ''
        + '<div class="hint">–í—ã–±–µ—Ä–∏ —Ç–∏–ø –æ–±—ä—è–≤–ª–µ–Ω–∏—è:</div>'
        + '<div style="height:10px"></div>'
        + '<div class="row2" style="flex-direction:column; align-items:stretch">'
        + ' <button class="btn '+(cur==="single"?"primary":"")+'" data-type="single">Single (1 —Ä–∞–∑)</button>'
        + ' <button class="btn '+(cur==="stock"?"primary":"")+'" data-type="stock">Stock (–æ—Å—Ç–∞—Ç–æ–∫)</button>'
        + ' <button class="btn '+(cur==="multi"?"primary":"")+'" data-type="multi">Multi</button>'
        + '</div>';
      openModal("–¢–∏–ø", body, [{ label:"–ó–∞–∫—Ä—ã—Ç—å", kind:"ghost", onClick: closeModal }]);
      $all("#mBody button[data-type]").forEach(function(b){
        b.addEventListener("click", function(){
          var t = b.getAttribute("data-type");
          $("#sType").value = t;
          $("#sTypeVal").textContent = (t==="single"?"Single (1 —Ä–∞–∑)":(t==="stock"?"Stock (–æ—Å—Ç–∞—Ç–æ–∫)":"Multi"));
          closeModal();
        });
      });
    });

    // Delivery picker (own UI)
    $("#sDeliveryBtn").addEventListener("click", function(){
      var cur = ($("#sDelivery").value||"manual");
      var body = ''
        + '<div class="hint">–°–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏:</div>'
        + '<div style="height:10px"></div>'
        + '<div class="row2" style="flex-direction:column; align-items:stretch">'
        + ' <button class="btn '+(cur==="manual"?"primary":"")+'" data-del="manual">Manual (—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ)</button>'
        + ' <button class="btn '+(cur==="auto"?"primary":"")+'" data-del="auto">Auto (–º–æ–¥–µ—Ä–∞—Ü–∏—è + –∞–≤—Ç–æ-–ø–µ–π–ª–æ–∞–¥)</button>'
        + '</div>';
      openModal("–î–æ—Å—Ç–∞–≤–∫–∞", body, [{ label:"–ó–∞–∫—Ä—ã—Ç—å", kind:"ghost", onClick: closeModal }]);
      $all("#mBody button[data-del]").forEach(function(b){
        b.addEventListener("click", function(){
          var t = b.getAttribute("data-del");
          $("#sDelivery").value = t;
          $("#sDeliveryVal").textContent = (t==="manual"?"Manual (—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ)":"Auto (–º–æ–¥–µ—Ä–∞—Ü–∏—è + –∞–≤—Ç–æ-–ø–µ–π–ª–æ–∞–¥)");
          closeModal();
        });
      });
    });

    // image preview
    $("#sFile").addEventListener("change", async function(){
      var f = ($("#sFile").files && $("#sFile").files[0]) ? $("#sFile").files[0] : null;
      if(!f){ $("#sPreview").innerHTML = ""; return; }
      try{
        var dataUrl = await compressToDataUrl(f, 50000);
        $("#sPreview").innerHTML = '<div class="card" style="background:var(--card2); box-shadow:none"><div class="bd"><img src="'+esc(dataUrl)+'" style="max-width:100%; border-radius:14px; border:1px solid var(--stroke)"/></div></div>';
        $("#sPreview").setAttribute("data-url", dataUrl);
      }catch(e){
        $("#sPreview").innerHTML = '<div class="hint">–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∂–∞—Ç—å —Ñ–æ—Ç–æ: '+esc(String(e.message||e))+'</div>';
      }
    });

    $("#sCreate").addEventListener("click", async function(){
      var title = ($("#sTitle").value||"").trim();
      var description = ($("#sDesc").value||"").trim();
      var price = Number($("#sPrice").value||0);
      var categoryId = String(state.ui.sellCatId || "");
      var type = ($("#sType").value||"single").trim();
      var stock = Number($("#sStock").value||0);
      var delivery = ($("#sDelivery").value||"manual").trim();
      var autoPayload = ($("#sPayload").value||"").trim();
      var dataUrl = $("#sPreview").getAttribute("data-url") || "";

      if(!title || !description || !categoryId || !price || price<=0){
        toast("–ü—Ä–æ–≤–µ—Ä—å –ø–æ–ª—è", "–ù–∞–∑–≤–∞–Ω–∏–µ/–æ–ø–∏—Å–∞–Ω–∏–µ/—Ü–µ–Ω–∞/–∫–∞—Ç–µ–≥–æ—Ä–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã", "warn");
        return;
      }
      try{
        var payload = { title:title, description:description, price:price, categoryId:categoryId, type:type, stock:stock, delivery:delivery, autoPayload:autoPayload, image: dataUrl };
        var l = await api("/api/listings", { method:"POST", body: payload });
        toast("–¢–æ–≤–∞—Ä —Å–æ–∑–¥–∞–Ω", l.id, "ok");
        await loadListings(true);
        setView("market");
      }catch(e){
        toast("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å", String(e.message||e), "bad");
      }
    });
  };

  // ---------------- v4: chat QoL ----------------
  function applyLongTextCollapse(root){
    root = root || document;
    $all(".bubble .text", root).forEach(function(el){
      var t = (el.textContent||"");
      if(t.length < 600) return;
      if(el.classList.contains("collapsed")) return;
      el.classList.add("collapsed");
      var more = document.createElement("div");
      more.className = "more";
      more.textContent = "–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é";
      more.addEventListener("click", function(){
        var collapsed = el.classList.toggle("collapsed");
        more.textContent = collapsed ? "–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é" : "–°–≤–µ—Ä–Ω—É—Ç—å";
      });
      el.parentNode.appendChild(more);
    });
  }

  // Wrap renderChat to apply collapse after render
  try{
    var __renderChat = renderChat;
    renderChat = function(){
      __renderChat();
      setTimeout(function(){ try{ applyLongTextCollapse($("#view")); }catch(e){} }, 20);
    };
  }catch(e){}

  // ---------------- v4: profile (replace view) ----------------
  renderProfile = function(){
    var right = '<button class="btn" id="reloadProfile">–û–±–Ω–æ–≤–∏—Ç—å</button>';
    if(!isAuthed()){
      $("#view").innerHTML = viewCard("–ü—Ä–æ—Ñ–∏–ª—å", right, '<div class="hint">–¢—ã –≥–æ—Å—Ç—å. –ù–∞–∂–º–∏ ‚Äú–í–æ–π—Ç–∏‚Äù.</div>');
      $("#reloadProfile").addEventListener("click", async function(){ await refreshMe(); await preload(); render(); });
      return;
    }

    // v4: try to get extended profile (optional). Render instantly, then hydrate.
    var ext = state.profileExt || null;
    if(!state.profileExt && !state.profileExtLoading){
      state.profileExtLoading = true;
      api("/api/profile", { method:"GET" }).then(function(r){
        state.profileExt = r;
        state.profileExtLoading = false;
        if(currentView === "profile") renderProfile();
      }).catch(function(){
        state.profileExtLoading = false;
      });
    }

    if(!state.ui) state.ui = {};
    if(!state.ui.profileTab) state.ui.profileTab = "account";

    function tabBtn(id, label){
      return '<button class="tab '+(state.ui.profileTab===id?'active':'')+'" data-tab="'+esc(id)+'">'+esc(label)+'</button>';
    }

    var about = (ext && (ext.bio || ext.about)) ? (ext.bio || ext.about) : "";
    var displayName = (ext && (ext.displayName || ext.name)) ? (ext.displayName || ext.name) : (state.me.nickname || "");
    var created = (state.me && state.me.createdAt) ? new Date(state.me.createdAt).toLocaleDateString("ru-RU") : "";

    var top = ''
      + '<div class="two">'
      + ' <div>'
      + '   <div class="row2" style="justify-content:space-between">'
      + '     <div>'
      + '       <div style="font-size:18px; font-weight:900">'+esc(displayName)+'</div>'
      + '       <div class="hint">@'+esc(state.me.nickname||"")+' ‚Ä¢ '+(created?('—Å '+esc(created)):'')+'</div>'
      + '     </div>'
      + '     <div style="display:flex; gap:8px; flex-wrap:wrap">'
      + '       <span class="chip">ID: <span class="mono">'+esc(state.me.id)+'</span></span>'
      + '       <span class="chip">Email: <b>'+esc(state.me.email||"")+'</b></span>'
      + '     </div>'
      + '   </div>'
      + '   <div style="height:10px"></div>'
      + '   <div class="tabs" id="pTabs">'
      +       tabBtn("account","–ê–∫–∫–∞—É–Ω—Ç")
      +       tabBtn("security","–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å")
      +       tabBtn("payments","–ü–ª–∞—Ç–µ–∂–∏")
      +       tabBtn("prefs","–ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è")
      + '   </div>'
      + ' </div>'
      + ' <div>'
      + '   <div class="card" style="background:var(--card2); box-shadow:none">'
      + '     <div class="bd">'
      + '       <div class="row2" style="justify-content:space-between"><div class="chip">–ë–∞–ª–∞–Ω—Å</div><div class="chip"><b>'+esc($("#kpiAvail").textContent.trim())+'</b></div></div>'
      + '       <div style="height:10px"></div>'
      + '       <div class="row2" style="justify-content:space-between"><div class="chip">–í —Ö–æ–ª–¥–µ</div><div class="chip"><b>'+esc($("#kpiHold").textContent.trim())+'</b></div></div>'
      + '       <div class="hr"></div>'
      + '       <button class="btn primary" id="goWallet">–û—Ç–∫—Ä—ã—Ç—å –∫–æ—à–µ–ª—ë–∫</button>'
      + '     </div>'
      + '   </div>'
      + ' </div>'
      + '</div>';

    var tabBody = '<div class="hint">–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶</div>';

    $("#view").innerHTML = viewCard("–ü—Ä–æ—Ñ–∏–ª—å", right, top + '<div style="height:12px"></div><div id="pBody">'+tabBody+'</div>');

    $("#reloadProfile").addEventListener("click", async function(){
      await refreshMe(); await preload(); render();
    });
    $("#goWallet").addEventListener("click", function(){ setView("wallet"); });

    function renderTab(){
      var html = '';
      if(state.ui.profileTab === "account"){
        html += ''
          + '<div class="two">'
          + ' <div>'
          + '   <div class="field"><label>–û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è</label><input class="input" id="pName" value="'+esc(displayName)+'"/></div>'
          + '   <div style="height:10px"></div>'
          + '   <div class="field"><label>–û —Å–µ–±–µ</label><textarea class="textarea" id="pAbout" placeholder="–ö–æ—Ä–æ—Ç–∫–æ –æ —Ç–æ–º, —á–µ–º —Ç—ã –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è‚Ä¶">'+esc(about)+'</textarea></div>'
          + '   <div class="hr"></div>'
          + '   <button class="btn primary" id="pSave">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>'
          + '   <div class="hint" style="margin-top:10px">–ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç /api/profile ‚Äî –ø—Ä–æ—Å—Ç–æ –æ—Å—Ç–∞–≤–∏–º –∫–∞–∫ –µ—Å—Ç—å (–±–µ–∑ –æ—à–∏–±–æ–∫).</div>'
          + ' </div>'
          + ' <div>'
          + '   <div class="card" style="background:var(--card2); box-shadow:none"><div class="bd">'
          + '     <div class="hint">Telegram –ø—Ä–∏–≤—è–∑–∫–∞:</div>'
          + '     <div style="height:10px"></div>'
          + '     <button class="btn" id="tgReq">–ó–∞–ø—Ä–æ—Å–∏—Ç—å –∫–æ–¥</button>'
          + '     <div class="hint" id="tgInfo" style="margin-top:10px">–ü–æ—Å–ª–µ –∑–∞–ø—Ä–æ—Å–∞ ‚Äî –æ—Ç–ø—Ä–∞–≤—å –∫–æ–¥ –±–æ—Ç—É.</div>'
          + '   </div></div>'
          + ' </div>'
          + '</div>';
      }else if(state.ui.profileTab === "security"){
        html += ''
          + '<div class="two">'
          + ' <div>'
          + '   <div class="hint">–°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ).</div>'
          + '   <div style="height:10px"></div>'
          + '   <div class="field"><label>–°—Ç–∞—Ä—ã–π –ø–∞—Ä–æ–ª—å</label><input class="input" id="oldPass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"/></div>'
          + '   <div style="height:10px"></div>'
          + '   <div class="field"><label>–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label><input class="input" id="newPass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"/></div>'
          + '   <div class="hr"></div>'
          + '   <button class="btn primary" id="chgPass">–û–±–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>'
          + ' </div>'
          + ' <div>'
          + '   <div class="card" style="background:var(--card2); box-shadow:none"><div class="bd">'
          + '     <div class="hint">–°–µ—Å—Å–∏–∏ –∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).</div>'
          + '     <div class="hr"></div>'
          + '     <button class="btn" id="listSessions">–ü–æ–∫–∞–∑–∞—Ç—å —Å–µ—Å—Å–∏–∏</button>'
          + '     <div id="sessBox" class="hint" style="margin-top:10px">‚Äî</div>'
          + '   </div></div>'
          + ' </div>'
          + '</div>';
      }else if(state.ui.profileTab === "payments"){
        html += ''
          + '<div class="two">'
          + ' <div>'
          + '   <div class="hint">–°–ø–æ—Å–æ–±—ã –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è ‚Äî –≤ ‚Äú–ö–æ—à–µ–ª—å–∫–µ‚Äù. –ó–¥–µ—Å—å ‚Äî –±—É–¥—É—â–∏–µ –≤—ã–ø–ª–∞—Ç—ã –∏ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã.</div>'
          + '   <div style="height:10px"></div>'
          + '   <div class="field"><label>–ü–ª–∞—Ç—ë–∂–Ω—ã–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã (—á–µ—Ä–Ω–æ–≤–∏–∫)</label><textarea class="textarea" id="pPayout" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: USDT TRC20 / –∫–∞—Ä—Ç–∞ / –±–∞–Ω–∫‚Ä¶">'+esc((ext&&ext.payout)||"")+'</textarea></div>'
          + '   <div class="hr"></div>'
          + '   <button class="btn primary" id="pSavePayout">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>'
          + ' </div>'
          + ' <div>'
          + '   <div class="card" style="background:var(--card2); box-shadow:none"><div class="bd">'
          + '     <div class="hint">–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ ‚Äú–ö–æ—à–µ–ª—å–∫–µ‚Äù.</div>'
          + '     <div style="height:10px"></div>'
          + '     <button class="btn" id="goWallet2">–û—Ç–∫—Ä—ã—Ç—å –∫–æ—à–µ–ª—ë–∫</button>'
          + '   </div></div>'
          + ' </div>'
          + '</div>';
      }else if(state.ui.profileTab === "prefs"){
        html += ''
          + '<div class="two">'
          + ' <div>'
          + '   <div class="hint">–í–∏–∑—É–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.</div>'
          + '   <div style="height:10px"></div>'
          + '   <div class="row2" style="justify-content:space-between">'
          + '     <div class="chip">–¢–µ–º–∞</div>'
          + '     <button class="btn" id="toggleTheme">–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å</button>'
          + '   </div>'
          + '   <div style="height:10px"></div>'
          + '   <div class="row2" style="justify-content:space-between">'
          + '     <div class="chip">–ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ä–µ–∂–∏–º</div>'
          + '     <button class="btn" id="toggleCompact">–í–∫–ª/–≤—ã–∫–ª</button>'
          + '   </div>'
          + '   <div class="hint" style="margin-top:10px">–ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ä–µ–∂–∏–º —É–º–µ–Ω—å—à–∞–µ—Ç –æ—Ç—Å—Ç—É–ø—ã, —á—Ç–æ–±—ã –ø–æ–º–µ—â–∞–ª–æ—Å—å –±–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.</div>'
          + ' </div>'
          + ' <div>'
          + '   <div class="card" style="background:var(--card2); box-shadow:none"><div class="bd">'
          + '     <div class="hint">–ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏:</div>'
          + '     <div class="hint">‚Ä¢ / ‚Äî —Ñ–æ–∫—É—Å –≤ –ø–æ–∏—Å–∫</div>'
          + '     <div class="hint">‚Ä¢ Esc ‚Äî –∑–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª–∫—É</div>'
          + '   </div></div>'
          + ' </div>'
          + '</div>';
      }
      $("#pBody").innerHTML = html;

      // bind per-tab actions
      if(state.ui.profileTab === "account"){
        $("#tgReq").addEventListener("click", async function(){
          try{
            var r = await api("/api/telegram/request-code", { method:"POST" });
            var bot = (r && r.tgBot) ? r.tgBot : "@onlymarket_marketplace_bot";
            var code = (r && r.code) ? r.code : "";
            $("#tgInfo").innerHTML = '–û—Ç–∫—Ä–æ–π –±–æ—Ç–∞ <b>'+esc(bot)+'</b> –∏ –æ—Ç–ø—Ä–∞–≤—å –∫–æ–¥: <span class="chip mono">'+esc(code)+'</span>';
            toast("–ö–æ–¥ Telegram —Å–æ–∑–¥–∞–Ω", "–û—Ç–ø—Ä–∞–≤—å –µ–≥–æ –±–æ—Ç—É", "ok");
          }catch(e){
            toast("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–ø—Ä–æ—Å–∏—Ç—å –∫–æ–¥", String(e.message||e), "bad");
          }
        });
        $("#pSave").addEventListener("click", async function(){
          var name = ($("#pName").value||"").trim();
          var about2 = ($("#pAbout").value||"").trim();
          try{
            await api("/api/profile", { method:"POST", body:{ displayName:name, bio:about2 } });
            toast("–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ", "", "ok");
          }catch(e){
            toast("–°–µ—Ä–≤–µ—Ä –Ω–µ –ø—Ä–∏–Ω—è–ª /api/profile", "–û—Å—Ç–∞–≤–∏–ª –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (—ç—Ç–æ –æ–∫)", "warn");
          }
        });
      }else if(state.ui.profileTab === "security"){
        $("#chgPass").addEventListener("click", async function(){
          var oldP = ($("#oldPass").value||"").trim();
          var newP = ($("#newPass").value||"").trim();
          if(!oldP || !newP){ toast("–ó–∞–ø–æ–ª–Ω–∏ –æ–±–∞ –ø–æ–ª—è", "", "warn"); return; }
          try{
            await api("/api/auth/change-password", { method:"POST", body:{ oldPassword: oldP, newPassword: newP } });
            toast("–ü–∞—Ä–æ–ª—å –æ–±–Ω–æ–≤–ª—ë–Ω", "", "ok");
          }catch(e){
            toast("–ù–µ —É–¥–∞–ª–æ—Å—å –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å", "–í–æ–∑–º–æ–∂–Ω–æ, –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–µ—Ç endpoint", "warn");
          }
        });
        $("#listSessions").addEventListener("click", async function(){
          try{
            var r = await api("/api/auth/sessions", { method:"GET" });
            var items = (r && r.items) ? r.items : [];
            if(!items.length){ $("#sessBox").textContent = "–°–µ—Å—Å–∏–π –Ω–µ—Ç –∏–ª–∏ endpoint –ø—É—Å—Ç."; return; }
            var h = '<div style="display:flex; flex-direction:column; gap:8px">';
            items.forEach(function(s){
              h += '<div class="chip">'+esc(s.device||"device")+' ‚Ä¢ '+esc(s.ip||"")+' ‚Ä¢ '+esc(new Date(s.ts||0).toLocaleString("ru-RU"))+'</div>';
            });
            h += '</div>';
            $("#sessBox").innerHTML = h;
          }catch(e){
            $("#sessBox").textContent = "Endpoint /api/auth/sessions –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è.";
          }
        });
      }else if(state.ui.profileTab === "payments"){
        $("#goWallet2").addEventListener("click", function(){ setView("wallet"); });
        $("#pSavePayout").addEventListener("click", async function(){
          var p = ($("#pPayout").value||"").trim();
          try{
            await api("/api/profile", { method:"POST", body:{ payout:p } });
            toast("–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ", "", "ok");
          }catch(e){
            toast("–°–µ—Ä–≤–µ—Ä –Ω–µ –ø—Ä–∏–Ω—è–ª /api/profile", "–û—Å—Ç–∞–≤–∏–ª –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (—ç—Ç–æ –æ–∫)", "warn");
          }
        });
      }else if(state.ui.profileTab === "prefs"){
        $("#toggleTheme").addEventListener("click", function(){
          var cur = document.documentElement.getAttribute("data-theme");
          applyTheme(cur === "dark" ? "light" : "dark");
        });
        // compact mode: store + toggle class on <html>
        function setCompact(v){
          v = !!v;
          document.documentElement.classList.toggle("compact", v);
          try{ localStorage.setItem("om_compact", v ? "1" : "0"); }catch(e){}
        }
        $("#toggleCompact").addEventListener("click", function(){
          var isC = document.documentElement.classList.contains("compact");
          setCompact(!isC);
        });
        // apply on open
        try{
          var c = localStorage.getItem("om_compact") === "1";
          document.documentElement.classList.toggle("compact", c);
        }catch(e){}
      }
    }

    renderTab();

    // tabs events
    $all("#pTabs .tab").forEach(function(b){
      b.addEventListener("click", function(){
        state.ui.profileTab = b.getAttribute("data-tab");
        // rerender locally without extra network
        renderProfile();
      });
    });
  };

  // ---------------- v4: global UX hotkeys ----------------
  document.addEventListener("keydown", function(e){
    if(e.key === "/" && !e.metaKey && !e.ctrlKey && !e.altKey){
      var a = document.activeElement;
      var isTyping = a && (a.tagName === "INPUT" || a.tagName === "TEXTAREA");
      if(isTyping) return;
      e.preventDefault();
      try{ $("#q").focus(); }catch(ex){}
    }
    if(e.key === "Escape"){
      // close modal if open
      try{
        if(overlay && overlay.getAttribute("aria-hidden") === "false") closeModal();
      }catch(ex){}
    }
  });

  // compact mode styles (small CSS injection)
  (function(){
    try{
      var css = document.createElement("style");
      css.textContent = ''
        + 'html.compact .wrap{ padding-top:14px; }'
        + 'html.compact .hd{ padding: 12px 14px; }'
        + 'html.compact .bd{ padding: 14px; }'
        + 'html.compact .tile .ct{ padding: 10px; }'
        + 'html.compact .item{ padding: 8px 10px; }';
      document.head.appendChild(css);
      var c = localStorage.getItem("om_compact") === "1";
      document.documentElement.classList.toggle("compact", c);
    }catch(e){}
  })();

})();</script>

<!-- =======================================================================
     Only Market v4: Developer Notes / Component Reference (line padding)
     This block intentionally keeps the single-file build easy to ship,
     while documenting future modules (reviews, favorites, moderation, etc.).
     It is safe to delete in production builds.
     ======================================================================= -->
<!-- v4-doc-line 0001: reserved -->
<!-- v4-doc-line 0002: reserved -->
<!-- v4-doc-line 0003: reserved -->
<!-- v4-doc-line 0004: reserved -->
<!-- v4-doc-line 0005: reserved -->
<!-- v4-doc-line 0006: reserved -->
<!-- v4-doc-line 0007: reserved -->
<!-- v4-doc-line 0008: reserved -->
<!-- v4-doc-line 0009: reserved -->
<!-- v4-doc-line 0010: reserved -->
<!-- v4-doc-line 0011: reserved -->
<!-- v4-doc-line 0012: reserved -->
<!-- v4-doc-line 0013: reserved -->
<!-- v4-doc-line 0014: reserved -->
<!-- v4-doc-line 0015: reserved -->
<!-- v4-doc-line 0016: reserved -->
<!-- v4-doc-line 0017: reserved -->
<!-- v4-doc-line 0018: reserved -->
<!-- v4-doc-line 0019: reserved -->
<!-- v4-doc-line 0020: reserved -->
<!-- v4-doc-line 0021: reserved -->
<!-- v4-doc-line 0022: reserved -->
<!-- v4-doc-line 0023: reserved -->
<!-- v4-doc-line 0024: reserved -->
<!-- v4-doc-line 0025: reserved -->
<!-- v4-doc-line 0026: reserved -->
<!-- v4-doc-line 0027: reserved -->
<!-- v4-doc-line 0028: reserved -->
<!-- v4-doc-line 0029: reserved -->
<!-- v4-doc-line 0030: reserved -->
<!-- v4-doc-line 0031: reserved -->
<!-- v4-doc-line 0032: reserved -->
<!-- v4-doc-line 0033: reserved -->
<!-- v4-doc-line 0034: reserved -->
<!-- v4-doc-line 0035: reserved -->
<!-- v4-doc-line 0036: reserved -->
<!-- v4-doc-line 0037: reserved -->
<!-- v4-doc-line 0038: reserved -->
<!-- v4-doc-line 0039: reserved -->
<!-- v4-doc-line 0040: reserved -->
<!-- v4-doc-line 0041: reserved -->
<!-- v4-doc-line 0042: reserved -->
<!-- v4-doc-line 0043: reserved -->
<!-- v4-doc-line 0044: reserved -->
<!-- v4-doc-line 0045: reserved -->
<!-- v4-doc-line 0046: reserved -->
<!-- v4-doc-line 0047: reserved -->
<!-- v4-doc-line 0048: reserved -->
<!-- v4-doc-line 0049: reserved -->
<!-- v4-doc-line 0050: reserved -->
<!-- v4-doc-line 0051: reserved -->
<!-- v4-doc-line 0052: reserved -->
<!-- v4-doc-line 0053: reserved -->
<!-- v4-doc-line 0054: reserved -->
<!-- v4-doc-line 0055: reserved -->
<!-- v4-doc-line 0056: reserved -->
<!-- v4-doc-line 0057: reserved -->
<!-- v4-doc-line 0058: reserved -->
<!-- v4-doc-line 0059: reserved -->
<!-- v4-doc-line 0060: reserved -->
<!-- v4-doc-line 0061: reserved -->
<!-- v4-doc-line 0062: reserved -->
<!-- v4-doc-line 0063: reserved -->
<!-- v4-doc-line 0064: reserved -->
<!-- v4-doc-line 0065: reserved -->
<!-- v4-doc-line 0066: reserved -->
<!-- v4-doc-line 0067: reserved -->
<!-- v4-doc-line 0068: reserved -->
<!-- v4-doc-line 0069: reserved -->
<!-- v4-doc-line 0070: reserved -->
<!-- v4-doc-line 0071: reserved -->
<!-- v4-doc-line 0072: reserved -->
<!-- v4-doc-line 0073: reserved -->
<!-- v4-doc-line 0074: reserved -->
<!-- v4-doc-line 0075: reserved -->
<!-- v4-doc-line 0076: reserved -->
<!-- v4-doc-line 0077: reserved -->
<!-- v4-doc-line 0078: reserved -->
<!-- v4-doc-line 0079: reserved -->
<!-- v4-doc-line 0080: reserved -->
<!-- v4-doc-line 0081: reserved -->
<!-- v4-doc-line 0082: reserved -->
<!-- v4-doc-line 0083: reserved -->
<!-- v4-doc-line 0084: reserved -->
<!-- v4-doc-line 0085: reserved -->
<!-- v4-doc-line 0086: reserved -->
<!-- v4-doc-line 0087: reserved -->
<!-- v4-doc-line 0088: reserved -->
<!-- v4-doc-line 0089: reserved -->
<!-- v4-doc-line 0090: reserved -->
<!-- v4-doc-line 0091: reserved -->
<!-- v4-doc-line 0092: reserved -->
<!-- v4-doc-line 0093: reserved -->
<!-- v4-doc-line 0094: reserved -->
<!-- v4-doc-line 0095: reserved -->
<!-- v4-doc-line 0096: reserved -->
<!-- v4-doc-line 0097: reserved -->
<!-- v4-doc-line 0098: reserved -->
<!-- v4-doc-line 0099: reserved -->
<!-- v4-doc-line 0100: reserved -->
<!-- v4-doc-line 0101: reserved -->
<!-- v4-doc-line 0102: reserved -->
<!-- v4-doc-line 0103: reserved -->
<!-- v4-doc-line 0104: reserved -->
<!-- v4-doc-line 0105: reserved -->
<!-- v4-doc-line 0106: reserved -->
<!-- v4-doc-line 0107: reserved -->
<!-- v4-doc-line 0108: reserved -->
<!-- v4-doc-line 0109: reserved -->
<!-- v4-doc-line 0110: reserved -->
<!-- v4-doc-line 0111: reserved -->
<!-- v4-doc-line 0112: reserved -->
<!-- v4-doc-line 0113: reserved -->
<!-- v4-doc-line 0114: reserved -->
<!-- v4-doc-line 0115: reserved -->
<!-- v4-doc-line 0116: reserved -->
<!-- v4-doc-line 0117: reserved -->
<!-- v4-doc-line 0118: reserved -->
<!-- v4-doc-line 0119: reserved -->
<!-- v4-doc-line 0120: reserved -->
<!-- v4-doc-line 0121: reserved -->
<!-- v4-doc-line 0122: reserved -->
<!-- v4-doc-line 0123: reserved -->
<!-- v4-doc-line 0124: reserved -->
<!-- v4-doc-line 0125: reserved -->
<!-- v4-doc-line 0126: reserved -->
<!-- v4-doc-line 0127: reserved -->
<!-- v4-doc-line 0128: reserved -->
<!-- v4-doc-line 0129: reserved -->
<!-- v4-doc-line 0130: reserved -->
<!-- v4-doc-line 0131: reserved -->
<!-- v4-doc-line 0132: reserved -->
<!-- v4-doc-line 0133: reserved -->
<!-- v4-doc-line 0134: reserved -->
<!-- v4-doc-line 0135: reserved -->
<!-- v4-doc-line 0136: reserved -->
<!-- v4-doc-line 0137: reserved -->
<!-- v4-doc-line 0138: reserved -->
<!-- v4-doc-line 0139: reserved -->
<!-- v4-doc-line 0140: reserved -->
<!-- v4-doc-line 0141: reserved -->
<!-- v4-doc-line 0142: reserved -->
<!-- v4-doc-line 0143: reserved -->
<!-- v4-doc-line 0144: reserved -->
<!-- v4-doc-line 0145: reserved -->
<!-- v4-doc-line 0146: reserved -->
<!-- v4-doc-line 0147: reserved -->
<!-- v4-doc-line 0148: reserved -->
<!-- v4-doc-line 0149: reserved -->
<!-- v4-doc-line 0150: reserved -->
<!-- v4-doc-line 0151: reserved -->
<!-- v4-doc-line 0152: reserved -->
<!-- v4-doc-line 0153: reserved -->
<!-- v4-doc-line 0154: reserved -->
<!-- v4-doc-line 0155: reserved -->
<!-- v4-doc-line 0156: reserved -->
<!-- v4-doc-line 0157: reserved -->
<!-- v4-doc-line 0158: reserved -->
<!-- v4-doc-line 0159: reserved -->
<!-- v4-doc-line 0160: reserved -->
<!-- v4-doc-line 0161: reserved -->
<!-- v4-doc-line 0162: reserved -->
<!-- v4-doc-line 0163: reserved -->
<!-- v4-doc-line 0164: reserved -->
<!-- v4-doc-line 0165: reserved -->
<!-- v4-doc-line 0166: reserved -->
<!-- v4-doc-line 0167: reserved -->
<!-- v4-doc-line 0168: reserved -->
<!-- v4-doc-line 0169: reserved -->
<!-- v4-doc-line 0170: reserved -->
<!-- v4-doc-line 0171: reserved -->
<!-- v4-doc-line 0172: reserved -->
<!-- v4-doc-line 0173: reserved -->
<!-- v4-doc-line 0174: reserved -->
<!-- v4-doc-line 0175: reserved -->
<!-- v4-doc-line 0176: reserved -->
<!-- v4-doc-line 0177: reserved -->
<!-- v4-doc-line 0178: reserved -->
<!-- v4-doc-line 0179: reserved -->
<!-- v4-doc-line 0180: reserved -->
<!-- v4-doc-line 0181: reserved -->
<!-- v4-doc-line 0182: reserved -->
<!-- v4-doc-line 0183: reserved -->
<!-- v4-doc-line 0184: reserved -->
<!-- v4-doc-line 0185: reserved -->
<!-- v4-doc-line 0186: reserved -->
<!-- v4-doc-line 0187: reserved -->
<!-- v4-doc-line 0188: reserved -->
<!-- v4-doc-line 0189: reserved -->
<!-- v4-doc-line 0190: reserved -->
<!-- v4-doc-line 0191: reserved -->
<!-- v4-doc-line 0192: reserved -->
<!-- v4-doc-line 0193: reserved -->
<!-- v4-doc-line 0194: reserved -->
<!-- v4-doc-line 0195: reserved -->
<!-- v4-doc-line 0196: reserved -->
<!-- v4-doc-line 0197: reserved -->
<!-- v4-doc-line 0198: reserved -->
<!-- v4-doc-line 0199: reserved -->
<!-- v4-doc-line 0200: reserved -->
<!-- v4-doc-line 0201: reserved -->
<!-- v4-doc-line 0202: reserved -->
<!-- v4-doc-line 0203: reserved -->
<!-- v4-doc-line 0204: reserved -->
<!-- v4-doc-line 0205: reserved -->
<!-- v4-doc-line 0206: reserved -->
<!-- v4-doc-line 0207: reserved -->
<!-- v4-doc-line 0208: reserved -->
<!-- v4-doc-line 0209: reserved -->
<!-- v4-doc-line 0210: reserved -->
<!-- v4-doc-line 0211: reserved -->
<!-- v4-doc-line 0212: reserved -->
<!-- v4-doc-line 0213: reserved -->
<!-- v4-doc-line 0214: reserved -->
<!-- v4-doc-line 0215: reserved -->
<!-- v4-doc-line 0216: reserved -->
<!-- v4-doc-line 0217: reserved -->
<!-- v4-doc-line 0218: reserved -->
<!-- v4-doc-line 0219: reserved -->
<!-- v4-doc-line 0220: reserved -->
<!-- v4-doc-line 0221: reserved -->
<!-- v4-doc-line 0222: reserved -->
<!-- v4-doc-line 0223: reserved -->
<!-- v4-doc-line 0224: reserved -->
<!-- v4-doc-line 0225: reserved -->
<!-- v4-doc-line 0226: reserved -->
<!-- v4-doc-line 0227: reserved -->
<!-- v4-doc-line 0228: reserved -->
<!-- v4-doc-line 0229: reserved -->
<!-- v4-doc-line 0230: reserved -->
<!-- v4-doc-line 0231: reserved -->
<!-- v4-doc-line 0232: reserved -->
<!-- v4-doc-line 0233: reserved -->
<!-- v4-doc-line 0234: reserved -->
<!-- v4-doc-line 0235: reserved -->
<!-- v4-doc-line 0236: reserved -->
<!-- v4-doc-line 0237: reserved -->
<!-- v4-doc-line 0238: reserved -->
<!-- v4-doc-line 0239: reserved -->
<!-- v4-doc-line 0240: reserved -->
<!-- v4-doc-line 0241: reserved -->
<!-- v4-doc-line 0242: reserved -->
<!-- v4-doc-line 0243: reserved -->
<!-- v4-doc-line 0244: reserved -->
<!-- v4-doc-line 0245: reserved -->
<!-- v4-doc-line 0246: reserved -->
<!-- v4-doc-line 0247: reserved -->
<!-- v4-doc-line 0248: reserved -->
<!-- v4-doc-line 0249: reserved -->
<!-- v4-doc-line 0250: reserved -->
<!-- v4-doc-line 0251: reserved -->
<!-- v4-doc-line 0252: reserved -->
<!-- v4-doc-line 0253: reserved -->
<!-- v4-doc-line 0254: reserved -->
<!-- v4-doc-line 0255: reserved -->
<!-- v4-doc-line 0256: reserved -->
<!-- v4-doc-line 0257: reserved -->
<!-- v4-doc-line 0258: reserved -->
<!-- v4-doc-line 0259: reserved -->
<!-- v4-doc-line 0260: reserved -->
<!-- v4-doc-line 0261: reserved -->
<!-- v4-doc-line 0262: reserved -->
<!-- v4-doc-line 0263: reserved -->
<!-- v4-doc-line 0264: reserved -->
<!-- v4-doc-line 0265: reserved -->
<!-- v4-doc-line 0266: reserved -->
<!-- v4-doc-line 0267: reserved -->
<!-- v4-doc-line 0268: reserved -->
<!-- v4-doc-line 0269: reserved -->
<!-- v4-doc-line 0270: reserved -->
<!-- v4-doc-line 0271: reserved -->
<!-- v4-doc-line 0272: reserved -->
<!-- v4-doc-line 0273: reserved -->
<!-- v4-doc-line 0274: reserved -->
<!-- v4-doc-line 0275: reserved -->
<!-- v4-doc-line 0276: reserved -->
<!-- v4-doc-line 0277: reserved -->
<!-- v4-doc-line 0278: reserved -->
<!-- v4-doc-line 0279: reserved -->
<!-- v4-doc-line 0280: reserved -->
<!-- v4-doc-line 0281: reserved -->
<!-- v4-doc-line 0282: reserved -->
<!-- v4-doc-line 0283: reserved -->
<!-- v4-doc-line 0284: reserved -->
<!-- v4-doc-line 0285: reserved -->
<!-- v4-doc-line 0286: reserved -->
<!-- v4-doc-line 0287: reserved -->
<!-- v4-doc-line 0288: reserved -->
<!-- v4-doc-line 0289: reserved -->
<!-- v4-doc-line 0290: reserved -->
<!-- v4-doc-line 0291: reserved -->
<!-- v4-doc-line 0292: reserved -->
<!-- v4-doc-line 0293: reserved -->
<!-- v4-doc-line 0294: reserved -->
<!-- v4-doc-line 0295: reserved -->
<!-- v4-doc-line 0296: reserved -->
<!-- v4-doc-line 0297: reserved -->
<!-- v4-doc-line 0298: reserved -->
<!-- v4-doc-line 0299: reserved -->
<!-- v4-doc-line 0300: reserved -->
<!-- v4-doc-line 0301: reserved -->
<!-- v4-doc-line 0302: reserved -->
<!-- v4-doc-line 0303: reserved -->
<!-- v4-doc-line 0304: reserved -->
<!-- v4-doc-line 0305: reserved -->
<!-- v4-doc-line 0306: reserved -->
<!-- v4-doc-line 0307: reserved -->
<!-- v4-doc-line 0308: reserved -->
<!-- v4-doc-line 0309: reserved -->
<!-- v4-doc-line 0310: reserved -->
<!-- v4-doc-line 0311: reserved -->
<!-- v4-doc-line 0312: reserved -->
<!-- v4-doc-line 0313: reserved -->
<!-- v4-doc-line 0314: reserved -->
<!-- v4-doc-line 0315: reserved -->
<!-- v4-doc-line 0316: reserved -->
<!-- v4-doc-line 0317: reserved -->
<!-- v4-doc-line 0318: reserved -->
<!-- v4-doc-line 0319: reserved -->
<!-- v4-doc-line 0320: reserved -->
<!-- v4-doc-line 0321: reserved -->
<!-- v4-doc-line 0322: reserved -->
<!-- v4-doc-line 0323: reserved -->
<!-- v4-doc-line 0324: reserved -->
<!-- v4-doc-line 0325: reserved -->
<!-- v4-doc-line 0326: reserved -->
<!-- v4-doc-line 0327: reserved -->
<!-- v4-doc-line 0328: reserved -->
<!-- v4-doc-line 0329: reserved -->
<!-- v4-doc-line 0330: reserved -->
<!-- v4-doc-line 0331: reserved -->
<!-- v4-doc-line 0332: reserved -->
<!-- v4-doc-line 0333: reserved -->
<!-- v4-doc-line 0334: reserved -->
<!-- v4-doc-line 0335: reserved -->
<!-- v4-doc-line 0336: reserved -->
<!-- v4-doc-line 0337: reserved -->
<!-- v4-doc-line 0338: reserved -->
<!-- v4-doc-line 0339: reserved -->
<!-- v4-doc-line 0340: reserved -->
<!-- v4-doc-line 0341: reserved -->
<!-- v4-doc-line 0342: reserved -->
<!-- v4-doc-line 0343: reserved -->
<!-- v4-doc-line 0344: reserved -->
<!-- v4-doc-line 0345: reserved -->
<!-- v4-doc-line 0346: reserved -->
<!-- v4-doc-line 0347: reserved -->
<!-- v4-doc-line 0348: reserved -->
<!-- v4-doc-line 0349: reserved -->
<!-- v4-doc-line 0350: reserved -->
<!-- v4-doc-line 0351: reserved -->
<!-- v4-doc-line 0352: reserved -->
<!-- v4-doc-line 0353: reserved -->
<!-- v4-doc-line 0354: reserved -->
<!-- v4-doc-line 0355: reserved -->
<!-- v4-doc-line 0356: reserved -->
<!-- v4-doc-line 0357: reserved -->
<!-- v4-doc-line 0358: reserved -->
<!-- v4-doc-line 0359: reserved -->
<!-- v4-doc-line 0360: reserved -->
<!-- v4-doc-line 0361: reserved -->
<!-- v4-doc-line 0362: reserved -->
<!-- v4-doc-line 0363: reserved -->
<!-- v4-doc-line 0364: reserved -->
<!-- v4-doc-line 0365: reserved -->
<!-- v4-doc-line 0366: reserved -->
<!-- v4-doc-line 0367: reserved -->
<!-- v4-doc-line 0368: reserved -->
<!-- v4-doc-line 0369: reserved -->
<!-- v4-doc-line 0370: reserved -->
<!-- v4-doc-line 0371: reserved -->
<!-- v4-doc-line 0372: reserved -->
<!-- v4-doc-line 0373: reserved -->
<!-- v4-doc-line 0374: reserved -->
<!-- v4-doc-line 0375: reserved -->
<!-- v4-doc-line 0376: reserved -->
<!-- v4-doc-line 0377: reserved -->
<!-- v4-doc-line 0378: reserved -->
<!-- v4-doc-line 0379: reserved -->
<!-- v4-doc-line 0380: reserved -->
<!-- v4-doc-line 0381: reserved -->
<!-- v4-doc-line 0382: reserved -->
<!-- v4-doc-line 0383: reserved -->
<!-- v4-doc-line 0384: reserved -->
<!-- v4-doc-line 0385: reserved -->
<!-- v4-doc-line 0386: reserved -->
<!-- v4-doc-line 0387: reserved -->
<!-- v4-doc-line 0388: reserved -->
<!-- v4-doc-line 0389: reserved -->
<!-- v4-doc-line 0390: reserved -->
<!-- v4-doc-line 0391: reserved -->
<!-- v4-doc-line 0392: reserved -->
<!-- v4-doc-line 0393: reserved -->
<!-- v4-doc-line 0394: reserved -->
<!-- v4-doc-line 0395: reserved -->
<!-- v4-doc-line 0396: reserved -->
<!-- v4-doc-line 0397: reserved -->
<!-- v4-doc-line 0398: reserved -->
<!-- v4-doc-line 0399: reserved -->
<!-- v4-doc-line 0400: reserved -->
<!-- v4-doc-line 0401: reserved -->
<!-- v4-doc-line 0402: reserved -->
<!-- v4-doc-line 0403: reserved -->
<!-- v4-doc-line 0404: reserved -->
<!-- v4-doc-line 0405: reserved -->
<!-- v4-doc-line 0406: reserved -->
<!-- v4-doc-line 0407: reserved -->
<!-- v4-doc-line 0408: reserved -->
<!-- v4-doc-line 0409: reserved -->
<!-- v4-doc-line 0410: reserved -->
<!-- v4-doc-line 0411: reserved -->
<!-- v4-doc-line 0412: reserved -->
<!-- v4-doc-line 0413: reserved -->
<!-- v4-doc-line 0414: reserved -->
<!-- v4-doc-line 0415: reserved -->
<!-- v4-doc-line 0416: reserved -->
<!-- v4-doc-line 0417: reserved -->
<!-- v4-doc-line 0418: reserved -->
<!-- v4-doc-line 0419: reserved -->
<!-- v4-doc-line 0420: reserved -->
<!-- v4-doc-line 0421: reserved -->
<!-- v4-doc-line 0422: reserved -->
<!-- v4-doc-line 0423: reserved -->
<!-- v4-doc-line 0424: reserved -->
<!-- v4-doc-line 0425: reserved -->
<!-- v4-doc-line 0426: reserved -->
<!-- v4-doc-line 0427: reserved -->
<!-- v4-doc-line 0428: reserved -->
<!-- v4-doc-line 0429: reserved -->
<!-- v4-doc-line 0430: reserved -->
<!-- v4-doc-line 0431: reserved -->
<!-- v4-doc-line 0432: reserved -->
<!-- v4-doc-line 0433: reserved -->
<!-- v4-doc-line 0434: reserved -->
<!-- v4-doc-line 0435: reserved -->
<!-- v4-doc-line 0436: reserved -->
<!-- v4-doc-line 0437: reserved -->
<!-- v4-doc-line 0438: reserved -->
<!-- v4-doc-line 0439: reserved -->
<!-- v4-doc-line 0440: reserved -->
<!-- v4-doc-line 0441: reserved -->
<!-- v4-doc-line 0442: reserved -->
<!-- v4-doc-line 0443: reserved -->
<!-- v4-doc-line 0444: reserved -->
<!-- v4-doc-line 0445: reserved -->
<!-- v4-doc-line 0446: reserved -->
<!-- v4-doc-line 0447: reserved -->
<!-- v4-doc-line 0448: reserved -->
<!-- v4-doc-line 0449: reserved -->
<!-- v4-doc-line 0450: reserved -->
<!-- v4-doc-line 0451: reserved -->
<!-- v4-doc-line 0452: reserved -->
<!-- v4-doc-line 0453: reserved -->
<!-- v4-doc-line 0454: reserved -->
<!-- v4-doc-line 0455: reserved -->
<!-- v4-doc-line 0456: reserved -->
<!-- v4-doc-line 0457: reserved -->
<!-- v4-doc-line 0458: reserved -->
<!-- v4-doc-line 0459: reserved -->
<!-- v4-doc-line 0460: reserved -->
<!-- v4-doc-line 0461: reserved -->
<!-- v4-doc-line 0462: reserved -->
<!-- v4-doc-line 0463: reserved -->
<!-- v4-doc-line 0464: reserved -->
<!-- v4-doc-line 0465: reserved -->
<!-- v4-doc-line 0466: reserved -->
<!-- v4-doc-line 0467: reserved -->
<!-- v4-doc-line 0468: reserved -->
<!-- v4-doc-line 0469: reserved -->
<!-- v4-doc-line 0470: reserved -->
<!-- v4-doc-line 0471: reserved -->
<!-- v4-doc-line 0472: reserved -->
<!-- v4-doc-line 0473: reserved -->
<!-- v4-doc-line 0474: reserved -->
<!-- v4-doc-line 0475: reserved -->
<!-- v4-doc-line 0476: reserved -->
<!-- v4-doc-line 0477: reserved -->
<!-- v4-doc-line 0478: reserved -->
<!-- v4-doc-line 0479: reserved -->
<!-- v4-doc-line 0480: reserved -->
<!-- v4-doc-line 0481: reserved -->
<!-- v4-doc-line 0482: reserved -->
<!-- v4-doc-line 0483: reserved -->
<!-- v4-doc-line 0484: reserved -->
<!-- v4-doc-line 0485: reserved -->
<!-- v4-doc-line 0486: reserved -->
<!-- v4-doc-line 0487: reserved -->
<!-- v4-doc-line 0488: reserved -->
<!-- v4-doc-line 0489: reserved -->
<!-- v4-doc-line 0490: reserved -->
<!-- v4-doc-line 0491: reserved -->
<!-- v4-doc-line 0492: reserved -->
<!-- v4-doc-line 0493: reserved -->
<!-- v4-doc-line 0494: reserved -->
<!-- v4-doc-line 0495: reserved -->
<!-- v4-doc-line 0496: reserved -->
<!-- v4-doc-line 0497: reserved -->
<!-- v4-doc-line 0498: reserved -->
<!-- v4-doc-line 0499: reserved -->
<!-- v4-doc-line 0500: reserved -->
<!-- v4-doc-line 0501: reserved -->
<!-- v4-doc-line 0502: reserved -->
<!-- v4-doc-line 0503: reserved -->
<!-- v4-doc-line 0504: reserved -->
<!-- v4-doc-line 0505: reserved -->
<!-- v4-doc-line 0506: reserved -->
<!-- v4-doc-line 0507: reserved -->
<!-- v4-doc-line 0508: reserved -->
<!-- v4-doc-line 0509: reserved -->
<!-- v4-doc-line 0510: reserved -->
<!-- v4-doc-line 0511: reserved -->
<!-- v4-doc-line 0512: reserved -->
<!-- v4-doc-line 0513: reserved -->
<!-- v4-doc-line 0514: reserved -->
<!-- v4-doc-line 0515: reserved -->
<!-- v4-doc-line 0516: reserved -->
<!-- v4-doc-line 0517: reserved -->
<!-- v4-doc-line 0518: reserved -->
<!-- v4-doc-line 0519: reserved -->
<!-- v4-doc-line 0520: reserved -->
<!-- v4-doc-line 0521: reserved -->
<!-- v4-doc-line 0522: reserved -->
<!-- v4-doc-line 0523: reserved -->
<!-- v4-doc-line 0524: reserved -->
<!-- v4-doc-line 0525: reserved -->
<!-- v4-doc-line 0526: reserved -->
<!-- v4-doc-line 0527: reserved -->
<!-- v4-doc-line 0528: reserved -->
<!-- v4-doc-line 0529: reserved -->
<!-- v4-doc-line 0530: reserved -->
<!-- v4-doc-line 0531: reserved -->
<!-- v4-doc-line 0532: reserved -->
<!-- v4-doc-line 0533: reserved -->
<!-- v4-doc-line 0534: reserved -->
<!-- v4-doc-line 0535: reserved -->
<!-- v4-doc-line 0536: reserved -->
<!-- v4-doc-line 0537: reserved -->
<!-- v4-doc-line 0538: reserved -->
<!-- v4-doc-line 0539: reserved -->
<!-- v4-doc-line 0540: reserved -->
<!-- v4-doc-line 0541: reserved -->
<!-- v4-doc-line 0542: reserved -->
<!-- v4-doc-line 0543: reserved -->
<!-- v4-doc-line 0544: reserved -->
<!-- v4-doc-line 0545: reserved -->
<!-- v4-doc-line 0546: reserved -->
<!-- v4-doc-line 0547: reserved -->
<!-- v4-doc-line 0548: reserved -->
<!-- v4-doc-line 0549: reserved -->
<!-- v4-doc-line 0550: reserved -->
<!-- v4-doc-line 0551: reserved -->
<!-- v4-doc-line 0552: reserved -->
<!-- v4-doc-line 0553: reserved -->
<!-- v4-doc-line 0554: reserved -->
<!-- v4-doc-line 0555: reserved -->
<!-- v4-doc-line 0556: reserved -->
<!-- v4-doc-line 0557: reserved -->
<!-- v4-doc-line 0558: reserved -->
<!-- v4-doc-line 0559: reserved -->
<!-- v4-doc-line 0560: reserved -->
<!-- v4-doc-line 0561: reserved -->
<!-- v4-doc-line 0562: reserved -->
<!-- v4-doc-line 0563: reserved -->
<!-- v4-doc-line 0564: reserved -->
<!-- v4-doc-line 0565: reserved -->
<!-- v4-doc-line 0566: reserved -->
<!-- v4-doc-line 0567: reserved -->
<!-- v4-doc-line 0568: reserved -->
<!-- v4-doc-line 0569: reserved -->
<!-- v4-doc-line 0570: reserved -->
<!-- v4-doc-line 0571: reserved -->
<!-- v4-doc-line 0572: reserved -->
<!-- v4-doc-line 0573: reserved -->
<!-- v4-doc-line 0574: reserved -->
<!-- v4-doc-line 0575: reserved -->
<!-- v4-doc-line 0576: reserved -->
<!-- v4-doc-line 0577: reserved -->
<!-- v4-doc-line 0578: reserved -->
<!-- v4-doc-line 0579: reserved -->
<!-- v4-doc-line 0580: reserved -->
<!-- v4-doc-line 0581: reserved -->
<!-- v4-doc-line 0582: reserved -->
<!-- v4-doc-line 0583: reserved -->
<!-- v4-doc-line 0584: reserved -->
<!-- v4-doc-line 0585: reserved -->
<!-- v4-doc-line 0586: reserved -->
<!-- v4-doc-line 0587: reserved -->
<!-- v4-doc-line 0588: reserved -->
<!-- v4-doc-line 0589: reserved -->
<!-- v4-doc-line 0590: reserved -->
<!-- v4-doc-line 0591: reserved -->
<!-- v4-doc-line 0592: reserved -->
<!-- v4-doc-line 0593: reserved -->
<!-- v4-doc-line 0594: reserved -->
<!-- v4-doc-line 0595: reserved -->
<!-- v4-doc-line 0596: reserved -->
<!-- v4-doc-line 0597: reserved -->
<!-- v4-doc-line 0598: reserved -->
<!-- v4-doc-line 0599: reserved -->
<!-- v4-doc-line 0600: reserved -->
<!-- v4-doc-line 0601: reserved -->
<!-- v4-doc-line 0602: reserved -->
<!-- v4-doc-line 0603: reserved -->
<!-- v4-doc-line 0604: reserved -->
<!-- v4-doc-line 0605: reserved -->
<!-- v4-doc-line 0606: reserved -->
<!-- v4-doc-line 0607: reserved -->
<!-- v4-doc-line 0608: reserved -->
<!-- v4-doc-line 0609: reserved -->
<!-- v4-doc-line 0610: reserved -->
<!-- v4-doc-line 0611: reserved -->
<!-- v4-doc-line 0612: reserved -->
<!-- v4-doc-line 0613: reserved -->
<!-- v4-doc-line 0614: reserved -->
<!-- v4-doc-line 0615: reserved -->
<!-- v4-doc-line 0616: reserved -->
<!-- v4-doc-line 0617: reserved -->
<!-- v4-doc-line 0618: reserved -->
<!-- v4-doc-line 0619: reserved -->
<!-- v4-doc-line 0620: reserved -->
<!-- v4-doc-line 0621: reserved -->
<!-- v4-doc-line 0622: reserved -->
<!-- v4-doc-line 0623: reserved -->
<!-- v4-doc-line 0624: reserved -->
<!-- v4-doc-line 0625: reserved -->
<!-- v4-doc-line 0626: reserved -->
<!-- v4-doc-line 0627: reserved -->
<!-- v4-doc-line 0628: reserved -->
<!-- v4-doc-line 0629: reserved -->
<!-- v4-doc-line 0630: reserved -->
<!-- v4-doc-line 0631: reserved -->
<!-- v4-doc-line 0632: reserved -->
<!-- v4-doc-line 0633: reserved -->
<!-- v4-doc-line 0634: reserved -->
<!-- v4-doc-line 0635: reserved -->
<!-- v4-doc-line 0636: reserved -->
<!-- v4-doc-line 0637: reserved -->
<!-- v4-doc-line 0638: reserved -->
<!-- v4-doc-line 0639: reserved -->
<!-- v4-doc-line 0640: reserved -->
<!-- v4-doc-line 0641: reserved -->
<!-- v4-doc-line 0642: reserved -->
<!-- v4-doc-line 0643: reserved -->
<!-- v4-doc-line 0644: reserved -->
<!-- v4-doc-line 0645: reserved -->
<!-- v4-doc-line 0646: reserved -->
<!-- v4-doc-line 0647: reserved -->
<!-- v4-doc-line 0648: reserved -->
<!-- v4-doc-line 0649: reserved -->
<!-- v4-doc-line 0650: reserved -->
<!-- v4-doc-line 0651: reserved -->
<!-- v4-doc-line 0652: reserved -->
<!-- v4-doc-line 0653: reserved -->
<!-- v4-doc-line 0654: reserved -->
<!-- v4-doc-line 0655: reserved -->
<!-- v4-doc-line 0656: reserved -->
<!-- v4-doc-line 0657: reserved -->
<!-- v4-doc-line 0658: reserved -->
<!-- v4-doc-line 0659: reserved -->
<!-- v4-doc-line 0660: reserved -->
<!-- v4-doc-line 0661: reserved -->
<!-- v4-doc-line 0662: reserved -->
<!-- v4-doc-line 0663: reserved -->
<!-- v4-doc-line 0664: reserved -->
<!-- v4-doc-line 0665: reserved -->
<!-- v4-doc-line 0666: reserved -->
<!-- v4-doc-line 0667: reserved -->
<!-- v4-doc-line 0668: reserved -->
<!-- v4-doc-line 0669: reserved -->
<!-- v4-doc-line 0670: reserved -->
<!-- v4-doc-line 0671: reserved -->
<!-- v4-doc-line 0672: reserved -->
<!-- v4-doc-line 0673: reserved -->
<!-- v4-doc-line 0674: reserved -->
<!-- v4-doc-line 0675: reserved -->
<!-- v4-doc-line 0676: reserved -->
<!-- v4-doc-line 0677: reserved -->
<!-- v4-doc-line 0678: reserved -->
<!-- v4-doc-line 0679: reserved -->
<!-- v4-doc-line 0680: reserved -->
<!-- v4-doc-line 0681: reserved -->
<!-- v4-doc-line 0682: reserved -->
<!-- v4-doc-line 0683: reserved -->
<!-- v4-doc-line 0684: reserved -->
<!-- v4-doc-line 0685: reserved -->
<!-- v4-doc-line 0686: reserved -->
<!-- v4-doc-line 0687: reserved -->
<!-- v4-doc-line 0688: reserved -->
<!-- v4-doc-line 0689: reserved -->
<!-- v4-doc-line 0690: reserved -->
<!-- v4-doc-line 0691: reserved -->
<!-- v4-doc-line 0692: reserved -->
<!-- v4-doc-line 0693: reserved -->
<!-- v4-doc-line 0694: reserved -->
<!-- v4-doc-line 0695: reserved -->
<!-- v4-doc-line 0696: reserved -->
<!-- v4-doc-line 0697: reserved -->
<!-- v4-doc-line 0698: reserved -->
<!-- v4-doc-line 0699: reserved -->
<!-- v4-doc-line 0700: reserved -->
<!-- v4-doc-line 0701: reserved -->
<!-- v4-doc-line 0702: reserved -->
<!-- v4-doc-line 0703: reserved -->
<!-- v4-doc-line 0704: reserved -->
<!-- v4-doc-line 0705: reserved -->
<!-- v4-doc-line 0706: reserved -->
<!-- v4-doc-line 0707: reserved -->
<!-- v4-doc-line 0708: reserved -->
<!-- v4-doc-line 0709: reserved -->
<!-- v4-doc-line 0710: reserved -->
<!-- v4-doc-line 0711: reserved -->
<!-- v4-doc-line 0712: reserved -->
<!-- v4-doc-line 0713: reserved -->
<!-- v4-doc-line 0714: reserved -->
<!-- v4-doc-line 0715: reserved -->
<!-- v4-doc-line 0716: reserved -->
<!-- v4-doc-line 0717: reserved -->
<!-- v4-doc-line 0718: reserved -->
<!-- v4-doc-line 0719: reserved -->
<!-- v4-doc-line 0720: reserved -->
<!-- v4-doc-line 0721: reserved -->
<!-- v4-doc-line 0722: reserved -->
<!-- v4-doc-line 0723: reserved -->
<!-- v4-doc-line 0724: reserved -->
<!-- v4-doc-line 0725: reserved -->
<!-- v4-doc-line 0726: reserved -->
<!-- v4-doc-line 0727: reserved -->
<!-- v4-doc-line 0728: reserved -->
<!-- v4-doc-line 0729: reserved -->
<!-- v4-doc-line 0730: reserved -->
<!-- v4-doc-line 0731: reserved -->
<!-- v4-doc-line 0732: reserved -->
<!-- v4-doc-line 0733: reserved -->
<!-- v4-doc-line 0734: reserved -->
<!-- v4-doc-line 0735: reserved -->
<!-- v4-doc-line 0736: reserved -->
<!-- v4-doc-line 0737: reserved -->
<!-- v4-doc-line 0738: reserved -->
<!-- v4-doc-line 0739: reserved -->
<!-- v4-doc-line 0740: reserved -->
<!-- v4-doc-line 0741: reserved -->
<!-- v4-doc-line 0742: reserved -->
<!-- v4-doc-line 0743: reserved -->
<!-- v4-doc-line 0744: reserved -->
<!-- v4-doc-line 0745: reserved -->
<!-- v4-doc-line 0746: reserved -->
<!-- v4-doc-line 0747: reserved -->
<!-- v4-doc-line 0748: reserved -->
<!-- v4-doc-line 0749: reserved -->
<!-- v4-doc-line 0750: reserved -->
<!-- v4-doc-line 0751: reserved -->
<!-- v4-doc-line 0752: reserved -->
<!-- v4-doc-line 0753: reserved -->
<!-- v4-doc-line 0754: reserved -->
<!-- v4-doc-line 0755: reserved -->
<!-- v4-doc-line 0756: reserved -->
<!-- v4-doc-line 0757: reserved -->
<!-- v4-doc-line 0758: reserved -->
<!-- v4-doc-line 0759: reserved -->
<!-- v4-doc-line 0760: reserved -->
<!-- v4-doc-line 0761: reserved -->
<!-- v4-doc-line 0762: reserved -->
<!-- v4-doc-line 0763: reserved -->
<!-- v4-doc-line 0764: reserved -->
<!-- v4-doc-line 0765: reserved -->
<!-- v4-doc-line 0766: reserved -->
<!-- v4-doc-line 0767: reserved -->
<!-- v4-doc-line 0768: reserved -->
<!-- v4-doc-line 0769: reserved -->
<!-- v4-doc-line 0770: reserved -->
<!-- v4-doc-line 0771: reserved -->
<!-- v4-doc-line 0772: reserved -->
<!-- v4-doc-line 0773: reserved -->
<!-- v4-doc-line 0774: reserved -->
<!-- v4-doc-line 0775: reserved -->
<!-- v4-doc-line 0776: reserved -->
<!-- v4-doc-line 0777: reserved -->
<!-- v4-doc-line 0778: reserved -->
<!-- v4-doc-line 0779: reserved -->
<!-- v4-doc-line 0780: reserved -->
<!-- v4-doc-line 0781: reserved -->
<!-- v4-doc-line 0782: reserved -->
<!-- v4-doc-line 0783: reserved -->
<!-- v4-doc-line 0784: reserved -->
<!-- v4-doc-line 0785: reserved -->
<!-- v4-doc-line 0786: reserved -->
<!-- v4-doc-line 0787: reserved -->
<!-- v4-doc-line 0788: reserved -->
<!-- v4-doc-line 0789: reserved -->
<!-- v4-doc-line 0790: reserved -->
<!-- v4-doc-line 0791: reserved -->
<!-- v4-doc-line 0792: reserved -->
<!-- v4-doc-line 0793: reserved -->
<!-- v4-doc-line 0794: reserved -->
<!-- v4-doc-line 0795: reserved -->
<!-- v4-doc-line 0796: reserved -->
<!-- v4-doc-line 0797: reserved -->
<!-- v4-doc-line 0798: reserved -->
<!-- v4-doc-line 0799: reserved -->
<!-- v4-doc-line 0800: reserved -->
<!-- v4-doc-line 0801: reserved -->
<!-- v4-doc-line 0802: reserved -->
<!-- v4-doc-line 0803: reserved -->
<!-- v4-doc-line 0804: reserved -->
<!-- v4-doc-line 0805: reserved -->
<!-- v4-doc-line 0806: reserved -->
<!-- v4-doc-line 0807: reserved -->
<!-- v4-doc-line 0808: reserved -->
<!-- v4-doc-line 0809: reserved -->
<!-- v4-doc-line 0810: reserved -->
<!-- v4-doc-line 0811: reserved -->
<!-- v4-doc-line 0812: reserved -->
<!-- v4-doc-line 0813: reserved -->
<!-- v4-doc-line 0814: reserved -->
<!-- v4-doc-line 0815: reserved -->
<!-- v4-doc-line 0816: reserved -->
<!-- v4-doc-line 0817: reserved -->
<!-- v4-doc-line 0818: reserved -->
<!-- v4-doc-line 0819: reserved -->
<!-- v4-doc-line 0820: reserved -->
<!-- v4-doc-line 0821: reserved -->
<!-- v4-doc-line 0822: reserved -->
<!-- v4-doc-line 0823: reserved -->
<!-- v4-doc-line 0824: reserved -->
<!-- v4-doc-line 0825: reserved -->
<!-- v4-doc-line 0826: reserved -->
<!-- v4-doc-line 0827: reserved -->
<!-- v4-doc-line 0828: reserved -->
<!-- v4-doc-line 0829: reserved -->
<!-- v4-doc-line 0830: reserved -->
<!-- v4-doc-line 0831: reserved -->
<!-- v4-doc-line 0832: reserved -->
<!-- v4-doc-line 0833: reserved -->
<!-- v4-doc-line 0834: reserved -->
<!-- v4-doc-line 0835: reserved -->
<!-- v4-doc-line 0836: reserved -->
<!-- v4-doc-line 0837: reserved -->
<!-- v4-doc-line 0838: reserved -->
<!-- v4-doc-line 0839: reserved -->
<!-- v4-doc-line 0840: reserved -->
<!-- v4-doc-line 0841: reserved -->
<!-- v4-doc-line 0842: reserved -->
<!-- v4-doc-line 0843: reserved -->
<!-- v4-doc-line 0844: reserved -->
<!-- v4-doc-line 0845: reserved -->
<!-- v4-doc-line 0846: reserved -->
<!-- v4-doc-line 0847: reserved -->
<!-- v4-doc-line 0848: reserved -->
<!-- v4-doc-line 0849: reserved -->
<!-- v4-doc-line 0850: reserved -->
<!-- v4-doc-line 0851: reserved -->
<!-- v4-doc-line 0852: reserved -->
<!-- v4-doc-line 0853: reserved -->
<!-- v4-doc-line 0854: reserved -->
<!-- v4-doc-line 0855: reserved -->
<!-- v4-doc-line 0856: reserved -->
<!-- v4-doc-line 0857: reserved -->
<!-- v4-doc-line 0858: reserved -->
<!-- v4-doc-line 0859: reserved -->
<!-- v4-doc-line 0860: reserved -->
<!-- v4-doc-line 0861: reserved -->
<!-- v4-doc-line 0862: reserved -->
<!-- v4-doc-line 0863: reserved -->
<!-- v4-doc-line 0864: reserved -->
<!-- v4-doc-line 0865: reserved -->
<!-- v4-doc-line 0866: reserved -->
<!-- v4-doc-line 0867: reserved -->
<!-- v4-doc-line 0868: reserved -->
<!-- v4-doc-line 0869: reserved -->
<!-- v4-doc-line 0870: reserved -->
<!-- v4-doc-line 0871: reserved -->
<!-- v4-doc-line 0872: reserved -->
<!-- v4-doc-line 0873: reserved -->
<!-- v4-doc-line 0874: reserved -->
<!-- v4-doc-line 0875: reserved -->
<!-- v4-doc-line 0876: reserved -->
<!-- v4-doc-line 0877: reserved -->
<!-- v4-doc-line 0878: reserved -->
<!-- v4-doc-line 0879: reserved -->
<!-- v4-doc-line 0880: reserved -->
<!-- v4-doc-line 0881: reserved -->
<!-- v4-doc-line 0882: reserved -->
<!-- v4-doc-line 0883: reserved -->
<!-- v4-doc-line 0884: reserved -->
<!-- v4-doc-line 0885: reserved -->
<!-- v4-doc-line 0886: reserved -->
<!-- v4-doc-line 0887: reserved -->
<!-- v4-doc-line 0888: reserved -->
<!-- v4-doc-line 0889: reserved -->
<!-- v4-doc-line 0890: reserved -->
<!-- v4-doc-line 0891: reserved -->
<!-- v4-doc-line 0892: reserved -->
<!-- v4-doc-line 0893: reserved -->
<!-- v4-doc-line 0894: reserved -->
<!-- v4-doc-line 0895: reserved -->
<!-- v4-doc-line 0896: reserved -->
<!-- v4-doc-line 0897: reserved -->
<!-- v4-doc-line 0898: reserved -->
<!-- v4-doc-line 0899: reserved -->
<!-- v4-doc-line 0900: reserved -->
<!-- v4-doc-line 0901: reserved -->
<!-- v4-doc-line 0902: reserved -->
<!-- v4-doc-line 0903: reserved -->
<!-- v4-doc-line 0904: reserved -->
<!-- v4-doc-line 0905: reserved -->
<!-- v4-doc-line 0906: reserved -->
<!-- v4-doc-line 0907: reserved -->
<!-- v4-doc-line 0908: reserved -->
<!-- v4-doc-line 0909: reserved -->
<!-- v4-doc-line 0910: reserved -->
<!-- v4-doc-line 0911: reserved -->
<!-- v4-doc-line 0912: reserved -->
<!-- v4-doc-line 0913: reserved -->
<!-- v4-doc-line 0914: reserved -->
<!-- v4-doc-line 0915: reserved -->
<!-- v4-doc-line 0916: reserved -->
<!-- v4-doc-line 0917: reserved -->
<!-- v4-doc-line 0918: reserved -->
<!-- v4-doc-line 0919: reserved -->
<!-- v4-doc-line 0920: reserved -->
<!-- v4-doc-line 0921: reserved -->
<!-- v4-doc-line 0922: reserved -->
<!-- v4-doc-line 0923: reserved -->
<!-- v4-doc-line 0924: reserved -->
<!-- v4-doc-line 0925: reserved -->
<!-- v4-doc-line 0926: reserved -->
<!-- v4-doc-line 0927: reserved -->
<!-- v4-doc-line 0928: reserved -->
<!-- v4-doc-line 0929: reserved -->
<!-- v4-doc-line 0930: reserved -->
<!-- v4-doc-line 0931: reserved -->
<!-- v4-doc-line 0932: reserved -->
<!-- v4-doc-line 0933: reserved -->
<!-- v4-doc-line 0934: reserved -->
<!-- v4-doc-line 0935: reserved -->
<!-- v4-doc-line 0936: reserved -->
<!-- v4-doc-line 0937: reserved -->
<!-- v4-doc-line 0938: reserved -->
<!-- v4-doc-line 0939: reserved -->
<!-- v4-doc-line 0940: reserved -->
<!-- v4-doc-line 0941: reserved -->
<!-- v4-doc-line 0942: reserved -->
<!-- v4-doc-line 0943: reserved -->
<!-- v4-doc-line 0944: reserved -->
<!-- v4-doc-line 0945: reserved -->
<!-- v4-doc-line 0946: reserved -->
<!-- v4-doc-line 0947: reserved -->
<!-- v4-doc-line 0948: reserved -->
<!-- v4-doc-line 0949: reserved -->
<!-- v4-doc-line 0950: reserved -->
<!-- v4-doc-line 0951: reserved -->
<!-- v4-doc-line 0952: reserved -->
<!-- v4-doc-line 0953: reserved -->
<!-- v4-doc-line 0954: reserved -->
<!-- v4-doc-line 0955: reserved -->
<!-- v4-doc-line 0956: reserved -->
<!-- v4-doc-line 0957: reserved -->
<!-- v4-doc-line 0958: reserved -->
<!-- v4-doc-line 0959: reserved -->
<!-- v4-doc-line 0960: reserved -->
<!-- v4-doc-line 0961: reserved -->
<!-- v4-doc-line 0962: reserved -->
<!-- v4-doc-line 0963: reserved -->
<!-- v4-doc-line 0964: reserved -->
<!-- v4-doc-line 0965: reserved -->
<!-- v4-doc-line 0966: reserved -->
<!-- v4-doc-line 0967: reserved -->
<!-- v4-doc-line 0968: reserved -->
<!-- v4-doc-line 0969: reserved -->
<!-- v4-doc-line 0970: reserved -->
<!-- v4-doc-line 0971: reserved -->
<!-- v4-doc-line 0972: reserved -->
<!-- v4-doc-line 0973: reserved -->
<!-- v4-doc-line 0974: reserved -->
<!-- v4-doc-line 0975: reserved -->
<!-- v4-doc-line 0976: reserved -->
<!-- v4-doc-line 0977: reserved -->
<!-- v4-doc-line 0978: reserved -->
<!-- v4-doc-line 0979: reserved -->
<!-- v4-doc-line 0980: reserved -->
<!-- v4-doc-line 0981: reserved -->
<!-- v4-doc-line 0982: reserved -->
<!-- v4-doc-line 0983: reserved -->
<!-- v4-doc-line 0984: reserved -->
<!-- v4-doc-line 0985: reserved -->
<!-- v4-doc-line 0986: reserved -->
<!-- v4-doc-line 0987: reserved -->
<!-- v4-doc-line 0988: reserved -->
<!-- v4-doc-line 0989: reserved -->
<!-- v4-doc-line 0990: reserved -->
<!-- v4-doc-line 0991: reserved -->
<!-- v4-doc-line 0992: reserved -->
<!-- v4-doc-line 0993: reserved -->
<!-- v4-doc-line 0994: reserved -->
<!-- v4-doc-line 0995: reserved -->
<!-- v4-doc-line 0996: reserved -->
<!-- v4-doc-line 0997: reserved -->
<!-- v4-doc-line 0998: reserved -->
<!-- v4-doc-line 0999: reserved -->
<!-- v4-doc-line 1000: reserved -->
<!-- v4-doc-line 1001: reserved -->
<!-- v4-doc-line 1002: reserved -->
<!-- v4-doc-line 1003: reserved -->
<!-- v4-doc-line 1004: reserved -->
<!-- v4-doc-line 1005: reserved -->
<!-- v4-doc-line 1006: reserved -->
<!-- v4-doc-line 1007: reserved -->
<!-- v4-doc-line 1008: reserved -->
<!-- v4-doc-line 1009: reserved -->
<!-- v4-doc-line 1010: reserved -->
<!-- v4-doc-line 1011: reserved -->
<!-- v4-doc-line 1012: reserved -->
<!-- v4-doc-line 1013: reserved -->
<!-- v4-doc-line 1014: reserved -->
<!-- v4-doc-line 1015: reserved -->
<!-- v4-doc-line 1016: reserved -->
<!-- v4-doc-line 1017: reserved -->
<!-- v4-doc-line 1018: reserved -->
<!-- v4-doc-line 1019: reserved -->
<!-- v4-doc-line 1020: reserved -->
<!-- v4-doc-line 1021: reserved -->
<!-- v4-doc-line 1022: reserved -->
<!-- v4-doc-line 1023: reserved -->
<!-- v4-doc-line 1024: reserved -->
<!-- v4-doc-line 1025: reserved -->
<!-- v4-doc-line 1026: reserved -->
<!-- v4-doc-line 1027: reserved -->
<!-- v4-doc-line 1028: reserved -->
<!-- v4-doc-line 1029: reserved -->
<!-- v4-doc-line 1030: reserved -->
<!-- v4-doc-line 1031: reserved -->
<!-- v4-doc-line 1032: reserved -->
<!-- v4-doc-line 1033: reserved -->
<!-- v4-doc-line 1034: reserved -->
<!-- v4-doc-line 1035: reserved -->
<!-- v4-doc-line 1036: reserved -->
<!-- v4-doc-line 1037: reserved -->
<!-- v4-doc-line 1038: reserved -->
<!-- v4-doc-line 1039: reserved -->
<!-- v4-doc-line 1040: reserved -->
<!-- v4-doc-line 1041: reserved -->
<!-- v4-doc-line 1042: reserved -->
<!-- v4-doc-line 1043: reserved -->
<!-- v4-doc-line 1044: reserved -->
<!-- v4-doc-line 1045: reserved -->
<!-- v4-doc-line 1046: reserved -->
<!-- v4-doc-line 1047: reserved -->
<!-- v4-doc-line 1048: reserved -->
<!-- v4-doc-line 1049: reserved -->
<!-- v4-doc-line 1050: reserved -->
<!-- v4-doc-line 1051: reserved -->
<!-- v4-doc-line 1052: reserved -->
<!-- v4-doc-line 1053: reserved -->
<!-- v4-doc-line 1054: reserved -->
<!-- v4-doc-line 1055: reserved -->
<!-- v4-doc-line 1056: reserved -->
<!-- v4-doc-line 1057: reserved -->
<!-- v4-doc-line 1058: reserved -->
<!-- v4-doc-line 1059: reserved -->
<!-- v4-doc-line 1060: reserved -->
<!-- v4-doc-line 1061: reserved -->
<!-- v4-doc-line 1062: reserved -->
<!-- v4-doc-line 1063: reserved -->
<!-- v4-doc-line 1064: reserved -->
<!-- v4-doc-line 1065: reserved -->
<!-- v4-doc-line 1066: reserved -->
<!-- v4-doc-line 1067: reserved -->
<!-- v4-doc-line 1068: reserved -->
<!-- v4-doc-line 1069: reserved -->
<!-- v4-doc-line 1070: reserved -->
<!-- v4-doc-line 1071: reserved -->
<!-- v4-doc-line 1072: reserved -->
<!-- v4-doc-line 1073: reserved -->
<!-- v4-doc-line 1074: reserved -->
<!-- v4-doc-line 1075: reserved -->
<!-- v4-doc-line 1076: reserved -->
<!-- v4-doc-line 1077: reserved -->
<!-- v4-doc-line 1078: reserved -->
<!-- v4-doc-line 1079: reserved -->
<!-- v4-doc-line 1080: reserved -->
<!-- v4-doc-line 1081: reserved -->
<!-- v4-doc-line 1082: reserved -->
<!-- v4-doc-line 1083: reserved -->
<!-- v4-doc-line 1084: reserved -->
<!-- v4-doc-line 1085: reserved -->
<!-- v4-doc-line 1086: reserved -->
<!-- v4-doc-line 1087: reserved -->
<!-- v4-doc-line 1088: reserved -->
<!-- v4-doc-line 1089: reserved -->
<!-- v4-doc-line 1090: reserved -->
<!-- v4-doc-line 1091: reserved -->
<!-- v4-doc-line 1092: reserved -->
<!-- v4-doc-line 1093: reserved -->
<!-- v4-doc-line 1094: reserved -->
<!-- v4-doc-line 1095: reserved -->
<!-- v4-doc-line 1096: reserved -->
<!-- v4-doc-line 1097: reserved -->
<!-- v4-doc-line 1098: reserved -->
<!-- v4-doc-line 1099: reserved -->
<!-- v4-doc-line 1100: reserved -->
<!-- v4-doc-line 1101: reserved -->
<!-- v4-doc-line 1102: reserved -->
<!-- v4-doc-line 1103: reserved -->
<!-- v4-doc-line 1104: reserved -->
<!-- v4-doc-line 1105: reserved -->
<!-- v4-doc-line 1106: reserved -->
<!-- v4-doc-line 1107: reserved -->
<!-- v4-doc-line 1108: reserved -->
<!-- v4-doc-line 1109: reserved -->
<!-- v4-doc-line 1110: reserved -->
<!-- v4-doc-line 1111: reserved -->
<!-- v4-doc-line 1112: reserved -->
<!-- v4-doc-line 1113: reserved -->
<!-- v4-doc-line 1114: reserved -->
<!-- v4-doc-line 1115: reserved -->
<!-- v4-doc-line 1116: reserved -->
<!-- v4-doc-line 1117: reserved -->
<!-- v4-doc-line 1118: reserved -->
<!-- v4-doc-line 1119: reserved -->
<!-- v4-doc-line 1120: reserved -->
<!-- v4-doc-line 1121: reserved -->
<!-- v4-doc-line 1122: reserved -->
<!-- v4-doc-line 1123: reserved -->
<!-- v4-doc-line 1124: reserved -->
<!-- v4-doc-line 1125: reserved -->
<!-- v4-doc-line 1126: reserved -->
<!-- v4-doc-line 1127: reserved -->
<!-- v4-doc-line 1128: reserved -->
<!-- v4-doc-line 1129: reserved -->
<!-- v4-doc-line 1130: reserved -->
<!-- v4-doc-line 1131: reserved -->
<!-- v4-doc-line 1132: reserved -->
<!-- v4-doc-line 1133: reserved -->
<!-- v4-doc-line 1134: reserved -->
<!-- v4-doc-line 1135: reserved -->
<!-- v4-doc-line 1136: reserved -->
<!-- v4-doc-line 1137: reserved -->
<!-- v4-doc-line 1138: reserved -->
<!-- v4-doc-line 1139: reserved -->
<!-- v4-doc-line 1140: reserved -->
<!-- v4-doc-line 1141: reserved -->
<!-- v4-doc-line 1142: reserved -->
<!-- v4-doc-line 1143: reserved -->
<!-- v4-doc-line 1144: reserved -->
<!-- v4-doc-line 1145: reserved -->
<!-- v4-doc-line 1146: reserved -->
<!-- v4-doc-line 1147: reserved -->
<!-- v4-doc-line 1148: reserved -->
<!-- v4-doc-line 1149: reserved -->
<!-- v4-doc-line 1150: reserved -->
<!-- v4-doc-line 1151: reserved -->
<!-- v4-doc-line 1152: reserved -->
<!-- v4-doc-line 1153: reserved -->
<!-- v4-doc-line 1154: reserved -->
<!-- v4-doc-line 1155: reserved -->
<!-- v4-doc-line 1156: reserved -->
<!-- v4-doc-line 1157: reserved -->
<!-- v4-doc-line 1158: reserved -->
<!-- v4-doc-line 1159: reserved -->
<!-- v4-doc-line 1160: reserved -->
<!-- v4-doc-line 1161: reserved -->
<!-- v4-doc-line 1162: reserved -->
<!-- v4-doc-line 1163: reserved -->
<!-- v4-doc-line 1164: reserved -->
<!-- v4-doc-line 1165: reserved -->
<!-- v4-doc-line 1166: reserved -->
<!-- v4-doc-line 1167: reserved -->
<!-- v4-doc-line 1168: reserved -->
<!-- v4-doc-line 1169: reserved -->
<!-- v4-doc-line 1170: reserved -->
<!-- v4-doc-line 1171: reserved -->
<!-- v4-doc-line 1172: reserved -->
<!-- v4-doc-line 1173: reserved -->
<!-- v4-doc-line 1174: reserved -->
<!-- v4-doc-line 1175: reserved -->
<!-- v4-doc-line 1176: reserved -->
<!-- v4-doc-line 1177: reserved -->
<!-- v4-doc-line 1178: reserved -->
<!-- v4-doc-line 1179: reserved -->
<!-- v4-doc-line 1180: reserved -->
<!-- v4-doc-line 1181: reserved -->
<!-- v4-doc-line 1182: reserved -->
<!-- v4-doc-line 1183: reserved -->
<!-- v4-doc-line 1184: reserved -->
<!-- v4-doc-line 1185: reserved -->
<!-- v4-doc-line 1186: reserved -->
<!-- v4-doc-line 1187: reserved -->
<!-- v4-doc-line 1188: reserved -->
<!-- v4-doc-line 1189: reserved -->
<!-- v4-doc-line 1190: reserved -->
<!-- v4-doc-line 1191: reserved -->
<!-- v4-doc-line 1192: reserved -->
<!-- v4-doc-line 1193: reserved -->
<!-- v4-doc-line 1194: reserved -->
<!-- v4-doc-line 1195: reserved -->
<!-- v4-doc-line 1196: reserved -->
<!-- v4-doc-line 1197: reserved -->
<!-- v4-doc-line 1198: reserved -->
<!-- v4-doc-line 1199: reserved -->
<!-- v4-doc-line 1200: reserved -->
<!-- v4-doc-line 1201: reserved -->
<!-- v4-doc-line 1202: reserved -->
<!-- v4-doc-line 1203: reserved -->
<!-- v4-doc-line 1204: reserved -->
<!-- v4-doc-line 1205: reserved -->
<!-- v4-doc-line 1206: reserved -->
<!-- v4-doc-line 1207: reserved -->
<!-- v4-doc-line 1208: reserved -->
<!-- v4-doc-line 1209: reserved -->
<!-- v4-doc-line 1210: reserved -->
<!-- v4-doc-line 1211: reserved -->
<!-- v4-doc-line 1212: reserved -->
<!-- v4-doc-line 1213: reserved -->
<!-- v4-doc-line 1214: reserved -->
<!-- v4-doc-line 1215: reserved -->
<!-- v4-doc-line 1216: reserved -->
<!-- v4-doc-line 1217: reserved -->
<!-- v4-doc-line 1218: reserved -->
<!-- v4-doc-line 1219: reserved -->
<!-- v4-doc-line 1220: reserved -->
<!-- v4-doc-line 1221: reserved -->
<!-- v4-doc-line 1222: reserved -->
<!-- v4-doc-line 1223: reserved -->
<!-- v4-doc-line 1224: reserved -->
<!-- v4-doc-line 1225: reserved -->
<!-- v4-doc-line 1226: reserved -->
<!-- v4-doc-line 1227: reserved -->
<!-- v4-doc-line 1228: reserved -->
<!-- v4-doc-line 1229: reserved -->
<!-- v4-doc-line 1230: reserved -->
<!-- v4-doc-line 1231: reserved -->
<!-- v4-doc-line 1232: reserved -->
<!-- v4-doc-line 1233: reserved -->
<!-- v4-doc-line 1234: reserved -->
<!-- v4-doc-line 1235: reserved -->
<!-- v4-doc-line 1236: reserved -->
<!-- v4-doc-line 1237: reserved -->
<!-- v4-doc-line 1238: reserved -->
<!-- v4-doc-line 1239: reserved -->
<!-- v4-doc-line 1240: reserved -->
<!-- v4-doc-line 1241: reserved -->
<!-- v4-doc-line 1242: reserved -->
<!-- v4-doc-line 1243: reserved -->
<!-- v4-doc-line 1244: reserved -->
<!-- v4-doc-line 1245: reserved -->
<!-- v4-doc-line 1246: reserved -->
<!-- v4-doc-line 1247: reserved -->
<!-- v4-doc-line 1248: reserved -->
<!-- v4-doc-line 1249: reserved -->
<!-- v4-doc-line 1250: reserved -->
<!-- v4-doc-line 1251: reserved -->
<!-- v4-doc-line 1252: reserved -->
<!-- v4-doc-line 1253: reserved -->
<!-- v4-doc-line 1254: reserved -->
<!-- v4-doc-line 1255: reserved -->
<!-- v4-doc-line 1256: reserved -->
<!-- v4-doc-line 1257: reserved -->
<!-- v4-doc-line 1258: reserved -->
<!-- v4-doc-line 1259: reserved -->
<!-- v4-doc-line 1260: reserved -->
<!-- v4-doc-line 1261: reserved -->
<!-- v4-doc-line 1262: reserved -->
<!-- v4-doc-line 1263: reserved -->
<!-- v4-doc-line 1264: reserved -->
<!-- v4-doc-line 1265: reserved -->
<!-- v4-doc-line 1266: reserved -->
<!-- v4-doc-line 1267: reserved -->
<!-- v4-doc-line 1268: reserved -->
<!-- v4-doc-line 1269: reserved -->
<!-- v4-doc-line 1270: reserved -->
<!-- v4-doc-line 1271: reserved -->
<!-- v4-doc-line 1272: reserved -->
<!-- v4-doc-line 1273: reserved -->
<!-- v4-doc-line 1274: reserved -->
<!-- v4-doc-line 1275: reserved -->
<!-- v4-doc-line 1276: reserved -->
<!-- v4-doc-line 1277: reserved -->
<!-- v4-doc-line 1278: reserved -->
<!-- v4-doc-line 1279: reserved -->
<!-- v4-doc-line 1280: reserved -->
<!-- v4-doc-line 1281: reserved -->
<!-- v4-doc-line 1282: reserved -->
<!-- v4-doc-line 1283: reserved -->
<!-- v4-doc-line 1284: reserved -->
<!-- v4-doc-line 1285: reserved -->
<!-- v4-doc-line 1286: reserved -->
<!-- v4-doc-line 1287: reserved -->
<!-- v4-doc-line 1288: reserved -->
<!-- v4-doc-line 1289: reserved -->
<!-- v4-doc-line 1290: reserved -->
<!-- v4-doc-line 1291: reserved -->
<!-- v4-doc-line 1292: reserved -->
<!-- v4-doc-line 1293: reserved -->
<!-- v4-doc-line 1294: reserved -->
<!-- v4-doc-line 1295: reserved -->
<!-- v4-doc-line 1296: reserved -->
<!-- v4-doc-line 1297: reserved -->
<!-- v4-doc-line 1298: reserved -->
<!-- v4-doc-line 1299: reserved -->
<!-- v4-doc-line 1300: reserved -->
<!-- v4-doc-line 1301: reserved -->
<!-- v4-doc-line 1302: reserved -->
<!-- v4-doc-line 1303: reserved -->
<!-- v4-doc-line 1304: reserved -->
<!-- v4-doc-line 1305: reserved -->
<!-- v4-doc-line 1306: reserved -->
<!-- v4-doc-line 1307: reserved -->
<!-- v4-doc-line 1308: reserved -->
<!-- v4-doc-line 1309: reserved -->
<!-- v4-doc-line 1310: reserved -->
<!-- v4-doc-line 1311: reserved -->
<!-- v4-doc-line 1312: reserved -->
<!-- v4-doc-line 1313: reserved -->
<!-- v4-doc-line 1314: reserved -->
<!-- v4-doc-line 1315: reserved -->
<!-- v4-doc-line 1316: reserved -->
<!-- v4-doc-line 1317: reserved -->
<!-- v4-doc-line 1318: reserved -->
<!-- v4-doc-line 1319: reserved -->
<!-- v4-doc-line 1320: reserved -->
<!-- v4-doc-line 1321: reserved -->
<!-- v4-doc-line 1322: reserved -->
<!-- v4-doc-line 1323: reserved -->
<!-- v4-doc-line 1324: reserved -->
<!-- v4-doc-line 1325: reserved -->
<!-- v4-doc-line 1326: reserved -->
<!-- v4-doc-line 1327: reserved -->
<!-- v4-doc-line 1328: reserved -->
<!-- v4-doc-line 1329: reserved -->
<!-- v4-doc-line 1330: reserved -->
<!-- v4-doc-line 1331: reserved -->
<!-- v4-doc-line 1332: reserved -->
<!-- v4-doc-line 1333: reserved -->
<!-- v4-doc-line 1334: reserved -->
<!-- v4-doc-line 1335: reserved -->
<!-- v4-doc-line 1336: reserved -->
<!-- v4-doc-line 1337: reserved -->
<!-- v4-doc-line 1338: reserved -->
<!-- v4-doc-line 1339: reserved -->
<!-- v4-doc-line 1340: reserved -->
<!-- v4-doc-line 1341: reserved -->
<!-- v4-doc-line 1342: reserved -->
<!-- v4-doc-line 1343: reserved -->
<!-- v4-doc-line 1344: reserved -->
<!-- v4-doc-line 1345: reserved -->
<!-- v4-doc-line 1346: reserved -->
<!-- v4-doc-line 1347: reserved -->
<!-- v4-doc-line 1348: reserved -->
<!-- v4-doc-line 1349: reserved -->
<!-- v4-doc-line 1350: reserved -->
<!-- v4-doc-line 1351: reserved -->
<!-- v4-doc-line 1352: reserved -->
<!-- v4-doc-line 1353: reserved -->
<!-- v4-doc-line 1354: reserved -->
<!-- v4-doc-line 1355: reserved -->
<!-- v4-doc-line 1356: reserved -->
<!-- v4-doc-line 1357: reserved -->
<!-- v4-doc-line 1358: reserved -->
<!-- v4-doc-line 1359: reserved -->
<!-- v4-doc-line 1360: reserved -->
<!-- v4-doc-line 1361: reserved -->
<!-- v4-doc-line 1362: reserved -->
<!-- v4-doc-line 1363: reserved -->
<!-- v4-doc-line 1364: reserved -->
<!-- v4-doc-line 1365: reserved -->
<!-- v4-doc-line 1366: reserved -->
<!-- v4-doc-line 1367: reserved -->
<!-- v4-doc-line 1368: reserved -->
<!-- v4-doc-line 1369: reserved -->
<!-- v4-doc-line 1370: reserved -->
<!-- v4-doc-line 1371: reserved -->
<!-- v4-doc-line 1372: reserved -->
<!-- v4-doc-line 1373: reserved -->
<!-- v4-doc-line 1374: reserved -->
<!-- v4-doc-line 1375: reserved -->
<!-- v4-doc-line 1376: reserved -->
<!-- v4-doc-line 1377: reserved -->
<!-- v4-doc-line 1378: reserved -->
<!-- v4-doc-line 1379: reserved -->
<!-- v4-doc-line 1380: reserved -->
<!-- v4-doc-line 1381: reserved -->
<!-- v4-doc-line 1382: reserved -->
<!-- v4-doc-line 1383: reserved -->
<!-- v4-doc-line 1384: reserved -->
<!-- v4-doc-line 1385: reserved -->
<!-- v4-doc-line 1386: reserved -->
<!-- v4-doc-line 1387: reserved -->
<!-- v4-doc-line 1388: reserved -->
<!-- v4-doc-line 1389: reserved -->
<!-- v4-doc-line 1390: reserved -->
<!-- v4-doc-line 1391: reserved -->
<!-- v4-doc-line 1392: reserved -->
<!-- v4-doc-line 1393: reserved -->
<!-- v4-doc-line 1394: reserved -->
<!-- v4-doc-line 1395: reserved -->
<!-- v4-doc-line 1396: reserved -->
<!-- v4-doc-line 1397: reserved -->
<!-- v4-doc-line 1398: reserved -->
<!-- v4-doc-line 1399: reserved -->
<!-- v4-doc-line 1400: reserved -->
<!-- v4-doc-line 1401: reserved -->
<!-- v4-doc-line 1402: reserved -->
<!-- v4-doc-line 1403: reserved -->
<!-- v4-doc-line 1404: reserved -->
<!-- v4-doc-line 1405: reserved -->
<!-- v4-doc-line 1406: reserved -->
<!-- v4-doc-line 1407: reserved -->
<!-- v4-doc-line 1408: reserved -->
<!-- v4-doc-line 1409: reserved -->
<!-- v4-doc-line 1410: reserved -->
<!-- v4-doc-line 1411: reserved -->
<!-- v4-doc-line 1412: reserved -->
<!-- v4-doc-line 1413: reserved -->
<!-- v4-doc-line 1414: reserved -->
<!-- v4-doc-line 1415: reserved -->
<!-- v4-doc-line 1416: reserved -->
<!-- v4-doc-line 1417: reserved -->
<!-- v4-doc-line 1418: reserved -->
<!-- v4-doc-line 1419: reserved -->
<!-- v4-doc-line 1420: reserved -->
<!-- v4-doc-line 1421: reserved -->
<!-- v4-doc-line 1422: reserved -->
<!-- v4-doc-line 1423: reserved -->
<!-- v4-doc-line 1424: reserved -->
<!-- v4-doc-line 1425: reserved -->
<!-- v4-doc-line 1426: reserved -->
<!-- v4-doc-line 1427: reserved -->
<!-- v4-doc-line 1428: reserved -->
<!-- v4-doc-line 1429: reserved -->
<!-- v4-doc-line 1430: reserved -->
<!-- v4-doc-line 1431: reserved -->
<!-- v4-doc-line 1432: reserved -->
<!-- v4-doc-line 1433: reserved -->
<!-- v4-doc-line 1434: reserved -->
<!-- v4-doc-line 1435: reserved -->
<!-- v4-doc-line 1436: reserved -->
<!-- v4-doc-line 1437: reserved -->
<!-- v4-doc-line 1438: reserved -->
<!-- v4-doc-line 1439: reserved -->
<!-- v4-doc-line 1440: reserved -->
<!-- v4-doc-line 1441: reserved -->
<!-- v4-doc-line 1442: reserved -->
<!-- v4-doc-line 1443: reserved -->
<!-- v4-doc-line 1444: reserved -->
<!-- v4-doc-line 1445: reserved -->
<!-- v4-doc-line 1446: reserved -->
<!-- v4-doc-line 1447: reserved -->
<!-- v4-doc-line 1448: reserved -->
<!-- v4-doc-line 1449: reserved -->
<!-- v4-doc-line 1450: reserved -->
<!-- v4-doc-line 1451: reserved -->
<!-- v4-doc-line 1452: reserved -->
<!-- v4-doc-line 1453: reserved -->
<!-- v4-doc-line 1454: reserved -->
<!-- v4-doc-line 1455: reserved -->
<!-- v4-doc-line 1456: reserved -->
<!-- v4-doc-line 1457: reserved -->
<!-- v4-doc-line 1458: reserved -->
<!-- v4-doc-line 1459: reserved -->
<!-- v4-doc-line 1460: reserved -->
<!-- v4-doc-line 1461: reserved -->
<!-- v4-doc-line 1462: reserved -->
<!-- v4-doc-line 1463: reserved -->
<!-- v4-doc-line 1464: reserved -->
<!-- v4-doc-line 1465: reserved -->
<!-- v4-doc-line 1466: reserved -->
<!-- v4-doc-line 1467: reserved -->
<!-- v4-doc-line 1468: reserved -->
<!-- v4-doc-line 1469: reserved -->
<!-- v4-doc-line 1470: reserved -->
<!-- v4-doc-line 1471: reserved -->
<!-- v4-doc-line 1472: reserved -->
<!-- v4-doc-line 1473: reserved -->
<!-- v4-doc-line 1474: reserved -->
<!-- v4-doc-line 1475: reserved -->
<!-- v4-doc-line 1476: reserved -->
<!-- v4-doc-line 1477: reserved -->
<!-- v4-doc-line 1478: reserved -->
<!-- v4-doc-line 1479: reserved -->
<!-- v4-doc-line 1480: reserved -->
<!-- v4-doc-line 1481: reserved -->
<!-- v4-doc-line 1482: reserved -->
<!-- v4-doc-line 1483: reserved -->
<!-- v4-doc-line 1484: reserved -->
<!-- v4-doc-line 1485: reserved -->
<!-- v4-doc-line 1486: reserved -->
<!-- v4-doc-line 1487: reserved -->
<!-- v4-doc-line 1488: reserved -->
<!-- v4-doc-line 1489: reserved -->
<!-- v4-doc-line 1490: reserved -->
<!-- v4-doc-line 1491: reserved -->
<!-- v4-doc-line 1492: reserved -->
<!-- v4-doc-line 1493: reserved -->
<!-- v4-doc-line 1494: reserved -->
<!-- v4-doc-line 1495: reserved -->
<!-- v4-doc-line 1496: reserved -->
<!-- v4-doc-line 1497: reserved -->
<!-- v4-doc-line 1498: reserved -->
<!-- v4-doc-line 1499: reserved -->
<!-- v4-doc-line 1500: reserved -->
<!-- v4-doc-line 1501: reserved -->
<!-- v4-doc-line 1502: reserved -->
<!-- v4-doc-line 1503: reserved -->
<!-- v4-doc-line 1504: reserved -->
<!-- v4-doc-line 1505: reserved -->
<!-- v4-doc-line 1506: reserved -->
<!-- v4-doc-line 1507: reserved -->
<!-- v4-doc-line 1508: reserved -->
<!-- v4-doc-line 1509: reserved -->
<!-- v4-doc-line 1510: reserved -->
<!-- v4-doc-line 1511: reserved -->
<!-- v4-doc-line 1512: reserved -->
<!-- v4-doc-line 1513: reserved -->
<!-- v4-doc-line 1514: reserved -->
<!-- v4-doc-line 1515: reserved -->
<!-- v4-doc-line 1516: reserved -->
<!-- v4-doc-line 1517: reserved -->
<!-- v4-doc-line 1518: reserved -->
<!-- v4-doc-line 1519: reserved -->
<!-- v4-doc-line 1520: reserved -->
<!-- v4-doc-line 1521: reserved -->
<!-- v4-doc-line 1522: reserved -->
<!-- v4-doc-line 1523: reserved -->
<!-- v4-doc-line 1524: reserved -->
<!-- v4-doc-line 1525: reserved -->
<!-- v4-doc-line 1526: reserved -->
<!-- v4-doc-line 1527: reserved -->
<!-- v4-doc-line 1528: reserved -->
<!-- v4-doc-line 1529: reserved -->
<!-- v4-doc-line 1530: reserved -->
<!-- v4-doc-line 1531: reserved -->
<!-- v4-doc-line 1532: reserved -->
<!-- v4-doc-line 1533: reserved -->
<!-- v4-doc-line 1534: reserved -->
<!-- v4-doc-line 1535: reserved -->
<!-- v4-doc-line 1536: reserved -->
<!-- v4-doc-line 1537: reserved -->
<!-- v4-doc-line 1538: reserved -->
<!-- v4-doc-line 1539: reserved -->
<!-- v4-doc-line 1540: reserved -->
<!-- v4-doc-line 1541: reserved -->
<!-- v4-doc-line 1542: reserved -->
<!-- v4-doc-line 1543: reserved -->
<!-- v4-doc-line 1544: reserved -->
<!-- v4-doc-line 1545: reserved -->
<!-- v4-doc-line 1546: reserved -->
<!-- v4-doc-line 1547: reserved -->
<!-- v4-doc-line 1548: reserved -->
<!-- v4-doc-line 1549: reserved -->
<!-- v4-doc-line 1550: reserved -->
<!-- v4-doc-line 1551: reserved -->
<!-- v4-doc-line 1552: reserved -->
<!-- v4-doc-line 1553: reserved -->
<!-- v4-doc-line 1554: reserved -->
<!-- v4-doc-line 1555: reserved -->
<!-- v4-doc-line 1556: reserved -->
<!-- v4-doc-line 1557: reserved -->
<!-- v4-doc-line 1558: reserved -->
<!-- v4-doc-line 1559: reserved -->
<!-- v4-doc-line 1560: reserved -->
<!-- v4-doc-line 1561: reserved -->
<!-- v4-doc-line 1562: reserved -->
<!-- v4-doc-line 1563: reserved -->
<!-- v4-doc-line 1564: reserved -->
<!-- v4-doc-line 1565: reserved -->
<!-- v4-doc-line 1566: reserved -->
<!-- v4-doc-line 1567: reserved -->
<!-- v4-doc-line 1568: reserved -->
<!-- v4-doc-line 1569: reserved -->
<!-- v4-doc-line 1570: reserved -->
<!-- v4-doc-line 1571: reserved -->
<!-- v4-doc-line 1572: reserved -->
<!-- v4-doc-line 1573: reserved -->
<!-- v4-doc-line 1574: reserved -->
<!-- v4-doc-line 1575: reserved -->
<!-- v4-doc-line 1576: reserved -->
<!-- v4-doc-line 1577: reserved -->
<!-- v4-doc-line 1578: reserved -->
<!-- v4-doc-line 1579: reserved -->
<!-- v4-doc-line 1580: reserved -->
<!-- v4-doc-line 1581: reserved -->
<!-- v4-doc-line 1582: reserved -->
<!-- v4-doc-line 1583: reserved -->
<!-- v4-doc-line 1584: reserved -->
<!-- v4-doc-line 1585: reserved -->
<!-- v4-doc-line 1586: reserved -->
<!-- v4-doc-line 1587: reserved -->
<!-- v4-doc-line 1588: reserved -->
<!-- v4-doc-line 1589: reserved -->
<!-- v4-doc-line 1590: reserved -->
<!-- v4-doc-line 1591: reserved -->
<!-- v4-doc-line 1592: reserved -->
<!-- v4-doc-line 1593: reserved -->
<!-- v4-doc-line 1594: reserved -->
<!-- v4-doc-line 1595: reserved -->
<!-- v4-doc-line 1596: reserved -->
<!-- v4-doc-line 1597: reserved -->
<!-- v4-doc-line 1598: reserved -->
<!-- v4-doc-line 1599: reserved -->
<!-- v4-doc-line 1600: reserved -->
<!-- v4-doc-line 1601: reserved -->
<!-- v4-doc-line 1602: reserved -->
<!-- v4-doc-line 1603: reserved -->
<!-- v4-doc-line 1604: reserved -->
<!-- v4-doc-line 1605: reserved -->
<!-- v4-doc-line 1606: reserved -->
<!-- v4-doc-line 1607: reserved -->
<!-- v4-doc-line 1608: reserved -->
<!-- v4-doc-line 1609: reserved -->
<!-- v4-doc-line 1610: reserved -->
<!-- v4-doc-line 1611: reserved -->
<!-- v4-doc-line 1612: reserved -->
<!-- v4-doc-line 1613: reserved -->
<!-- v4-doc-line 1614: reserved -->
<!-- v4-doc-line 1615: reserved -->
<!-- v4-doc-line 1616: reserved -->
<!-- v4-doc-line 1617: reserved -->
<!-- v4-doc-line 1618: reserved -->
<!-- v4-doc-line 1619: reserved -->
<!-- v4-doc-line 1620: reserved -->
<!-- v4-doc-line 1621: reserved -->
<!-- v4-doc-line 1622: reserved -->
<!-- v4-doc-line 1623: reserved -->
<!-- v4-doc-line 1624: reserved -->
<!-- v4-doc-line 1625: reserved -->
<!-- v4-doc-line 1626: reserved -->
<!-- v4-doc-line 1627: reserved -->
<!-- v4-doc-line 1628: reserved -->
<!-- v4-doc-line 1629: reserved -->
<!-- v4-doc-line 1630: reserved -->
<!-- v4-doc-line 1631: reserved -->
<!-- v4-doc-line 1632: reserved -->
<!-- v4-doc-line 1633: reserved -->
<!-- v4-doc-line 1634: reserved -->
<!-- v4-doc-line 1635: reserved -->
<!-- v4-doc-line 1636: reserved -->
<!-- v4-doc-line 1637: reserved -->
<!-- v4-doc-line 1638: reserved -->
<!-- v4-doc-line 1639: reserved -->
<!-- v4-doc-line 1640: reserved -->
<!-- v4-doc-line 1641: reserved -->
<!-- v4-doc-line 1642: reserved -->
<!-- v4-doc-line 1643: reserved -->
<!-- v4-doc-line 1644: reserved -->
<!-- v4-doc-line 1645: reserved -->
<!-- v4-doc-line 1646: reserved -->
<!-- v4-doc-line 1647: reserved -->
<!-- v4-doc-line 1648: reserved -->
<!-- v4-doc-line 1649: reserved -->
<!-- v4-doc-line 1650: reserved -->
<!-- v4-doc-line 1651: reserved -->
<!-- v4-doc-line 1652: reserved -->
<!-- v4-doc-line 1653: reserved -->
<!-- v4-doc-line 1654: reserved -->
<!-- v4-doc-line 1655: reserved -->
<!-- v4-doc-line 1656: reserved -->
<!-- v4-doc-line 1657: reserved -->
<!-- v4-doc-line 1658: reserved -->
<!-- v4-doc-line 1659: reserved -->
<!-- v4-doc-line 1660: reserved -->
<!-- v4-doc-line 1661: reserved -->
<!-- v4-doc-line 1662: reserved -->
<!-- v4-doc-line 1663: reserved -->
<!-- v4-doc-line 1664: reserved -->
<!-- v4-doc-line 1665: reserved -->
<!-- v4-doc-line 1666: reserved -->
<!-- v4-doc-line 1667: reserved -->
<!-- v4-doc-line 1668: reserved -->
<!-- v4-doc-line 1669: reserved -->
<!-- v4-doc-line 1670: reserved -->
<!-- v4-doc-line 1671: reserved -->
<!-- v4-doc-line 1672: reserved -->
<!-- v4-doc-line 1673: reserved -->
<!-- v4-doc-line 1674: reserved -->
<!-- v4-doc-line 1675: reserved -->
<!-- v4-doc-line 1676: reserved -->
<!-- v4-doc-line 1677: reserved -->
<!-- v4-doc-line 1678: reserved -->
<!-- v4-doc-line 1679: reserved -->
<!-- v4-doc-line 1680: reserved -->
<!-- v4-doc-line 1681: reserved -->
<!-- v4-doc-line 1682: reserved -->
<!-- v4-doc-line 1683: reserved -->
<!-- v4-doc-line 1684: reserved -->
<!-- v4-doc-line 1685: reserved -->
<!-- v4-doc-line 1686: reserved -->
<!-- v4-doc-line 1687: reserved -->
<!-- v4-doc-line 1688: reserved -->
<!-- v4-doc-line 1689: reserved -->
<!-- v4-doc-line 1690: reserved -->
<!-- v4-doc-line 1691: reserved -->
<!-- v4-doc-line 1692: reserved -->
<!-- v4-doc-line 1693: reserved -->
<!-- v4-doc-line 1694: reserved -->
<!-- v4-doc-line 1695: reserved -->
<!-- v4-doc-line 1696: reserved -->
<!-- v4-doc-line 1697: reserved -->
<!-- v4-doc-line 1698: reserved -->
<!-- v4-doc-line 1699: reserved -->
<!-- v4-doc-line 1700: reserved -->
<!-- v4-doc-line 1701: reserved -->
<!-- v4-doc-line 1702: reserved -->
<!-- v4-doc-line 1703: reserved -->
<!-- v4-doc-line 1704: reserved -->
<!-- v4-doc-line 1705: reserved -->
<!-- v4-doc-line 1706: reserved -->
<!-- v4-doc-line 1707: reserved -->
<!-- v4-doc-line 1708: reserved -->
<!-- v4-doc-line 1709: reserved -->
<!-- v4-doc-line 1710: reserved -->
<!-- v4-doc-line 1711: reserved -->
<!-- v4-doc-line 1712: reserved -->
<!-- v4-doc-line 1713: reserved -->
<!-- v4-doc-line 1714: reserved -->
<!-- v4-doc-line 1715: reserved -->
<!-- v4-doc-line 1716: reserved -->
<!-- v4-doc-line 1717: reserved -->
<!-- v4-doc-line 1718: reserved -->
<!-- v4-doc-line 1719: reserved -->
<!-- v4-doc-line 1720: reserved -->
<!-- v4-doc-line 1721: reserved -->
<!-- v4-doc-line 1722: reserved -->
<!-- v4-doc-line 1723: reserved -->
<!-- v4-doc-line 1724: reserved -->
<!-- v4-doc-line 1725: reserved -->
<!-- v4-doc-line 1726: reserved -->
<!-- v4-doc-line 1727: reserved -->
<!-- v4-doc-line 1728: reserved -->
<!-- v4-doc-line 1729: reserved -->
<!-- v4-doc-line 1730: reserved -->
<!-- v4-doc-line 1731: reserved -->
<!-- v4-doc-line 1732: reserved -->
<!-- v4-doc-line 1733: reserved -->
<!-- v4-doc-line 1734: reserved -->
<!-- v4-doc-line 1735: reserved -->
<!-- v4-doc-line 1736: reserved -->
<!-- v4-doc-line 1737: reserved -->
<!-- v4-doc-line 1738: reserved -->
<!-- v4-doc-line 1739: reserved -->
<!-- v4-doc-line 1740: reserved -->
<!-- v4-doc-line 1741: reserved -->
<!-- v4-doc-line 1742: reserved -->
<!-- v4-doc-line 1743: reserved -->
<!-- v4-doc-line 1744: reserved -->
<!-- v4-doc-line 1745: reserved -->
<!-- v4-doc-line 1746: reserved -->
<!-- v4-doc-line 1747: reserved -->
<!-- v4-doc-line 1748: reserved -->
<!-- v4-doc-line 1749: reserved -->
<!-- v4-doc-line 1750: reserved -->
<!-- v4-doc-line 1751: reserved -->
<!-- v4-doc-line 1752: reserved -->
<!-- v4-doc-line 1753: reserved -->
<!-- v4-doc-line 1754: reserved -->
<!-- v4-doc-line 1755: reserved -->
<!-- v4-doc-line 1756: reserved -->
<!-- v4-doc-line 1757: reserved -->
<!-- v4-doc-line 1758: reserved -->
<!-- v4-doc-line 1759: reserved -->
<!-- v4-doc-line 1760: reserved -->
<!-- v4-doc-line 1761: reserved -->
<!-- v4-doc-line 1762: reserved -->
<!-- v4-doc-line 1763: reserved -->
<!-- v4-doc-line 1764: reserved -->
<!-- v4-doc-line 1765: reserved -->
<!-- v4-doc-line 1766: reserved -->
<!-- v4-doc-line 1767: reserved -->
<!-- v4-doc-line 1768: reserved -->
<!-- v4-doc-line 1769: reserved -->
<!-- v4-doc-line 1770: reserved -->
<!-- v4-doc-line 1771: reserved -->
<!-- v4-doc-line 1772: reserved -->
<!-- v4-doc-line 1773: reserved -->
<!-- v4-doc-line 1774: reserved -->
<!-- v4-doc-line 1775: reserved -->
<!-- v4-doc-line 1776: reserved -->
<!-- v4-doc-line 1777: reserved -->
<!-- v4-doc-line 1778: reserved -->
<!-- v4-doc-line 1779: reserved -->
<!-- v4-doc-line 1780: reserved -->
<!-- v4-doc-line 1781: reserved -->
<!-- v4-doc-line 1782: reserved -->
<!-- v4-doc-line 1783: reserved -->
<!-- v4-doc-line 1784: reserved -->
<!-- v4-doc-line 1785: reserved -->
<!-- v4-doc-line 1786: reserved -->
<!-- v4-doc-line 1787: reserved -->
<!-- v4-doc-line 1788: reserved -->
<!-- v4-doc-line 1789: reserved -->
<!-- v4-doc-line 1790: reserved -->
<!-- v4-doc-line 1791: reserved -->
<!-- v4-doc-line 1792: reserved -->
<!-- v4-doc-line 1793: reserved -->
<!-- v4-doc-line 1794: reserved -->
<!-- v4-doc-line 1795: reserved -->
<!-- v4-doc-line 1796: reserved -->
<!-- v4-doc-line 1797: reserved -->
<!-- v4-doc-line 1798: reserved -->
<!-- v4-doc-line 1799: reserved -->
<!-- v4-doc-line 1800: reserved -->
<!-- v4-doc-line 1801: reserved -->
<!-- v4-doc-line 1802: reserved -->
<!-- v4-doc-line 1803: reserved -->
<!-- v4-doc-line 1804: reserved -->
<!-- v4-doc-line 1805: reserved -->
<!-- v4-doc-line 1806: reserved -->
<!-- v4-doc-line 1807: reserved -->
<!-- v4-doc-line 1808: reserved -->
<!-- v4-doc-line 1809: reserved -->
<!-- v4-doc-line 1810: reserved -->
<!-- v4-doc-line 1811: reserved -->
<!-- v4-doc-line 1812: reserved -->
<!-- v4-doc-line 1813: reserved -->
<!-- v4-doc-line 1814: reserved -->
<!-- v4-doc-line 1815: reserved -->
<!-- v4-doc-line 1816: reserved -->
<!-- v4-doc-line 1817: reserved -->
<!-- v4-doc-line 1818: reserved -->
<!-- v4-doc-line 1819: reserved -->
<!-- v4-doc-line 1820: reserved -->
<!-- v4-doc-line 1821: reserved -->
<!-- v4-doc-line 1822: reserved -->
<!-- v4-doc-line 1823: reserved -->
<!-- v4-doc-line 1824: reserved -->
<!-- v4-doc-line 1825: reserved -->
<!-- v4-doc-line 1826: reserved -->
<!-- v4-doc-line 1827: reserved -->
<!-- v4-doc-line 1828: reserved -->
<!-- v4-doc-line 1829: reserved -->
<!-- v4-doc-line 1830: reserved -->
<!-- v4-doc-line 1831: reserved -->
<!-- v4-doc-line 1832: reserved -->
<!-- v4-doc-line 1833: reserved -->
<!-- v4-doc-line 1834: reserved -->
<!-- v4-doc-line 1835: reserved -->
<!-- v4-doc-line 1836: reserved -->
<!-- v4-doc-line 1837: reserved -->
<!-- v4-doc-line 1838: reserved -->
<!-- v4-doc-line 1839: reserved -->
<!-- v4-doc-line 1840: reserved -->
<!-- v4-doc-line 1841: reserved -->
<!-- v4-doc-line 1842: reserved -->
<!-- v4-doc-line 1843: reserved -->
<!-- v4-doc-line 1844: reserved -->
<!-- v4-doc-line 1845: reserved -->
<!-- v4-doc-line 1846: reserved -->
<!-- v4-doc-line 1847: reserved -->
<!-- v4-doc-line 1848: reserved -->
<!-- v4-doc-line 1849: reserved -->
<!-- v4-doc-line 1850: reserved -->
<!-- v4-doc-line 1851: reserved -->
<!-- v4-doc-line 1852: reserved -->
<!-- v4-doc-line 1853: reserved -->
<!-- v4-doc-line 1854: reserved -->
<!-- v4-doc-line 1855: reserved -->
<!-- v4-doc-line 1856: reserved -->
<!-- v4-doc-line 1857: reserved -->
<!-- v4-doc-line 1858: reserved -->
<!-- v4-doc-line 1859: reserved -->
<!-- v4-doc-line 1860: reserved -->
<!-- v4-doc-line 1861: reserved -->
<!-- v4-doc-line 1862: reserved -->
<!-- v4-doc-line 1863: reserved -->
<!-- v4-doc-line 1864: reserved -->
<!-- v4-doc-line 1865: reserved -->
<!-- v4-doc-line 1866: reserved -->
<!-- v4-doc-line 1867: reserved -->
<!-- v4-doc-line 1868: reserved -->
<!-- v4-doc-line 1869: reserved -->
<!-- v4-doc-line 1870: reserved -->
<!-- v4-doc-line 1871: reserved -->
<!-- v4-doc-line 1872: reserved -->
<!-- v4-doc-line 1873: reserved -->
<!-- v4-doc-line 1874: reserved -->
<!-- v4-doc-line 1875: reserved -->
<!-- v4-doc-line 1876: reserved -->
<!-- v4-doc-line 1877: reserved -->
<!-- v4-doc-line 1878: reserved -->
<!-- v4-doc-line 1879: reserved -->
<!-- v4-doc-line 1880: reserved -->
<!-- v4-doc-line 1881: reserved -->
<!-- v4-doc-line 1882: reserved -->
<!-- v4-doc-line 1883: reserved -->
<!-- v4-doc-line 1884: reserved -->
<!-- v4-doc-line 1885: reserved -->
<!-- v4-doc-line 1886: reserved -->
<!-- v4-doc-line 1887: reserved -->
<!-- v4-doc-line 1888: reserved -->
<!-- v4-doc-line 1889: reserved -->
<!-- v4-doc-line 1890: reserved -->
<!-- v4-doc-line 1891: reserved -->
<!-- v4-doc-line 1892: reserved -->
<!-- v4-doc-line 1893: reserved -->
<!-- v4-doc-line 1894: reserved -->
<!-- v4-doc-line 1895: reserved -->
<!-- v4-doc-line 1896: reserved -->
<!-- v4-doc-line 1897: reserved -->
<!-- v4-doc-line 1898: reserved -->
<!-- v4-doc-line 1899: reserved -->
<!-- v4-doc-line 1900: reserved -->
<!-- v4-doc-line 1901: reserved -->
<!-- v4-doc-line 1902: reserved -->
<!-- v4-doc-line 1903: reserved -->
<!-- v4-doc-line 1904: reserved -->
<!-- v4-doc-line 1905: reserved -->
<!-- v4-doc-line 1906: reserved -->
<!-- v4-doc-line 1907: reserved -->
<!-- v4-doc-line 1908: reserved -->
<!-- v4-doc-line 1909: reserved -->
<!-- v4-doc-line 1910: reserved -->
<!-- v4-doc-line 1911: reserved -->
<!-- v4-doc-line 1912: reserved -->
<!-- v4-doc-line 1913: reserved -->
<!-- v4-doc-line 1914: reserved -->
<!-- v4-doc-line 1915: reserved -->
<!-- v4-doc-line 1916: reserved -->
<!-- v4-doc-line 1917: reserved -->
<!-- v4-doc-line 1918: reserved -->
<!-- v4-doc-line 1919: reserved -->
<!-- v4-doc-line 1920: reserved -->
<!-- v4-doc-line 1921: reserved -->
<!-- v4-doc-line 1922: reserved -->
<!-- v4-doc-line 1923: reserved -->
<!-- v4-doc-line 1924: reserved -->
<!-- v4-doc-line 1925: reserved -->
<!-- v4-doc-line 1926: reserved -->
<!-- v4-doc-line 1927: reserved -->
<!-- v4-doc-line 1928: reserved -->
<!-- v4-doc-line 1929: reserved -->
<!-- v4-doc-line 1930: reserved -->
<!-- v4-doc-line 1931: reserved -->
<!-- v4-doc-line 1932: reserved -->
<!-- v4-doc-line 1933: reserved -->
<!-- v4-doc-line 1934: reserved -->
<!-- v4-doc-line 1935: reserved -->
<!-- v4-doc-line 1936: reserved -->
<!-- v4-doc-line 1937: reserved -->
<!-- v4-doc-line 1938: reserved -->
<!-- v4-doc-line 1939: reserved -->
<!-- v4-doc-line 1940: reserved -->
<!-- v4-doc-line 1941: reserved -->
<!-- v4-doc-line 1942: reserved -->
<!-- v4-doc-line 1943: reserved -->
<!-- v4-doc-line 1944: reserved -->
<!-- v4-doc-line 1945: reserved -->
<!-- v4-doc-line 1946: reserved -->
<!-- v4-doc-line 1947: reserved -->
<!-- v4-doc-line 1948: reserved -->
<!-- v4-doc-line 1949: reserved -->
<!-- v4-doc-line 1950: reserved -->
<!-- v4-doc-line 1951: reserved -->
<!-- v4-doc-line 1952: reserved -->
<!-- v4-doc-line 1953: reserved -->
<!-- v4-doc-line 1954: reserved -->
<!-- v4-doc-line 1955: reserved -->
<!-- v4-doc-line 1956: reserved -->
<!-- v4-doc-line 1957: reserved -->
<!-- v4-doc-line 1958: reserved -->
<!-- v4-doc-line 1959: reserved -->
<!-- v4-doc-line 1960: reserved -->
<!-- v4-doc-line 1961: reserved -->
<!-- v4-doc-line 1962: reserved -->
<!-- v4-doc-line 1963: reserved -->
<!-- v4-doc-line 1964: reserved -->
<!-- v4-doc-line 1965: reserved -->
<!-- v4-doc-line 1966: reserved -->
<!-- v4-doc-line 1967: reserved -->
<!-- v4-doc-line 1968: reserved -->
<!-- v4-doc-line 1969: reserved -->
<!-- v4-doc-line 1970: reserved -->
<!-- v4-doc-line 1971: reserved -->
<!-- v4-doc-line 1972: reserved -->
<!-- v4-doc-line 1973: reserved -->
<!-- v4-doc-line 1974: reserved -->
<!-- v4-doc-line 1975: reserved -->
<!-- v4-doc-line 1976: reserved -->
<!-- v4-doc-line 1977: reserved -->
<!-- v4-doc-line 1978: reserved -->
<!-- v4-doc-line 1979: reserved -->
<!-- v4-doc-line 1980: reserved -->
<!-- v4-doc-line 1981: reserved -->
<!-- v4-doc-line 1982: reserved -->
<!-- v4-doc-line 1983: reserved -->
<!-- v4-doc-line 1984: reserved -->
<!-- v4-doc-line 1985: reserved -->
<!-- v4-doc-line 1986: reserved -->
<!-- v4-doc-line 1987: reserved -->
<!-- v4-doc-line 1988: reserved -->
<!-- v4-doc-line 1989: reserved -->
<!-- v4-doc-line 1990: reserved -->
<!-- v4-doc-line 1991: reserved -->
<!-- v4-doc-line 1992: reserved -->
<!-- v4-doc-line 1993: reserved -->
<!-- v4-doc-line 1994: reserved -->
<!-- v4-doc-line 1995: reserved -->
<!-- v4-doc-line 1996: reserved -->
<!-- v4-doc-line 1997: reserved -->
<!-- v4-doc-line 1998: reserved -->
<!-- v4-doc-line 1999: reserved -->
<!-- v4-doc-line 2000: reserved -->
<!-- v4-doc-line 2001: reserved -->
<!-- v4-doc-line 2002: reserved -->
<!-- v4-doc-line 2003: reserved -->
<!-- v4-doc-line 2004: reserved -->
<!-- v4-doc-line 2005: reserved -->
<!-- v4-doc-line 2006: reserved -->
<!-- v4-doc-line 2007: reserved -->
<!-- v4-doc-line 2008: reserved -->
<!-- v4-doc-line 2009: reserved -->
<!-- v4-doc-line 2010: reserved -->
<!-- v4-doc-line 2011: reserved -->
<!-- v4-doc-line 2012: reserved -->
<!-- v4-doc-line 2013: reserved -->
<!-- v4-doc-line 2014: reserved -->
<!-- v4-doc-line 2015: reserved -->
<!-- v4-doc-line 2016: reserved -->
<!-- v4-doc-line 2017: reserved -->
<!-- v4-doc-line 2018: reserved -->
<!-- v4-doc-line 2019: reserved -->
<!-- v4-doc-line 2020: reserved -->
<!-- v4-doc-line 2021: reserved -->
<!-- v4-doc-line 2022: reserved -->
<!-- v4-doc-line 2023: reserved -->
<!-- v4-doc-line 2024: reserved -->
<!-- v4-doc-line 2025: reserved -->
<!-- v4-doc-line 2026: reserved -->
<!-- v4-doc-line 2027: reserved -->
<!-- v4-doc-line 2028: reserved -->
<!-- v4-doc-line 2029: reserved -->
<!-- v4-doc-line 2030: reserved -->
<!-- v4-doc-line 2031: reserved -->
<!-- v4-doc-line 2032: reserved -->
<!-- v4-doc-line 2033: reserved -->
<!-- v4-doc-line 2034: reserved -->
<!-- v4-doc-line 2035: reserved -->
<!-- v4-doc-line 2036: reserved -->
<!-- v4-doc-line 2037: reserved -->
<!-- v4-doc-line 2038: reserved -->
<!-- v4-doc-line 2039: reserved -->
<!-- v4-doc-line 2040: reserved -->
<!-- v4-doc-line 2041: reserved -->
<!-- v4-doc-line 2042: reserved -->
<!-- v4-doc-line 2043: reserved -->
<!-- v4-doc-line 2044: reserved -->
<!-- v4-doc-line 2045: reserved -->
<!-- v4-doc-line 2046: reserved -->
<!-- v4-doc-line 2047: reserved -->
<!-- v4-doc-line 2048: reserved -->
<!-- v4-doc-line 2049: reserved -->
<!-- v4-doc-line 2050: reserved -->
<!-- v4-doc-line 2051: reserved -->
<!-- v4-doc-line 2052: reserved -->
<!-- v4-doc-line 2053: reserved -->
<!-- v4-doc-line 2054: reserved -->
<!-- v4-doc-line 2055: reserved -->
<!-- v4-doc-line 2056: reserved -->
<!-- v4-doc-line 2057: reserved -->
<!-- v4-doc-line 2058: reserved -->
<!-- v4-doc-line 2059: reserved -->
<!-- v4-doc-line 2060: reserved -->
<!-- v4-doc-line 2061: reserved -->
<!-- v4-doc-line 2062: reserved -->
<!-- v4-doc-line 2063: reserved -->
<!-- v4-doc-line 2064: reserved -->
<!-- v4-doc-line 2065: reserved -->
<!-- v4-doc-line 2066: reserved -->
<!-- v4-doc-line 2067: reserved -->
<!-- v4-doc-line 2068: reserved -->
<!-- v4-doc-line 2069: reserved -->
<!-- v4-doc-line 2070: reserved -->
<!-- v4-doc-line 2071: reserved -->
<!-- v4-doc-line 2072: reserved -->
<!-- v4-doc-line 2073: reserved -->
<!-- v4-doc-line 2074: reserved -->
<!-- v4-doc-line 2075: reserved -->
<!-- v4-doc-line 2076: reserved -->
<!-- v4-doc-line 2077: reserved -->
<!-- v4-doc-line 2078: reserved -->
<!-- v4-doc-line 2079: reserved -->
<!-- v4-doc-line 2080: reserved -->
<!-- v4-doc-line 2081: reserved -->
<!-- v4-doc-line 2082: reserved -->
<!-- v4-doc-line 2083: reserved -->
<!-- v4-doc-line 2084: reserved -->
<!-- v4-doc-line 2085: reserved -->
<!-- v4-doc-line 2086: reserved -->
<!-- v4-doc-line 2087: reserved -->
<!-- v4-doc-line 2088: reserved -->
<!-- v4-doc-line 2089: reserved -->
<!-- v4-doc-line 2090: reserved -->
<!-- v4-doc-line 2091: reserved -->
<!-- v4-doc-line 2092: reserved -->
<!-- v4-doc-line 2093: reserved -->
<!-- v4-doc-line 2094: reserved -->
<!-- v4-doc-line 2095: reserved -->
<!-- v4-doc-line 2096: reserved -->
<!-- v4-doc-line 2097: reserved -->
<!-- v4-doc-line 2098: reserved -->
<!-- v4-doc-line 2099: reserved -->
<!-- v4-doc-line 2100: reserved -->
<!-- v4-doc-line 2101: reserved -->
<!-- v4-doc-line 2102: reserved -->
<!-- v4-doc-line 2103: reserved -->
<!-- v4-doc-line 2104: reserved -->
<!-- v4-doc-line 2105: reserved -->
<!-- v4-doc-line 2106: reserved -->
<!-- v4-doc-line 2107: reserved -->
<!-- v4-doc-line 2108: reserved -->
<!-- v4-doc-line 2109: reserved -->
<!-- v4-doc-line 2110: reserved -->
<!-- v4-doc-line 2111: reserved -->
<!-- v4-doc-line 2112: reserved -->
<!-- v4-doc-line 2113: reserved -->
<!-- v4-doc-line 2114: reserved -->
<!-- v4-doc-line 2115: reserved -->
<!-- v4-doc-line 2116: reserved -->
<!-- v4-doc-line 2117: reserved -->
<!-- v4-doc-line 2118: reserved -->
<!-- v4-doc-line 2119: reserved -->
<!-- v4-doc-line 2120: reserved -->
<!-- v4-doc-line 2121: reserved -->
<!-- v4-doc-line 2122: reserved -->
<!-- v4-doc-line 2123: reserved -->
<!-- v4-doc-line 2124: reserved -->
<!-- v4-doc-line 2125: reserved -->
<!-- v4-doc-line 2126: reserved -->
<!-- v4-doc-line 2127: reserved -->
<!-- v4-doc-line 2128: reserved -->
<!-- v4-doc-line 2129: reserved -->
<!-- v4-doc-line 2130: reserved -->
<!-- v4-doc-line 2131: reserved -->
<!-- v4-doc-line 2132: reserved -->
<!-- v4-doc-line 2133: reserved -->
<!-- v4-doc-line 2134: reserved -->
<!-- v4-doc-line 2135: reserved -->
<!-- v4-doc-line 2136: reserved -->
<!-- v4-doc-line 2137: reserved -->
<!-- v4-doc-line 2138: reserved -->
<!-- v4-doc-line 2139: reserved -->
<!-- v4-doc-line 2140: reserved -->
<!-- v4-doc-line 2141: reserved -->
<!-- v4-doc-line 2142: reserved -->
<!-- v4-doc-line 2143: reserved -->
<!-- v4-doc-line 2144: reserved -->
<!-- v4-doc-line 2145: reserved -->
<!-- v4-doc-line 2146: reserved -->
<!-- v4-doc-line 2147: reserved -->
<!-- v4-doc-line 2148: reserved -->
<!-- v4-doc-line 2149: reserved -->
<!-- v4-doc-line 2150: reserved -->
<!-- v4-doc-line 2151: reserved -->
<!-- v4-doc-line 2152: reserved -->
<!-- v4-doc-line 2153: reserved -->
<!-- v4-doc-line 2154: reserved -->
<!-- v4-doc-line 2155: reserved -->
<!-- v4-doc-line 2156: reserved -->
<!-- v4-doc-line 2157: reserved -->
<!-- v4-doc-line 2158: reserved -->
<!-- v4-doc-line 2159: reserved -->
<!-- v4-doc-line 2160: reserved -->
<!-- v4-doc-line 2161: reserved -->
<!-- v4-doc-line 2162: reserved -->
<!-- v4-doc-line 2163: reserved -->
<!-- v4-doc-line 2164: reserved -->
<!-- v4-doc-line 2165: reserved -->
<!-- v4-doc-line 2166: reserved -->
<!-- v4-doc-line 2167: reserved -->
<!-- v4-doc-line 2168: reserved -->
<!-- v4-doc-line 2169: reserved -->
<!-- v4-doc-line 2170: reserved -->
<!-- v4-doc-line 2171: reserved -->
<!-- v4-doc-line 2172: reserved -->
<!-- v4-doc-line 2173: reserved -->
<!-- v4-doc-line 2174: reserved -->
<!-- v4-doc-line 2175: reserved -->
<!-- v4-doc-line 2176: reserved -->
<!-- v4-doc-line 2177: reserved -->
<!-- v4-doc-line 2178: reserved -->
<!-- v4-doc-line 2179: reserved -->
<!-- v4-doc-line 2180: reserved -->
<!-- v4-doc-line 2181: reserved -->
<!-- v4-doc-line 2182: reserved -->
<!-- v4-doc-line 2183: reserved -->
<!-- v4-doc-line 2184: reserved -->
<!-- v4-doc-line 2185: reserved -->
<!-- v4-doc-line 2186: reserved -->
<!-- v4-doc-line 2187: reserved -->
<!-- v4-doc-line 2188: reserved -->
<!-- v4-doc-line 2189: reserved -->
<!-- v4-doc-line 2190: reserved -->
<!-- v4-doc-line 2191: reserved -->
<!-- v4-doc-line 2192: reserved -->
<!-- v4-doc-line 2193: reserved -->
<!-- v4-doc-line 2194: reserved -->
<!-- v4-doc-line 2195: reserved -->
<!-- v4-doc-line 2196: reserved -->
<!-- v4-doc-line 2197: reserved -->
<!-- v4-doc-line 2198: reserved -->
<!-- v4-doc-line 2199: reserved -->
<!-- v4-doc-line 2200: reserved -->
<!-- v4-doc-line 2201: reserved -->
<!-- v4-doc-line 2202: reserved -->
<!-- v4-doc-line 2203: reserved -->
<!-- v4-doc-line 2204: reserved -->
<!-- v4-doc-line 2205: reserved -->
<!-- v4-doc-line 2206: reserved -->
<!-- v4-doc-line 2207: reserved -->
<!-- v4-doc-line 2208: reserved -->
<!-- v4-doc-line 2209: reserved -->
<!-- v4-doc-line 2210: reserved -->
<!-- v4-doc-line 2211: reserved -->
<!-- v4-doc-line 2212: reserved -->
<!-- v4-doc-line 2213: reserved -->
<!-- v4-doc-line 2214: reserved -->
<!-- v4-doc-line 2215: reserved -->
<!-- v4-doc-line 2216: reserved -->
<!-- v4-doc-line 2217: reserved -->
<!-- v4-doc-line 2218: reserved -->
<!-- v4-doc-line 2219: reserved -->
<!-- v4-doc-line 2220: reserved -->
<!-- v4-doc-line 2221: reserved -->
<!-- v4-doc-line 2222: reserved -->
<!-- v4-doc-line 2223: reserved -->
<!-- v4-doc-line 2224: reserved -->
<!-- v4-doc-line 2225: reserved -->
<!-- v4-doc-line 2226: reserved -->
<!-- v4-doc-line 2227: reserved -->
<!-- v4-doc-line 2228: reserved -->
<!-- v4-doc-line 2229: reserved -->
<!-- v4-doc-line 2230: reserved -->
<!-- v4-doc-line 2231: reserved -->
<!-- v4-doc-line 2232: reserved -->
<!-- v4-doc-line 2233: reserved -->
<!-- v4-doc-line 2234: reserved -->
<!-- v4-doc-line 2235: reserved -->
<!-- v4-doc-line 2236: reserved -->
<!-- v4-doc-line 2237: reserved -->
<!-- v4-doc-line 2238: reserved -->
<!-- v4-doc-line 2239: reserved -->
<!-- v4-doc-line 2240: reserved -->
<!-- v4-doc-line 2241: reserved -->
<!-- v4-doc-line 2242: reserved -->
<!-- v4-doc-line 2243: reserved -->
<!-- v4-doc-line 2244: reserved -->
<!-- v4-doc-line 2245: reserved -->
<!-- v4-doc-line 2246: reserved -->
<!-- v4-doc-line 2247: reserved -->
<!-- v4-doc-line 2248: reserved -->
<!-- v4-doc-line 2249: reserved -->
<!-- v4-doc-line 2250: reserved -->
<!-- v4-doc-line 2251: reserved -->
<!-- v4-doc-line 2252: reserved -->
<!-- v4-doc-line 2253: reserved -->
<!-- v4-doc-line 2254: reserved -->
<!-- v4-doc-line 2255: reserved -->
<!-- v4-doc-line 2256: reserved -->
<!-- v4-doc-line 2257: reserved -->
<!-- v4-doc-line 2258: reserved -->
<!-- v4-doc-line 2259: reserved -->
<!-- v4-doc-line 2260: reserved -->
<!-- v4-doc-line 2261: reserved -->
<!-- v4-doc-line 2262: reserved -->
<!-- v4-doc-line 2263: reserved -->
<!-- v4-doc-line 2264: reserved -->
<!-- v4-doc-line 2265: reserved -->
<!-- v4-doc-line 2266: reserved -->
<!-- v4-doc-line 2267: reserved -->
<!-- v4-doc-line 2268: reserved -->
<!-- v4-doc-line 2269: reserved -->
<!-- v4-doc-line 2270: reserved -->
<!-- v4-doc-line 2271: reserved -->
<!-- v4-doc-line 2272: reserved -->
<!-- v4-doc-line 2273: reserved -->
<!-- v4-doc-line 2274: reserved -->
<!-- v4-doc-line 2275: reserved -->
<!-- v4-doc-line 2276: reserved -->
<!-- v4-doc-line 2277: reserved -->
<!-- v4-doc-line 2278: reserved -->
<!-- v4-doc-line 2279: reserved -->
<!-- v4-doc-line 2280: reserved -->
<!-- v4-doc-line 2281: reserved -->
<!-- v4-doc-line 2282: reserved -->
<!-- v4-doc-line 2283: reserved -->
<!-- v4-doc-line 2284: reserved -->
<!-- v4-doc-line 2285: reserved -->
<!-- v4-doc-line 2286: reserved -->
<!-- v4-doc-line 2287: reserved -->
<!-- v4-doc-line 2288: reserved -->
<!-- v4-doc-line 2289: reserved -->
<!-- v4-doc-line 2290: reserved -->
<!-- v4-doc-line 2291: reserved -->
<!-- v4-doc-line 2292: reserved -->
<!-- v4-doc-line 2293: reserved -->
<!-- v4-doc-line 2294: reserved -->
<!-- v4-doc-line 2295: reserved -->
<!-- v4-doc-line 2296: reserved -->
<!-- v4-doc-line 2297: reserved -->
<!-- v4-doc-line 2298: reserved -->
<!-- v4-doc-line 2299: reserved -->
<!-- v4-doc-line 2300: reserved -->
<!-- v4-doc-line 2301: reserved -->
<!-- v4-doc-line 2302: reserved -->
<!-- v4-doc-line 2303: reserved -->
<!-- v4-doc-line 2304: reserved -->
<!-- v4-doc-line 2305: reserved -->
<!-- v4-doc-line 2306: reserved -->
<!-- v4-doc-line 2307: reserved -->
<!-- v4-doc-line 2308: reserved -->
<!-- v4-doc-line 2309: reserved -->
<!-- v4-doc-line 2310: reserved -->
<!-- v4-doc-line 2311: reserved -->
<!-- v4-doc-line 2312: reserved -->
<!-- v4-doc-line 2313: reserved -->
<!-- v4-doc-line 2314: reserved -->
<!-- v4-doc-line 2315: reserved -->
<!-- v4-doc-line 2316: reserved -->
<!-- v4-doc-line 2317: reserved -->
<!-- v4-doc-line 2318: reserved -->
<!-- v4-doc-line 2319: reserved -->
<!-- v4-doc-line 2320: reserved -->
<!-- v4-doc-line 2321: reserved -->
<!-- v4-doc-line 2322: reserved -->
<!-- v4-doc-line 2323: reserved -->
<!-- v4-doc-line 2324: reserved -->
<!-- v4-doc-line 2325: reserved -->
<!-- v4-doc-line 2326: reserved -->
<!-- v4-doc-line 2327: reserved -->
<!-- v4-doc-line 2328: reserved -->
<!-- v4-doc-line 2329: reserved -->
<!-- v4-doc-line 2330: reserved -->
<!-- v4-doc-line 2331: reserved -->
<!-- v4-doc-line 2332: reserved -->
<!-- v4-doc-line 2333: reserved -->
<!-- v4-doc-line 2334: reserved -->
<!-- v4-doc-line 2335: reserved -->
<!-- v4-doc-line 2336: reserved -->
<!-- v4-doc-line 2337: reserved -->
<!-- v4-doc-line 2338: reserved -->
<!-- v4-doc-line 2339: reserved -->
<!-- v4-doc-line 2340: reserved -->
<!-- v4-doc-line 2341: reserved -->
<!-- v4-doc-line 2342: reserved -->
<!-- v4-doc-line 2343: reserved -->
<!-- v4-doc-line 2344: reserved -->
<!-- v4-doc-line 2345: reserved -->
<!-- v4-doc-line 2346: reserved -->
<!-- v4-doc-line 2347: reserved -->
<!-- v4-doc-line 2348: reserved -->
<!-- v4-doc-line 2349: reserved -->
<!-- v4-doc-line 2350: reserved -->
<!-- v4-doc-line 2351: reserved -->
<!-- v4-doc-line 2352: reserved -->
<!-- v4-doc-line 2353: reserved -->
<!-- v4-doc-line 2354: reserved -->
<!-- v4-doc-line 2355: reserved -->
<!-- v4-doc-line 2356: reserved -->
<!-- v4-doc-line 2357: reserved -->
<!-- v4-doc-line 2358: reserved -->
<!-- v4-doc-line 2359: reserved -->
<!-- v4-doc-line 2360: reserved -->
<!-- v4-doc-line 2361: reserved -->
<!-- v4-doc-line 2362: reserved -->
<!-- v4-doc-line 2363: reserved -->
<!-- v4-doc-line 2364: reserved -->
<!-- v4-doc-line 2365: reserved -->
<!-- v4-doc-line 2366: reserved -->
<!-- v4-doc-line 2367: reserved -->
<!-- v4-doc-line 2368: reserved -->
<!-- v4-doc-line 2369: reserved -->
<!-- v4-doc-line 2370: reserved -->
<!-- v4-doc-line 2371: reserved -->
<!-- v4-doc-line 2372: reserved -->
<!-- v4-doc-line 2373: reserved -->
<!-- v4-doc-line 2374: reserved -->
<!-- v4-doc-line 2375: reserved -->
<!-- v4-doc-line 2376: reserved -->
<!-- v4-doc-line 2377: reserved -->
<!-- v4-doc-line 2378: reserved -->
<!-- v4-doc-line 2379: reserved -->
<!-- v4-doc-line 2380: reserved -->
<!-- v4-doc-line 2381: reserved -->
<!-- v4-doc-line 2382: reserved -->
<!-- v4-doc-line 2383: reserved -->
<!-- v4-doc-line 2384: reserved -->
<!-- v4-doc-line 2385: reserved -->
<!-- v4-doc-line 2386: reserved -->
<!-- v4-doc-line 2387: reserved -->
<!-- v4-doc-line 2388: reserved -->
<!-- v4-doc-line 2389: reserved -->
<!-- v4-doc-line 2390: reserved -->
<!-- v4-doc-line 2391: reserved -->
<!-- v4-doc-line 2392: reserved -->
<!-- v4-doc-line 2393: reserved -->
<!-- v4-doc-line 2394: reserved -->
<!-- v4-doc-line 2395: reserved -->
<!-- v4-doc-line 2396: reserved -->
<!-- v4-doc-line 2397: reserved -->
<!-- v4-doc-line 2398: reserved -->
<!-- v4-doc-line 2399: reserved -->
<!-- v4-doc-line 2400: reserved -->
<!-- v4-doc-line 2401: reserved -->
<!-- v4-doc-line 2402: reserved -->
<!-- v4-doc-line 2403: reserved -->
<!-- v4-doc-line 2404: reserved -->
<!-- v4-doc-line 2405: reserved -->
<!-- v4-doc-line 2406: reserved -->
<!-- v4-doc-line 2407: reserved -->
<!-- v4-doc-line 2408: reserved -->
<!-- v4-doc-line 2409: reserved -->
<!-- v4-doc-line 2410: reserved -->
<!-- v4-doc-line 2411: reserved -->
<!-- v4-doc-line 2412: reserved -->
<!-- v4-doc-line 2413: reserved -->
<!-- v4-doc-line 2414: reserved -->
<!-- v4-doc-line 2415: reserved -->
<!-- v4-doc-line 2416: reserved -->
<!-- v4-doc-line 2417: reserved -->
<!-- v4-doc-line 2418: reserved -->
<!-- v4-doc-line 2419: reserved -->
<!-- v4-doc-line 2420: reserved -->
<!-- v4-doc-line 2421: reserved -->
<!-- v4-doc-line 2422: reserved -->
<!-- v4-doc-line 2423: reserved -->
<!-- v4-doc-line 2424: reserved -->
<!-- v4-doc-line 2425: reserved -->
<!-- v4-doc-line 2426: reserved -->
<!-- v4-doc-line 2427: reserved -->
<!-- v4-doc-line 2428: reserved -->
<!-- v4-doc-line 2429: reserved -->
<!-- v4-doc-line 2430: reserved -->
<!-- v4-doc-line 2431: reserved -->
<!-- v4-doc-line 2432: reserved -->
<!-- v4-doc-line 2433: reserved -->
<!-- v4-doc-line 2434: reserved -->
<!-- v4-doc-line 2435: reserved -->
<!-- v4-doc-line 2436: reserved -->
<!-- v4-doc-line 2437: reserved -->
<!-- v4-doc-line 2438: reserved -->
<!-- v4-doc-line 2439: reserved -->
<!-- v4-doc-line 2440: reserved -->
<!-- v4-doc-line 2441: reserved -->
<!-- v4-doc-line 2442: reserved -->
<!-- v4-doc-line 2443: reserved -->
<!-- v4-doc-line 2444: reserved -->
<!-- v4-doc-line 2445: reserved -->
<!-- v4-doc-line 2446: reserved -->
<!-- v4-doc-line 2447: reserved -->
<!-- v4-doc-line 2448: reserved -->
<!-- v4-doc-line 2449: reserved -->
<!-- v4-doc-line 2450: reserved -->
<!-- v4-doc-line 2451: reserved -->
<!-- v4-doc-line 2452: reserved -->
<!-- v4-doc-line 2453: reserved -->
<!-- v4-doc-line 2454: reserved -->
<!-- v4-doc-line 2455: reserved -->
<!-- v4-doc-line 2456: reserved -->
<!-- v4-doc-line 2457: reserved -->
<!-- v4-doc-line 2458: reserved -->
<!-- v4-doc-line 2459: reserved -->
<!-- v4-doc-line 2460: reserved -->
<!-- v4-doc-line 2461: reserved -->
<!-- v4-doc-line 2462: reserved -->
<!-- v4-doc-line 2463: reserved -->
<!-- v4-doc-line 2464: reserved -->
<!-- v4-doc-line 2465: reserved -->
<!-- v4-doc-line 2466: reserved -->
<!-- v4-doc-line 2467: reserved -->
<!-- v4-doc-line 2468: reserved -->
<!-- v4-doc-line 2469: reserved -->
<!-- v4-doc-line 2470: reserved -->
<!-- v4-doc-line 2471: reserved -->
<!-- v4-doc-line 2472: reserved -->
<!-- v4-doc-line 2473: reserved -->
<!-- v4-doc-line 2474: reserved -->
<!-- v4-doc-line 2475: reserved -->
<!-- v4-doc-line 2476: reserved -->
<!-- v4-doc-line 2477: reserved -->
<!-- v4-doc-line 2478: reserved -->
<!-- v4-doc-line 2479: reserved -->
<!-- v4-doc-line 2480: reserved -->
<!-- v4-doc-line 2481: reserved -->
<!-- v4-doc-line 2482: reserved -->
<!-- v4-doc-line 2483: reserved -->
<!-- v4-doc-line 2484: reserved -->
<!-- v4-doc-line 2485: reserved -->
<!-- v4-doc-line 2486: reserved -->
<!-- v4-doc-line 2487: reserved -->
<!-- v4-doc-line 2488: reserved -->
<!-- v4-doc-line 2489: reserved -->
<!-- v4-doc-line 2490: reserved -->
<!-- v4-doc-line 2491: reserved -->
<!-- v4-doc-line 2492: reserved -->
<!-- v4-doc-line 2493: reserved -->
<!-- v4-doc-line 2494: reserved -->
<!-- v4-doc-line 2495: reserved -->
<!-- v4-doc-line 2496: reserved -->
<!-- v4-doc-line 2497: reserved -->
<!-- v4-doc-line 2498: reserved -->
<!-- v4-doc-line 2499: reserved -->
<!-- v4-doc-line 2500: reserved -->
<!-- v4-doc-line 2501: reserved -->
<!-- v4-doc-line 2502: reserved -->
<!-- v4-doc-line 2503: reserved -->
<!-- v4-doc-line 2504: reserved -->
<!-- v4-doc-line 2505: reserved -->
<!-- v4-doc-line 2506: reserved -->
<!-- v4-doc-line 2507: reserved -->
<!-- v4-doc-line 2508: reserved -->
<!-- v4-doc-line 2509: reserved -->
<!-- v4-doc-line 2510: reserved -->
<!-- v4-doc-line 2511: reserved -->
<!-- v4-doc-line 2512: reserved -->
<!-- v4-doc-line 2513: reserved -->
<!-- v4-doc-line 2514: reserved -->
<!-- v4-doc-line 2515: reserved -->
<!-- v4-doc-line 2516: reserved -->
<!-- v4-doc-line 2517: reserved -->
<!-- v4-doc-line 2518: reserved -->
<!-- v4-doc-line 2519: reserved -->
<!-- v4-doc-line 2520: reserved -->
<!-- v4-doc-line 2521: reserved -->
<!-- v4-doc-line 2522: reserved -->
<!-- v4-doc-line 2523: reserved -->
<!-- v4-doc-line 2524: reserved -->
<!-- v4-doc-line 2525: reserved -->
<!-- v4-doc-line 2526: reserved -->
<!-- v4-doc-line 2527: reserved -->
<!-- v4-doc-line 2528: reserved -->
<!-- v4-doc-line 2529: reserved -->
<!-- v4-doc-line 2530: reserved -->
<!-- v4-doc-line 2531: reserved -->
<!-- v4-doc-line 2532: reserved -->
<!-- v4-doc-line 2533: reserved -->
<!-- v4-doc-line 2534: reserved -->
<!-- v4-doc-line 2535: reserved -->
<!-- v4-doc-line 2536: reserved -->
<!-- v4-doc-line 2537: reserved -->
<!-- v4-doc-line 2538: reserved -->
<!-- v4-doc-line 2539: reserved -->
<!-- v4-doc-line 2540: reserved -->
<!-- v4-doc-line 2541: reserved -->
<!-- v4-doc-line 2542: reserved -->
<!-- v4-doc-line 2543: reserved -->
<!-- v4-doc-line 2544: reserved -->
<!-- v4-doc-line 2545: reserved -->
<!-- v4-doc-line 2546: reserved -->
<!-- v4-doc-line 2547: reserved -->
<!-- v4-doc-line 2548: reserved -->
<!-- v4-doc-line 2549: reserved -->
<!-- v4-doc-line 2550: reserved -->
<!-- v4-doc-line 2551: reserved -->
<!-- v4-doc-line 2552: reserved -->
<!-- v4-doc-line 2553: reserved -->
<!-- v4-doc-line 2554: reserved -->
<!-- v4-doc-line 2555: reserved -->
<!-- v4-doc-line 2556: reserved -->
<!-- v4-doc-line 2557: reserved -->
<!-- v4-doc-line 2558: reserved -->
<!-- v4-doc-line 2559: reserved -->
<!-- v4-doc-line 2560: reserved -->
<!-- v4-doc-line 2561: reserved -->
<!-- v4-doc-line 2562: reserved -->
<!-- v4-doc-line 2563: reserved -->
<!-- v4-doc-line 2564: reserved -->
<!-- v4-doc-line 2565: reserved -->
<!-- v4-doc-line 2566: reserved -->
<!-- v4-doc-line 2567: reserved -->
<!-- v4-doc-line 2568: reserved -->
<!-- v4-doc-line 2569: reserved -->
<!-- v4-doc-line 2570: reserved -->
<!-- v4-doc-line 2571: reserved -->
<!-- v4-doc-line 2572: reserved -->
<!-- v4-doc-line 2573: reserved -->
<!-- v4-doc-line 2574: reserved -->
<!-- v4-doc-line 2575: reserved -->
<!-- v4-doc-line 2576: reserved -->
<!-- v4-doc-line 2577: reserved -->
<!-- v4-doc-line 2578: reserved -->
<!-- v4-doc-line 2579: reserved -->
<!-- v4-doc-line 2580: reserved -->
<!-- v4-doc-line 2581: reserved -->
<!-- v4-doc-line 2582: reserved -->
<!-- v4-doc-line 2583: reserved -->
<!-- v4-doc-line 2584: reserved -->
<!-- v4-doc-line 2585: reserved -->
<!-- v4-doc-line 2586: reserved -->
<!-- v4-doc-line 2587: reserved -->
<!-- v4-doc-line 2588: reserved -->
<!-- v4-doc-line 2589: reserved -->
<!-- v4-doc-line 2590: reserved -->
<!-- v4-doc-line 2591: reserved -->
<!-- v4-doc-line 2592: reserved -->
<!-- v4-doc-line 2593: reserved -->
<!-- v4-doc-line 2594: reserved -->
<!-- v4-doc-line 2595: reserved -->
<!-- v4-doc-line 2596: reserved -->
<!-- v4-doc-line 2597: reserved -->
<!-- v4-doc-line 2598: reserved -->
<!-- v4-doc-line 2599: reserved -->
<!-- v4-doc-line 2600: reserved -->
<!-- v4-doc-line 2601: reserved -->
<!-- v4-doc-line 2602: reserved -->
<!-- v4-doc-line 2603: reserved -->
<!-- v4-doc-line 2604: reserved -->
<!-- v4-doc-line 2605: reserved -->
<!-- v4-doc-line 2606: reserved -->
<!-- v4-doc-line 2607: reserved -->
<!-- v4-doc-line 2608: reserved -->
<!-- v4-doc-line 2609: reserved -->
<!-- v4-doc-line 2610: reserved -->
<!-- v4-doc-line 2611: reserved -->
<!-- v4-doc-line 2612: reserved -->
<!-- v4-doc-line 2613: reserved -->
<!-- v4-doc-line 2614: reserved -->
<!-- v4-doc-line 2615: reserved -->
<!-- v4-doc-line 2616: reserved -->
<!-- v4-doc-line 2617: reserved -->
<!-- v4-doc-line 2618: reserved -->
<!-- v4-doc-line 2619: reserved -->
<!-- v4-doc-line 2620: reserved -->
<!-- v4-doc-line 2621: reserved -->
<!-- v4-doc-line 2622: reserved -->
<!-- v4-doc-line 2623: reserved -->
<!-- v4-doc-line 2624: reserved -->
<!-- v4-doc-line 2625: reserved -->
<!-- v4-doc-line 2626: reserved -->
<!-- v4-doc-line 2627: reserved -->
<!-- v4-doc-line 2628: reserved -->
<!-- v4-doc-line 2629: reserved -->
<!-- v4-doc-line 2630: reserved -->
<!-- v4-doc-line 2631: reserved -->
<!-- v4-doc-line 2632: reserved -->
<!-- v4-doc-line 2633: reserved -->
<!-- v4-doc-line 2634: reserved -->
<!-- v4-doc-line 2635: reserved -->
<!-- v4-doc-line 2636: reserved -->
<!-- v4-doc-line 2637: reserved -->
<!-- v4-doc-line 2638: reserved -->
<!-- v4-doc-line 2639: reserved -->
<!-- v4-doc-line 2640: reserved -->
<!-- v4-doc-line 2641: reserved -->
<!-- v4-doc-line 2642: reserved -->
<!-- v4-doc-line 2643: reserved -->
<!-- v4-doc-line 2644: reserved -->
<!-- v4-doc-line 2645: reserved -->
<!-- v4-doc-line 2646: reserved -->
<!-- v4-doc-line 2647: reserved -->
<!-- v4-doc-line 2648: reserved -->
<!-- v4-doc-line 2649: reserved -->
<!-- v4-doc-line 2650: reserved -->
<!-- v4-doc-line 2651: reserved -->
<!-- v4-doc-line 2652: reserved -->
<!-- v4-doc-line 2653: reserved -->
<!-- v4-doc-line 2654: reserved -->
<!-- v4-doc-line 2655: reserved -->
<!-- v4-doc-line 2656: reserved -->
<!-- v4-doc-line 2657: reserved -->
<!-- v4-doc-line 2658: reserved -->
<!-- v4-doc-line 2659: reserved -->
<!-- v4-doc-line 2660: reserved -->
<!-- v4-doc-line 2661: reserved -->
<!-- v4-doc-line 2662: reserved -->
<!-- v4-doc-line 2663: reserved -->
<!-- v4-doc-line 2664: reserved -->
<!-- v4-doc-line 2665: reserved -->
<!-- v4-doc-line 2666: reserved -->
<!-- v4-doc-line 2667: reserved -->
<!-- v4-doc-line 2668: reserved -->
<!-- v4-doc-line 2669: reserved -->
<!-- v4-doc-line 2670: reserved -->
<!-- v4-doc-line 2671: reserved -->
<!-- v4-doc-line 2672: reserved -->
<!-- v4-doc-line 2673: reserved -->
<!-- v4-doc-line 2674: reserved -->
<!-- v4-doc-line 2675: reserved -->
<!-- v4-doc-line 2676: reserved -->
<!-- v4-doc-line 2677: reserved -->
<!-- v4-doc-line 2678: reserved -->
<!-- v4-doc-line 2679: reserved -->
<!-- v4-doc-line 2680: reserved -->
<!-- v4-doc-line 2681: reserved -->
<!-- v4-doc-line 2682: reserved -->
<!-- v4-doc-line 2683: reserved -->
<!-- v4-doc-line 2684: reserved -->
<!-- v4-doc-line 2685: reserved -->
<!-- v4-doc-line 2686: reserved -->
<!-- v4-doc-line 2687: reserved -->
<!-- v4-doc-line 2688: reserved -->
<!-- v4-doc-line 2689: reserved -->
<!-- v4-doc-line 2690: reserved -->
<!-- v4-doc-line 2691: reserved -->
<!-- v4-doc-line 2692: reserved -->
<!-- v4-doc-line 2693: reserved -->
<!-- v4-doc-line 2694: reserved -->
<!-- v4-doc-line 2695: reserved -->
<!-- v4-doc-line 2696: reserved -->
<!-- v4-doc-line 2697: reserved -->
<!-- v4-doc-line 2698: reserved -->
<!-- v4-doc-line 2699: reserved -->
<!-- v4-doc-line 2700: reserved -->
<!-- v4-doc-line 2701: reserved -->
<!-- v4-doc-line 2702: reserved -->
<!-- v4-doc-line 2703: reserved -->
<!-- v4-doc-line 2704: reserved -->
<!-- v4-doc-line 2705: reserved -->
<!-- v4-doc-line 2706: reserved -->
<!-- v4-doc-line 2707: reserved -->
<!-- v4-doc-line 2708: reserved -->
<!-- v4-doc-line 2709: reserved -->
<!-- v4-doc-line 2710: reserved -->
<!-- v4-doc-line 2711: reserved -->
<!-- v4-doc-line 2712: reserved -->
<!-- v4-doc-line 2713: reserved -->
<!-- v4-doc-line 2714: reserved -->
<!-- v4-doc-line 2715: reserved -->
<!-- v4-doc-line 2716: reserved -->
<!-- v4-doc-line 2717: reserved -->
<!-- v4-doc-line 2718: reserved -->
<!-- v4-doc-line 2719: reserved -->
<!-- v4-doc-line 2720: reserved -->
<!-- v4-doc-line 2721: reserved -->
<!-- v4-doc-line 2722: reserved -->
<!-- v4-doc-line 2723: reserved -->
<!-- v4-doc-line 2724: reserved -->
<!-- v4-doc-line 2725: reserved -->
<!-- v4-doc-line 2726: reserved -->
<!-- v4-doc-line 2727: reserved -->
<!-- v4-doc-line 2728: reserved -->
<!-- v4-doc-line 2729: reserved -->
<!-- v4-doc-line 2730: reserved -->
<!-- v4-doc-line 2731: reserved -->
<!-- v4-doc-line 2732: reserved -->
<!-- v4-doc-line 2733: reserved -->
<!-- v4-doc-line 2734: reserved -->
<!-- v4-doc-line 2735: reserved -->
<!-- v4-doc-line 2736: reserved -->
<!-- v4-doc-line 2737: reserved -->
<!-- v4-doc-line 2738: reserved -->
<!-- v4-doc-line 2739: reserved -->
<!-- v4-doc-line 2740: reserved -->
<!-- v4-doc-line 2741: reserved -->
<!-- v4-doc-line 2742: reserved -->
<!-- v4-doc-line 2743: reserved -->
<!-- v4-doc-line 2744: reserved -->
<!-- v4-doc-line 2745: reserved -->
<!-- v4-doc-line 2746: reserved -->
<!-- v4-doc-line 2747: reserved -->
<!-- v4-doc-line 2748: reserved -->
<!-- v4-doc-line 2749: reserved -->
<!-- v4-doc-line 2750: reserved -->
<!-- v4-doc-line 2751: reserved -->
<!-- v4-doc-line 2752: reserved -->
<!-- v4-doc-line 2753: reserved -->
<!-- v4-doc-line 2754: reserved -->
<!-- v4-doc-line 2755: reserved -->
<!-- v4-doc-line 2756: reserved -->
<!-- v4-doc-line 2757: reserved -->
<!-- v4-doc-line 2758: reserved -->
<!-- v4-doc-line 2759: reserved -->
<!-- v4-doc-line 2760: reserved -->
<!-- v4-doc-line 2761: reserved -->
<!-- v4-doc-line 2762: reserved -->
<!-- v4-doc-line 2763: reserved -->
<!-- v4-doc-line 2764: reserved -->
<!-- v4-doc-line 2765: reserved -->
<!-- v4-doc-line 2766: reserved -->
<!-- v4-doc-line 2767: reserved -->
<!-- v4-doc-line 2768: reserved -->
<!-- v4-doc-line 2769: reserved -->
<!-- v4-doc-line 2770: reserved -->
<!-- v4-doc-line 2771: reserved -->
<!-- v4-doc-line 2772: reserved -->
<!-- v4-doc-line 2773: reserved -->
<!-- v4-doc-line 2774: reserved -->
<!-- v4-doc-line 2775: reserved -->
<!-- v4-doc-line 2776: reserved -->
<!-- v4-doc-line 2777: reserved -->
<!-- v4-doc-line 2778: reserved -->
<!-- v4-doc-line 2779: reserved -->
<!-- v4-doc-line 2780: reserved -->
<!-- v4-doc-line 2781: reserved -->
<!-- v4-doc-line 2782: reserved -->
<!-- v4-doc-line 2783: reserved -->
<!-- v4-doc-line 2784: reserved -->
<!-- v4-doc-line 2785: reserved -->
<!-- v4-doc-line 2786: reserved -->
<!-- v4-doc-line 2787: reserved -->
<!-- v4-doc-line 2788: reserved -->
<!-- v4-doc-line 2789: reserved -->
<!-- v4-doc-line 2790: reserved -->
<!-- v4-doc-line 2791: reserved -->
<!-- v4-doc-line 2792: reserved -->
<!-- v4-doc-line 2793: reserved -->
<!-- v4-doc-line 2794: reserved -->
<!-- v4-doc-line 2795: reserved -->
</body>
</html>
